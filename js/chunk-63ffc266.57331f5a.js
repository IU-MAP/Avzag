(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63ffc266"],{"0e32":function(e,t,n){"use strict";var c=n("7a23");function a(e,t,n,a,o,r){var l=Object(c["A"])("btn"),u=Object(c["A"])("EditorCard");return Object(c["s"])(),Object(c["d"])(u,{icon:"sticky_note_2",header:"Notes",onAction:e.add},{caption:Object(c["K"])((function(){return[Object(c["z"])(e.$slots,"default")]})),default:Object(c["K"])((function(){return[(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(e.notes,(function(t,n){return Object(c["s"])(),Object(c["d"])("div",{key:n,class:"row"},[Object(c["L"])(Object(c["h"])("input",{"onUpdate:modelValue":function(t){return e.notes[n]=t},type:"text"},null,8,["onUpdate:modelValue"]),[[c["G"],e.notes[n]]]),Object(c["h"])(l,{icon:"clear",onClick:function(t){return e.remove(n)}},null,8,["onClick"])])})),128))]})),_:1},8,["onAction"])}n("a434");var o=n("7694"),r=Object(c["i"])({components:{EditorCard:o["a"]},props:{modelValue:{type:Array,default:void 0}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,a=Object(c["b"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}});function o(){a.value?a.value.push(""):a.value=[""]}function r(e){a.value&&a.value.splice(e,1)}return{notes:a,add:o,remove:r}}});r.render=a;t["a"]=r},1262:function(e,t,n){"use strict";var c=n("7a23"),a=Object(c["M"])("data-v-111069ae");Object(c["v"])("data-v-111069ae");var o={class:"row-1 small wrap",style:{width:"100%"}},r={class:"flex"},l={class:"row wrap flex"};Object(c["t"])();var u=a((function(e,t,n,a,u,i){var s=Object(c["A"])("btn"),b=Object(c["A"])("toggle"),d=Object(c["A"])("Context"),O=Object(c["A"])("Block"),j=Object(c["A"])("Notes");return e.phrase?(Object(c["s"])(),Object(c["d"])("div",{key:0,class:["col-1",{card:!e.editor}]},[Object(c["h"])("div",o,[e.lect?(Object(c["s"])(),Object(c["d"])(c["a"],{key:0},[Object(c["h"])(s,{icon:"content_copy",onClick:e.copy},null,8,["onClick"]),Object(c["h"])(b,{modelValue:e.glossed,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.glossed=t}),icon:"layers"},null,8,["modelValue"]),Object(c["h"])("h2",r,Object(c["C"])(e.lect),1)],64)):Object(c["e"])("",!0),Object(c["h"])(d,{translation:e.contextTranslation,blocks:e.editor?[]:e.blocks},null,8,["translation","blocks"])]),Object(c["h"])("div",l,[(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(e.phrase.blocks,(function(t,n){return Object(c["s"])(),Object(c["d"])(O,{ref:function(t){return e.blocks.push(t)},key:n,glossed:e.glossed,block:t},null,8,["glossed","block"])})),128))]),Object(c["h"])(j,{class:"text-caption",notes:e.phrase.notes},null,8,["notes"])],2)):Object(c["e"])("",!0)})),i=(n("4de4"),n("a15b"),n("d81d"),n("5794")),s=n("72e9"),b=n("d9c7"),d=Object(c["i"])({components:{Context:i["a"],Block:s["a"],Notes:b["a"]},props:{lect:{type:String,default:""},phrase:{type:Object,default:void 0},editor:Boolean},setup:function(e){var t=Object(c["x"])(!1),n=Object(c["b"])((function(){return e.lect?e.phrase.context:void 0})),a=Object(c["w"])([]),o=Object(c["b"])((function(){return a.filter((function(e){return null===e||void 0===e?void 0:e.visible})).map((function(e){return e.display.text})).join(" ")}));function r(){navigator.clipboard.writeText(o.value)}return{glossed:t,blocks:a,copy:r,contextTranslation:n}}});n("c5a7");d.render=u,d.__scopeId="data-v-111069ae";t["a"]=d},"40c4":function(e,t,n){"use strict";n("540a")},4831:function(e,t,n){},"540a":function(e,t,n){},5425:function(e,t,n){"use strict";n("bb3b")},a1df:function(e,t,n){"use strict";n.r(t);n("b0c0");var c=n("7a23"),a=Object(c["M"])("data-v-0a7fd5ea");Object(c["v"])("data-v-0a7fd5ea");var o={key:0,class:"section col-2 small grid"},r={class:"col-2"},l={class:"col-1 wrap card"},u={class:"row-1"},i=Object(c["h"])("p",{class:"icon"},"topic",-1),s={class:"col-1 flex"},b={key:0,class:"row-1"},d=Object(c["h"])("p",{class:"icon"},"short_text",-1),O=Object(c["h"])("p",{class:"text-faded text-caption"}," The source corpus is loading from what is saved on Phrasebook Corpus editor page. ",-1),j=Object(c["g"])(" You can add notes, for example, to explain certain grammatical rules. "),p=Object(c["g"])(" Translate the context keys (entites & tags) to provide full phrase localization. ");Object(c["t"])();var f=a((function(e,t,n,f,v,h){var m=Object(c["A"])("PhraseCard"),k=Object(c["A"])("BlocksOrderEditor"),y=Object(c["A"])("NotesEditor"),x=Object(c["A"])("ContextTranslationEditor"),g=Object(c["A"])("BlockEditor");return e.file&&e.corpus?(Object(c["s"])(),Object(c["d"])("div",o,[Object(c["h"])("div",r,[Object(c["h"])("div",l,[Object(c["h"])("div",u,[i,Object(c["h"])("h2",s,[Object(c["L"])(Object(c["h"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.section=t})},[(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(e.corpus,(function(e){return Object(c["s"])(),Object(c["d"])("option",{key:e.name,value:e},Object(c["C"])(e.name),9,["value"])})),128))],512),[[c["F"],e.section]])])]),e.section?(Object(c["s"])(),Object(c["d"])("div",b,[d,Object(c["L"])(Object(c["h"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.phrase=t})},[(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(e.section.phrases,(function(e){return Object(c["s"])(),Object(c["d"])("option",{key:e.id,value:e},Object(c["C"])(e.name),9,["value"])})),128))],512),[[c["F"],e.phrase]])])):Object(c["e"])("",!0),O,Object(c["h"])(m,{key:e.phrase.id,phrase:e.phrase,editor:!0},null,8,["phrase"])]),e.translation?(Object(c["s"])(),Object(c["d"])(c["a"],{key:0},[Object(c["h"])(k,{modelValue:e.block,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.block=t}),phrase:e.translation,"onUpdate:phrase":t[4]||(t[4]=function(t){return e.translation=t})},null,8,["modelValue","phrase"]),Object(c["h"])(y,{modelValue:e.translation.notes,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.translation.notes=t})},{default:a((function(){return[j]})),_:1},8,["modelValue"]),Object(c["h"])(x,{modelValue:e.translation.context,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.translation.context=t})},{default:a((function(){return[p]})),_:1},8,["modelValue"])],64)):Object(c["e"])("",!0)]),e.block?(Object(c["s"])(),Object(c["d"])(g,{key:0,modelValue:e.block,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.block=t})},null,8,["modelValue"])):Object(c["e"])("",!0)])):Object(c["e"])("",!0)})),v=(n("c975"),n("a434"),n("3835")),h=n("1262"),m=n("0e32"),k=n("428a"),y=n("9362"),x={class:"row wrap block-editor"},g={class:"col"},V={class:"text-caption"};function C(e,t,n,a,o,r){var l=Object(c["A"])("ButtonAlert"),u=Object(c["A"])("EditorCard");return Object(c["s"])(),Object(c["d"])(u,{button:e.translation?"":"queue",icon:"format_list_bulleted",header:"context translation",onAction:e.add},Object(c["f"])({caption:Object(c["K"])((function(){return[Object(c["z"])(e.$slots,"default")]})),default:Object(c["K"])((function(){return[e.translation?(Object(c["s"])(!0),Object(c["d"])(c["a"],{key:0},Object(c["y"])(e.entities,(function(t,n){return Object(c["s"])(),Object(c["d"])("div",{key:n,class:"row wrap"},[Object(c["h"])("div",x,[Object(c["h"])("div",g,[Object(c["h"])("h2",{class:["text-caption",e.colors[n]]},Object(c["C"])(t[0]),3),Object(c["L"])(Object(c["h"])("input",{"onUpdate:modelValue":function(e){return t[1]=e},size:e.sizes[n].entity,type:"text"},null,8,["onUpdate:modelValue","size"]),[[c["G"],t[1]]])]),(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(e.tags[n],(function(t,a){return Object(c["s"])(),Object(c["d"])("div",{key:t[0],class:"col"},[Object(c["h"])("p",V,Object(c["C"])(t[0]),1),Object(c["L"])(Object(c["h"])("input",{"onUpdate:modelValue":function(e){return t[1]=e},size:e.sizes[n].tags[a],type:"text"},null,8,["onUpdate:modelValue","size"]),[[c["G"],t[1]]])])})),128))])])})),128)):Object(c["e"])("",!0)]})),_:2},[e.translation?{name:"header",fn:Object(c["K"])((function(){return[Object(c["h"])(l,{onConfirm:t[1]||(t[1]=function(t){return e.translation=null})})]}))}:void 0]),1032,["button","onAction"])}n("d81d"),n("4fad");var w=n("2909"),A=n("898d"),U=n("7694"),_=Object(c["i"])({name:"PhraseContextTranslationEditor",components:{ButtonAlert:A["a"],EditorCard:U["a"]},props:{modelValue:{type:Object,default:void 0}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,a=Object(c["b"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),o=Object(c["l"])("contextSource",{}),r=Object(c["b"])((function(){var e;return null===(e=a.value)||void 0===e?void 0:e.map((function(e){return e.entity}))})),l=Object(c["b"])((function(){var e;return null===(e=a.value)||void 0===e?void 0:e.map((function(e){return e.tags}))})),u=Object(c["b"])((function(){var e;return null===(e=a.value)||void 0===e?void 0:e.map((function(e){var t=e.entity,n=e.tags;return{entity:Math.max(t[1].length,1),tags:n.map((function(e){return Math.max(e[1].length,1)}))}}))})),i=Object(c["b"])((function(){var e;return null===(e=r.value)||void 0===e?void 0:e.map((function(e,t){return"colored-dot-"+t}))}));function s(){a.value=Object.entries(o.value).map((function(e){var t=Object(v["a"])(e,2),n=t[0],c=t[1];return{entity:[n,""],tags:Object(w["a"])(c).map((function(e){return[e,""]}))}}))}return{translation:a,add:s,entities:r,tags:l,sizes:u,colors:i}}});_.render=C;var E=_,B=n("3a0b"),z=n("9392"),T=n("7ec3"),I=Object(c["i"])({components:{PhraseCard:h["a"],NotesEditor:m["a"],BlocksOrderEditor:k["a"],BlockEditor:y["a"],ContextTranslationEditor:E},setup:function(){var e=Object(c["x"])([]);try{e.value=JSON.parse(localStorage["editor.phrasebookCorpus"])}catch(b){Object(B["b"])("phrasebook").then((function(t){return e.value=t}))}var t=Object(c["x"])({}),n=Object(c["x"])({}),a=Object(c["x"])({}),o=Object(c["x"])({}),r=Object(c["x"])({}),l=Object(c["x"])({}),u=Object(z["d"])({defaultFile:{},filename:"phrasebook",storage:"editor.phrasebook"});function i(){l.value=l.value={states:[{display:[{text:"new state"}],transition:"next"}]},a.value.blocks.push(l.value)}function s(){var e=Object(c["D"])(a.value.blocks),t=e.indexOf(Object(c["D"])(l.value));e.splice(t,1),l.value=e[e.length-1]}return Object(c["u"])("context",o),Object(c["u"])("contextSource",r),Object(c["I"])(e,(function(e){return t.value=e[e.length-1]}),{immediate:!0}),Object(c["I"])(t,(function(e){null!==e&&void 0!==e&&e.phrases&&(n.value=e.phrases[e.phrases.length-1])}),{immediate:!0}),Object(c["I"])([n,u],(function(e){var t=Object(v["a"])(e,1),n=t[0];n&&(u.value[n.id]||(u.value[n.id]={blocks:[]}),a.value=u.value[n.id],Object(T["a"])(o,n.context),Object(T["a"])(r,n.context,!0))}),{immediate:!0}),Object(c["I"])(a,(function(e){null!==e&&void 0!==e&&e.blocks&&(l.value=e.blocks[e.blocks.length-1])}),{immediate:!0}),{file:u,corpus:e,section:t,phrase:n,translation:a,block:l,addBlock:i,removeBlock:s}}});n("40c4"),n("5425");I.render=f,I.__scopeId="data-v-0a7fd5ea";t["default"]=I},bb3b:function(e,t,n){},c5a7:function(e,t,n){"use strict";n("4831")},d9c7:function(e,t,n){"use strict";var c=n("7a23"),a={key:0,class:"col"},o={key:0},r={key:1,class:"highlight-font"},l={key:2},u={key:3,class:"text-ipa"};function i(e,t,n,i,s,b){return e.notes.length?(Object(c["s"])(),Object(c["d"])("div",a,[(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(e.pieces,(function(e,t){return Object(c["s"])(),Object(c["d"])("p",{key:t},[(Object(c["s"])(!0),Object(c["d"])(c["a"],null,Object(c["y"])(e,(function(e,t){var n=e.text,a=e.display;return Object(c["s"])(),Object(c["d"])(c["a"],{key:t},["plain"===a?(Object(c["s"])(),Object(c["d"])("span",o,Object(c["C"])(n),1)):"highlight"===a?(Object(c["s"])(),Object(c["d"])("span",r,Object(c["C"])(n),1)):"grapheme"===a?(Object(c["s"])(),Object(c["d"])("b",l,Object(c["C"])(n),1)):(Object(c["s"])(),Object(c["d"])("span",u,Object(c["C"])(n),1))],64)})),128))])})),128))])):Object(c["e"])("",!0)}n("d81d"),n("fb6a"),n("ac1f"),n("1276");var s=n("3835"),b=Object(c["i"])({props:{notes:{type:Array,default:function(){return[]}}},setup:function(e){function t(e,t,n){return e[0]===t&&e[e.length-1]===n}function n(e){for(var n=[["*","*","highlight"],["/","/","phoneme"],["<",">","grapheme"]],c=0,a=n;c<a.length;c++){var o=Object(s["a"])(a[c],3),r=o[0],l=o[1],u=o[2];if(t(e,r,l))return{text:e.slice(1,-1),display:u}}return{text:e,display:"plain"}}var a=Object(c["b"])((function(){var t=/(\/[^/]+\/|<[^<>]+>|\*[^*]+\*)/g;return e.notes.map((function(e){return e.split(t).map((function(e){return n(e)}))}))}));return{pieces:a}}});b.render=i;t["a"]=b}}]);
//# sourceMappingURL=chunk-63ffc266.57331f5a.js.map