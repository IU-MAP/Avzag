(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-efef21be"],{"0b8b":function(t,e,n){},2866:function(t,e,n){"use strict";n("0b8b")},"428a":function(t,e,n){"use strict";var o=n("7a23"),i=Object(o["h"])("p",{class:"text-dot"},null,-1),c={class:"row-1 wrap block-editor"};function a(t,e,n,a,l,r){var u=Object(o["B"])("ArrayShift"),s=Object(o["B"])("ButtonAlert"),d=Object(o["B"])("Context"),b=Object(o["B"])("btn"),O=Object(o["B"])("VBlock"),j=Object(o["B"])("EditorCard");return t.mphrase?(Object(o["t"])(),Object(o["d"])(j,{key:0,icon:"account_tree",header:"Blocks",onAction:t.add},Object(o["f"])({default:Object(o["K"])((function(){return[Object(o["h"])(d,{translation:t.phrase.id?null:t.phrase.context,blocks:t.vblocks},null,8,["translation","blocks"]),Object(o["h"])("div",c,[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(t.blocks,(function(e,n){return Object(o["t"])(),Object(o["d"])("div",{key:n+"--"+Math.random(),class:"row"},[Object(o["h"])(b,{icon:"edit","is-on":t.block===e,onClick:function(n){return t.block=e}},null,8,["is-on","onClick"]),Object(o["h"])(O,{ref:function(e){return e?t.vblocks.push(e):null},block:e},null,8,["block"])])})),128))])]})),_:2},[t.block?{name:"header",fn:Object(o["K"])((function(){return[Object(o["h"])(u,{modelValue:t.blocks,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.blocks=e}),item:t.block},null,8,["modelValue","item"]),i,Object(o["h"])(s,{onConfirm:t.remove},null,8,["onConfirm"])]}))}:void 0]),1032,["onAction"])):Object(o["e"])("",!0)}n("c975"),n("a434");var l=n("7694"),r=n("4c33"),u=n("898d"),s=n("5794"),d=n("72e9"),b=Object(o["i"])({components:{EditorCard:l["a"],ArrayShift:r["a"],ButtonAlert:u["a"],Context:s["a"],VBlock:d["a"]},props:{modelValue:{type:Object,default:void 0},phrase:{type:Object,default:function(){return{}}},corpus:Boolean},emits:["update:modelValue","update:phrase"],setup:function(t,e){var n=e.emit,i=Object(o["b"])({get:function(){return t.phrase},set:function(t){return n("update:modelValue",t)}}),c=Object(o["b"])({get:function(){return i.value.blocks},set:function(t){return i.value.blocks=t}}),a=Object(o["b"])({get:function(){return t.modelValue},set:function(t){return n("update:modelValue",t)}}),l=Object(o["y"])([]);function r(){a.value=c.value?c.value[c.value.length-1]:void 0}function u(){c.value||(c.value=[]),c.value.push({states:[{display:[{text:"new state"}],transition:"next"}]}),r()}function s(){if(a.value){var t=Object(o["E"])(c.value).indexOf(Object(o["E"])(a.value));c.value.splice(t,1),r()}}return Object(o["p"])((function(){return l.value=[]})),Object(o["I"])(c,r,{immediate:!0}),{mphrase:i,blocks:c,vblocks:l,block:a,add:u,remove:s}}});b.render=a;e["a"]=b},"4c33":function(t,e,n){"use strict";var o=n("7a23"),i={class:"row-0"};function c(t,e,n,c,a,l){var r=Object(o["B"])("btn");return Object(o["t"])(),Object(o["d"])("div",i,[Object(o["h"])(r,{icon:"keyboard_arrow_up",onClick:e[1]||(e[1]=function(e){return t.shift(-1)})}),Object(o["h"])(r,{icon:"keyboard_arrow_down",onClick:e[2]||(e[2]=function(e){return t.shift(1)})})])}n("c975"),n("a434");var a=Object(o["i"])({props:{modelValue:{type:Array,default:function(){return[]}},item:{type:Object,default:void 0}},emits:["update:modelValue"],setup:function(t,e){var n=e.emit,i=Object(o["b"])({get:function(){return t.modelValue},set:function(t){return n("update:modelValue",t)}});function c(e){var n=i.value.length,c=Object(o["E"])(i.value).indexOf(Object(o["E"])(t.item)),a=(c+e+n)%n;i.value.splice(a,0,i.value.splice(c,1)[0])}return{shift:c}}});a.render=c;e["a"]=a},"64d1":function(t,e,n){},"67a4":function(t,e,n){"use strict";n("64d1")},7694:function(t,e,n){"use strict";var o=n("7a23"),i=Object(o["M"])("data-v-4a416a12");Object(o["w"])("data-v-4a416a12");var c={class:"col"},a={class:"row"},l={class:"icon"},r={class:"flex"},u={key:0,class:"text-caption text-faded"};Object(o["u"])();var s=i((function(t,e,n,i,s,d){var b=Object(o["B"])("btn");return Object(o["t"])(),Object(o["d"])("div",c,[Object(o["h"])("div",a,[t.button?(Object(o["t"])(),Object(o["d"])(b,{key:0,icon:t.button,onClick:e[1]||(e[1]=function(e){return t.emit("action")})},null,8,["icon"])):Object(o["e"])("",!0),Object(o["h"])("p",l,Object(o["D"])(t.icon),1),Object(o["h"])("h2",r,Object(o["D"])(t.header),1),Object(o["A"])(t.$slots,"header")]),t.caption?(Object(o["t"])(),Object(o["d"])("p",u,[Object(o["A"])(t.$slots,"caption")])):Object(o["e"])("",!0),Object(o["A"])(t.$slots,"default")])})),d=Object(o["i"])({name:"EditorCard",props:{button:{type:String,default:"add"},icon:{type:String,default:""},header:{type:String,default:""}},emits:["action"],setup:function(t,e){var n=e.emit,o=e.slots;return{emit:n,caption:o.caption}}});n("2866");d.render=s,d.__scopeId="data-v-4a416a12";e["a"]=d},"898d":function(t,e,n){"use strict";var o=n("7a23"),i={class:"row-0"};function c(t,e,n,c,a,l){var r=Object(o["B"])("btn");return Object(o["t"])(),Object(o["d"])("div",i,[t.prompt?(Object(o["t"])(),Object(o["d"])(o["a"],{key:0},[Object(o["h"])(r,{class:"highlight-font-alert",icon:"delete_forever",onClick:t.confirm},null,8,["onClick"]),Object(o["h"])(r,{icon:"check",onClick:e[1]||(e[1]=function(e){return t.prompt=!1})})],64)):(Object(o["t"])(),Object(o["d"])(r,{key:1,class:"highlight-font-alert",icon:"delete",text:t.text,onClick:e[2]||(e[2]=function(e){return t.prompt=!0})},null,8,["text"]))])}var a=Object(o["i"])({props:{text:{type:String,default:""}},emits:["confirm"],setup:function(t,e){var n=e.emit,i=Object(o["y"])(!1);function c(){i.value=!1,n("confirm")}return{prompt:i,confirm:c}}});a.render=c;e["a"]=a},9362:function(t,e,n){"use strict";var o=n("7a23"),i={class:"block col-2"},c=Object(o["g"])(" If at least one of these conditions fails, the block will be completely hidden. "),a=Object(o["h"])("p",{class:"text-dot"},null,-1),l={class:"row-1 wrap block-editor"};function r(t,e,n,r,u,s){var d=Object(o["B"])("ConditionsEditor"),b=Object(o["B"])("toggle"),O=Object(o["B"])("ButtonAlert"),j=Object(o["B"])("btn"),f=Object(o["B"])("Display"),p=Object(o["B"])("EditorCard"),h=Object(o["B"])("DisplayEditor"),m=Object(o["B"])("TransitionEditor");return Object(o["t"])(),Object(o["d"])("div",i,[Object(o["h"])(d,{modelValue:s.block.requirements,"onUpdate:modelValue":e[1]||(e[1]=function(t){return s.block.requirements=t}),icon:"lock",header:"Requirements"},{default:Object(o["K"])((function(){return[c]})),_:1},8,["modelValue"]),Object(o["h"])(p,{icon:"tune",header:"States",onAction:s.add},Object(o["f"])({default:Object(o["K"])((function(){return[Object(o["h"])("div",l,[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(s.states,(function(t,e){return Object(o["t"])(),Object(o["d"])("div",{key:e,class:"row"},[Object(o["h"])(j,{icon:"edit","is-on":u.state===t,onClick:function(e){return u.state=t}},null,8,["is-on","onClick"]),Object(o["h"])(f,{state:t,glossed:u.glossed},null,8,["state","glossed"])])})),128))])]})),_:2},[u.state?{name:"header",fn:Object(o["K"])((function(){return[Object(o["h"])(b,{modelValue:u.glossed,"onUpdate:modelValue":e[2]||(e[2]=function(t){return u.glossed=t}),icon:"layers"},null,8,["modelValue"]),a,Object(o["h"])(O,{onConfirm:s.remove},null,8,["onConfirm"])]}))}:void 0]),1032,["onAction"]),u.state?(Object(o["t"])(),Object(o["d"])(o["a"],{key:0},[Object(o["h"])(h,{modelValue:u.state.display,"onUpdate:modelValue":e[3]||(e[3]=function(t){return u.state.display=t}),implicit:u.state.implicit,"onUpdate:implicit":e[4]||(e[4]=function(t){return u.state.implicit=t})},null,8,["modelValue","implicit"]),Object(o["h"])(d,{modelValue:u.state.conditions,"onUpdate:modelValue":e[5]||(e[5]=function(t){return u.state.conditions=t}),"allow-passive":!0,icon:"widgets",header:"conditions"},null,8,["modelValue"]),Object(o["h"])(m,{modelValue:u.state.transition,"onUpdate:modelValue":e[6]||(e[6]=function(t){return u.state.transition=t}),states:s.states},null,8,["modelValue","states"])],64)):Object(o["e"])("",!0)])}n("c975"),n("a434");var u=n("898d"),s=n("7694"),d=Object(o["M"])("data-v-6e2fd21f");Object(o["w"])("data-v-6e2fd21f");var b={class:"scroll col"},O=Object(o["h"])("p",{class:"icon"},"west",-1);Object(o["u"])();var j=d((function(t,e,n,i,c,a){var l=Object(o["B"])("toggle"),r=Object(o["B"])("btn"),u=Object(o["B"])("EditorCard");return Object(o["t"])(),Object(o["d"])(u,{icon:n.icon,header:n.header,onAction:a.add},{caption:d((function(){return[Object(o["A"])(t.$slots,"default")]})),default:d((function(){return[Object(o["h"])("div",b,[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(a.conditions,(function(t,e){return Object(o["t"])(),Object(o["d"])("div",{key:e,class:"row"},[n.allowPassive?(Object(o["t"])(),Object(o["d"])(l,{key:0,modelValue:t.passive,"onUpdate:modelValue":function(e){return t.passive=e},icon:"call_missed"},null,8,["modelValue","onUpdate:modelValue"])):Object(o["e"])("",!0),Object(o["L"])(Object(o["h"])("select",{"onUpdate:modelValue":function(e){return t.entity=e},onChange:function(e){return a.setEntity(t)}},[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(a.entities,(function(t){return Object(o["t"])(),Object(o["d"])("option",{key:t,value:t},Object(o["D"])(t),9,["value"])})),128))],40,["onUpdate:modelValue","onChange"]),[[o["G"],t.entity]]),O,t.entity?Object(o["L"])((Object(o["t"])(),Object(o["d"])("select",{key:1,"onUpdate:modelValue":function(e){return t.tag=e}},[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(a.tags[t.entity],(function(t){return Object(o["t"])(),Object(o["d"])("option",{key:t,value:t},Object(o["D"])(t),9,["value"])})),128))],8,["onUpdate:modelValue"])),[[o["G"],t.tag]]):Object(o["e"])("",!0),Object(o["h"])(r,{icon:"clear",onClick:function(t){return a.remove(e)}},null,8,["onClick"])])})),128))])]})),_:1},8,["icon","header","onAction"])})),f=(n("13d5"),n("4fad"),n("b64b"),n("2909")),p=n("3835"),h={name:"PhraseConditionsEditor",components:{EditorCard:s["a"]},inject:["contextSource"],props:["modelValue","allowPassive","header","icon"],emits:["update:modelValue"],computed:{conditions:{get:function(){return this.modelValue},set:function(t){this.$emit("update:modelValue",t)}},entities:function(){return Object.keys(this.contextSource.value)},tags:function(){return Object.entries(this.contextSource.value).reduce((function(t,e){var n=Object(p["a"])(e,2),o=n[0],i=n[1];return t[o]=Object(f["a"])(i),t}),{})}},methods:{setEntity:function(t){t.tag=this.tags[t.entity][0]},add:function(){var t,e={entity:this.entities[0]};this.setEntity(e);var n=null!==(t=this.conditions)&&void 0!==t?t:[];n.push(e),this.conditions=n},remove:function(t){this.conditions.splice(t,1)}}};n("67a4");h.render=j,h.__scopeId="data-v-6e2fd21f";var m=h,v={class:"row"},y={key:0,class:"row-1 wrap block-editor"};function k(t,e,n,i,c,a){var l=Object(o["B"])("btn"),r=Object(o["B"])("Display"),u=Object(o["B"])("EditorCard");return Object(o["t"])(),Object(o["d"])(u,{button:"",icon:"alt_route",header:"transition"},{header:Object(o["K"])((function(){return[Object(o["h"])("div",v,[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(c.icons,(function(t,e){return Object(o["t"])(),Object(o["d"])(l,{key:t,icon:t,"is-on":c.mode===e,onClick:function(t){return c.mode=e}},null,8,["icon","is-on","onClick"])})),128))])]})),default:Object(o["K"])((function(){return[2===c.mode?(Object(o["t"])(),Object(o["d"])("div",y,[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(n.states,(function(t,e){return Object(o["t"])(),Object(o["d"])("div",{key:e,class:"row"},[Object(o["h"])(l,{icon:"check","is-on":a.present[e],onClick:function(t){return a.toggle(e)}},null,8,["is-on","onClick"]),Object(o["h"])(r,{state:t},null,8,["state"])])})),128))])):Object(o["e"])("",!0)]})),_:1})}n("4de4"),n("caad"),n("a15b"),n("d81d"),n("a9e3"),n("ac1f"),n("2532"),n("1276");var g=n("83b8"),V={name:"PhraseStateTransitionEditor",components:{EditorCard:s["a"],Display:g["a"]},props:["modelValue","states"],emits:["update:modelValue"],data:function(){return{mode:0,icons:["block","arrow_forward","star_outline"]}},computed:{transition:{get:function(){return this.modelValue},set:function(t){this.$emit("update:modelValue",t)}},ints:function(){var t,e;return null!==(t=null===(e=this.transition)||void 0===e?void 0:e.split(" ").map((function(t){return Number(t)})).filter((function(t){return!isNaN(t)})))&&void 0!==t?t:[]},present:function(){var t=this;return this.states.map((function(e,n){return t.ints.includes(n)}))}},watch:{state:{handler:function(){"next"===this.transition?this.mode=1:this.transition?this.mode=2:this.mode=0},immediate:!0},mode:function(){1===this.mode?this.transition="next":this.mode||(this.transition=void 0)}},methods:{toggle:function(t){var e=this.ints;e.includes(t)?e.splice(e.indexOf(t),1):e.push(t),2===this.mode&&(this.transition=e.join(" "))}}};V.render=k;var C=V,w={key:0,class:"col"};function x(t,e,n,i,c,a){var l=Object(o["B"])("toggle"),r=Object(o["B"])("btn"),u=Object(o["B"])("EditorCard");return Object(o["t"])(),Object(o["d"])(u,{icon:"visibility",header:"display",onAction:a.add},{header:Object(o["K"])((function(){return[Object(o["h"])(l,{icon:"opacity","model-value":n.implicit,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.$emit("update:implicit",e)})},null,8,["model-value"])]})),default:Object(o["K"])((function(){return[a.display?(Object(o["t"])(),Object(o["d"])("div",w,[(Object(o["t"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(a.display,(function(t,e){return Object(o["t"])(),Object(o["d"])("div",{key:e,class:"row"},[Object(o["h"])(r,{icon:"palette",onClick:function(t){return a.toggle(e)}},null,8,["onClick"]),Object(o["L"])(Object(o["h"])("input",{"onUpdate:modelValue":function(e){return t.text=e},class:a.colors[e],type:"text",placeholder:"text"},null,10,["onUpdate:modelValue"]),[[o["H"],t.text]]),Object(o["L"])(Object(o["h"])("input",{"onUpdate:modelValue":function(e){return t.ipa=e},class:["text-ipa",a.colors[e]],type:"text",placeholder:"ipa"},null,10,["onUpdate:modelValue"]),[[o["H"],t.ipa]]),Object(o["L"])(Object(o["h"])("input",{"onUpdate:modelValue":function(e){return t.glossing=e},class:["glossing",a.colors[e]],type:"text",placeholder:"glossing"},null,10,["onUpdate:modelValue"]),[[o["H"],t.glossing]]),Object(o["h"])(r,{icon:"clear",onClick:function(t){return a.remove(e)}},null,8,["onClick"])])})),128))])):Object(o["e"])("",!0)]})),_:1},8,["onAction"])}n("99af");var B={name:"PhraseStateDisplayEditor",components:{EditorCard:s["a"]},inject:["contextSource"],props:["modelValue","implicit","allowEmpty"],emits:["update:modelValue","update:implicit"],computed:{display:{get:function(){return this.modelValue},set:function(t){this.$emit("update:modelValue",t)}},entities:function(){return[void 0].concat(Object.keys(this.contextSource.value))},colors:function(){var t=this;return this.display.map((function(e){return"colored-"+(t.entities.indexOf(e.entity)-1)}))}},methods:{add:function(){this.display||(this.display=[]),this.display.push({})},toggle:function(t){var e=this.entities.indexOf(this.display[t].entity);e=(e+1)%this.entities.length,this.display[t].entity=this.entities[e]},remove:function(t){(this.allowEmpty||this.display.length>1)&&this.display.splice(t,1)}}};B.render=x;var E=B,S={name:"PhraseBlockEditor",components:{ButtonAlert:u["a"],EditorCard:s["a"],ConditionsEditor:m,TransitionEditor:C,Display:g["a"],DisplayEditor:E},props:["modelValue"],emits:["update:modelValue"],data:function(){return{state:void 0,glossed:!1}},computed:{block:{get:function(){return this.modelValue},set:function(t){this.$emit("update:modelValue",t)}},states:function(){var t;return null===(t=this.block)||void 0===t?void 0:t.states}},watch:{block:{handler:function(){var t;null!==(t=this.states)&&void 0!==t&&t.length?this.state=this.states[this.states.length-1]:(this.block.states=[],this.add())},immediate:!0}},methods:{add:function(){var t={display:[{text:"new state"}],transition:"next"};this.states.push(t),this.state=t},remove:function(){this.states.length>1&&(this.states.splice(this.states.indexOf(this.state),1),this.state=this.states[this.states.length-1])}}};S.render=r;e["a"]=S},9392:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return r}));var o=n("7a23"),i={defaultFile:{},storage:"",filename:""},c=Object(o["y"])();function a(){c.value=JSON.parse(JSON.stringify(i.defaultFile))}function l(){localStorage[i.storage]=JSON.stringify(c.value)}function r(t){Object.assign(i,t);try{c.value=JSON.parse(localStorage[i.storage])}catch(e){a()}return Object(o["I"])(c,l,{deep:!0}),c}},a434:function(t,e,n){"use strict";var o=n("23e7"),i=n("23cb"),c=n("a691"),a=n("50c4"),l=n("7b0b"),r=n("65f0"),u=n("8418"),s=n("1dde"),d=n("ae40"),b=s("splice"),O=d("splice",{ACCESSORS:!0,0:0,1:2}),j=Math.max,f=Math.min,p=9007199254740991,h="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!b||!O},{splice:function(t,e){var n,o,s,d,b,O,m=l(this),v=a(m.length),y=i(t,v),k=arguments.length;if(0===k?n=o=0:1===k?(n=0,o=v-y):(n=k-2,o=f(j(c(e),0),v-y)),v+n-o>p)throw TypeError(h);for(s=r(m,o),d=0;d<o;d++)b=y+d,b in m&&u(s,d,m[b]);if(s.length=o,n<o){for(d=y;d<v-o;d++)b=d+o,O=d+n,b in m?m[O]=m[b]:delete m[O];for(d=v;d>v-o+n;d--)delete m[d-1]}else if(n>o)for(d=v-o;d>y;d--)b=d+o-1,O=d+n-1,b in m?m[O]=m[b]:delete m[O];for(d=0;d<n;d++)m[d+y]=arguments[d+2];return m.length=v-o+n,s}})}}]);
//# sourceMappingURL=chunk-efef21be.f045df5b.js.map