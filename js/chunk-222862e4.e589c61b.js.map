{"version":3,"sources":["webpack:///./src/components/ConfirmButton.vue","webpack:///./src/components/ConfirmButton.vue?2177","webpack:///./src/components/ConfirmButton.vue?2c30","webpack:///./src/Phrasebook/Block/OrderEditor.vue","webpack:///./src/Phrasebook/Block/OrderEditor.vue?bf7d","webpack:///./src/Phrasebook/Block/OrderEditor.vue?81c1","webpack:///./src/components/EditorCard.vue","webpack:///./src/components/EditorCard.vue?73a3","webpack:///./src/components/EditorCard.vue?01ae","webpack:///./src/Phrasebook/Block/Editor.vue","webpack:///./src/Phrasebook/State/ConditionsEditor.vue","webpack:///./src/Phrasebook/State/ConditionsEditor.vue?3a5e","webpack:///./src/Phrasebook/State/ConditionsEditor.vue?407c","webpack:///./src/Phrasebook/State/TransitionEditor.vue","webpack:///./src/Phrasebook/State/TransitionEditor.vue?270b","webpack:///./src/Phrasebook/State/TransitionEditor.vue?2939","webpack:///./src/Phrasebook/State/TextsEditor.vue","webpack:///./src/Phrasebook/State/TextsEditor.vue?36cc","webpack:///./src/Phrasebook/State/TextsEditor.vue?b653","webpack:///./src/Phrasebook/Block/Editor.vue?a3d1","webpack:///./src/Phrasebook/Block/Editor.vue?7956","webpack:///./src/editor.ts","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/components/ArrayControl.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./src/components/ArrayControl.vue?c40b","webpack:///./src/components/ArrayControl.vue?e28d","webpack:///./src/components/EditorCard.vue?7459","webpack:///./src/Phrasebook/State/ConditionsEditor.vue?5f33"],"names":["class","icon","text","confirm","props","message","type","String","default","emits","setup","emit","window","render","mphrase","header","blocks","item","block","add","newState","copy","shift","remove","translation","phrase","id","context","b","i","key","Math","random","is-on","name","components","ArrayControl","EditorCard","Context","Block","modelValue","Array","undefined","Object","get","set","p","value","bs","caption","button","_","slots","__scopeId","glossed","state","s","texts","conditions","transition","states","tags","entity","tag","color","flag","toggle","c","index","keys","length","flatMap","map","immediate","deep","mode","includes","VState","t","m","stateIndex","isArray","indexOf","push","splice","colors","plain","placeholder","ipa","gloss","entities","e","ConditionsEditor","TransitionEditor","TextsEditor","config","defaultFile","storage","filename","file","resetFile","JSON","parse","stringify","saveFile","localStorage","setupEditor","options","assign","$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","this","len","actualStart","argumentsLength","arguments","TypeError","action","array","_typeof","obj","Symbol","iterator","constructor","prototype","ConfirmButton","Number","Function","Boolean","last"],"mappings":"8MACE,eAKE,GAJAA,MAAM,uBACLC,KAAM,EAAAA,KACNC,KAAM,EAAAA,KACN,QAAO,EAAAC,S,kCCFG,qBAAgB,CAC7BC,MAAO,CACLC,QAAS,CAAEC,KAAMC,OAAQC,QAAS,WAClCP,KAAM,CAAEK,KAAMC,OAAQC,QAAS,UAC/BN,KAAM,CAAEI,KAAMC,OAAQC,QAAS,KAEjCC,MAAO,CAAC,WACRC,MAP6B,SAOvBN,EAPuB,GAOR,IAANO,EAAM,EAANA,KACb,SAASR,IACHS,OAAOT,QAAQC,EAAMC,UAAUM,EAAK,WAE1C,MAAO,CAAER,cCXb,EAAOU,OAASA,EAED,U,gFCQNb,MAAM,2B,iLAZK,EAAAc,S,iBAAlB,eAkBa,G,MAlBcb,KAAK,UAAUc,OAAO,U,CACpCA,OAAM,gBACf,iBAOE,CAPF,eAOE,G,WANS,EAAAC,O,qDAAA,EAAAA,OAAM,IACPC,KAAM,EAAAC,M,+CAAA,EAAAA,MAAK,IAClBC,IAAG,kBAAS,EAAAC,aACbC,KAAA,GACAC,MAAA,GACAC,OAAA,I,gEAGJ,iBAA4D,CAA5D,eAA4D,GAAlDC,YAAa,EAAAC,OAAOC,GAAE,KAAU,EAAAD,OAAOE,S,wBACjD,eAKM,MALN,EAKM,E,mBAJJ,eAGM,2BAHgB,EAAAX,QAAM,SAAfY,EAAGC,G,wBAAhB,eAGM,OAHyBC,IAAKD,EAAI,KAAOE,KAAKC,SAAUhC,MAAM,O,CAClE,eAA2D,GAAtDC,KAAK,OAAQgC,QAAO,EAAAf,QAAUU,EAAI,QAAK,mBAAE,EAAAV,MAAQU,I,4BACtD,eAAoB,GAAZV,MAAOU,GAAC,uB,yGCNT,iBAAgB,CAC7BM,KAAM,cACNC,WAAY,CAAEC,eAAA,KAAcC,aAAA,KAAYC,UAAA,KAASC,QAAA,MACjDnC,MAAO,CACLoC,WAAY,CACVlC,KAAMmC,MACNjC,aAASkC,GAEXjB,OAAQ,CACNnB,KAAMqC,OACNnC,aAASkC,IAGbjC,MAAO,CAAC,oBAAqB,iBAC7BC,MAd6B,SAcvBN,EAduB,GAcR,IAANO,EAAM,EAANA,KACPO,EAAQ,eAAS,CACrB0B,IAAK,kBAAMxC,EAAMoC,YACjBK,IAAK,SAACjB,GAAD,OAAOjB,EAAK,oBAAqBiB,MAElCd,EAAU,eAAS,CACvB8B,IAAK,kBAAMxC,EAAMqB,QACjBoB,IAAK,SAACC,GAAD,OAAOnC,EAAK,oBAAqBmC,MAElC9B,EAAS,eAAS,CACtB4B,IAAK,kBAAM9B,EAAQiC,MAAM/B,QACzB6B,IAAK,SAACG,GAAD,OAASlC,EAAQiC,MAAM/B,OAASgC,KAGvC,MAAO,CAAElC,UAASE,SAAQE,QAAOE,SAAA,WCnCrC,EAAOP,OAASA,EAED,U,+HCJRb,MAAM,O,GACJA,MAAM,O,GACNA,MAAM,Q,GACLA,MAAM,Q,EAGZ,eAAM,mB,SACYA,MAAM,2B,GAGnBA,MAAM,O,wEAVb,eAaM,MAbN,EAaM,CAZJ,eAIM,MAJN,EAIM,CAHJ,eAA8B,IAA9B,EAA8B,eAAX,EAAAC,MAAI,GACvB,eAAkC,KAAlC,EAAkC,eAAd,EAAAc,QAAM,GAC1B,eAAsB,qBAExB,EACS,EAAAkC,S,iBAAT,eAEI,IAFJ,EAEI,CADF,eAAuB,uB,sBAEzB,eAEM,MAFN,EAEM,CADJ,eAAQ,2BCTC,iBAAgB,CAC7Bf,KAAM,aACN9B,MAAO,CACL8C,OAAQ,CAAE5C,KAAMC,OAAQC,QAAS,OACjCP,KAAM,CAAEK,KAAMC,OAAQC,QAAS,IAC/BO,OAAQ,CAAET,KAAMC,OAAQC,QAAS,KAEnCC,MAAO,CAAC,UACRC,MAR6B,SAQvByC,EARuB,GAQL,IAAbxC,EAAa,EAAbA,KAAMyC,EAAO,EAAPA,MACf,MAAO,CAAEzC,OAAMsC,QAASG,EAAMH,Y,UCPlC,EAAOpC,OAASA,EAChB,EAAOwC,UAAY,kBAEJ,U,2DCPKrD,MAAM,e,GAafA,MAAM,2B,SAOeA,MAAM,uB,mQApBzB,EAAAkB,O,iBAAX,eA8BM,MA9BN,EA8BM,CA7BJ,eAuBa,GAvBDjB,KAAK,eAAec,OAAO,U,CAC1BA,OAAM,gBACf,iBAA0C,CAA1C,eAA0C,G,WAAzB,EAAAuC,Q,qDAAA,EAAAA,QAAO,IAAErD,KAAK,U,uBAC/B,eAOE,G,WANS,EAAAiB,M,qDAAA,EAAAA,MAAK,IACND,KAAM,EAAAsC,M,+CAAA,EAAAA,MAAK,IAClBpC,IAAK,EAAAC,SACNC,KAAA,GACAC,MAAA,GACAC,OAAA,I,gEAGJ,iBAUM,CAVN,eAUM,MAVN,EAUM,E,mBATJ,eAQS,2BAPU,EAAAL,OAAK,SAAdsC,EAAG3B,G,wBADb,eAQS,UANNC,IAAKD,EACN7B,MAAM,YACL,QAAK,mBAAE,EAAAuD,MAAQC,I,CAEP,EAAAD,QAAUC,G,iBAAnB,eAA0D,IAA1D,EAAkD,S,sBAClD,eAAwC,GAA/BD,MAAOC,EAAIF,QAAS,EAAAA,S,iEAInB,EAAAC,O,iBAAhB,eAIW,gBAHT,eAAqC,G,WAAf,EAAAA,MAAME,M,qDAAN,EAAAF,MAAME,MAAK,K,uBACjC,eAA+C,G,WAApB,EAAAF,MAAMG,W,qDAAN,EAAAH,MAAMG,WAAU,K,uBAC3C,eAA+D,G,WAApC,EAAAH,MAAMI,W,qDAAN,EAAAJ,MAAMI,WAAU,IAAGC,OAAQ,EAAA1C,O,4MCxBrC,0B,GACdlB,MAAM,Y,mIALb,eAiBa,GAjBDC,KAAK,OAAOc,OAAO,c,gBAIlBkC,QAAO,GAAC,iBAAsB,C,iBACzC,iBAWM,CAXN,eAWM,MAXN,EAWM,E,mBAVJ,eASS,2BAR2C,EAAAY,MAAI,WAAVhC,GAAC,IAAnCiC,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,IAAKC,EAAsB,EAAtBA,MAAO/D,EAAe,EAAfA,KAAMgE,EAAS,EAATA,K,wBADtC,eASS,UAPNnC,IAAKgC,EAAS,KAAOC,EACrB,QAAK,mBAAE,EAAAG,OAAOrC,K,MAEGa,IAATuB,G,iBAAT,eAEI,K,MAFyBjE,MAAK,CAAC,OAAM,WAAsBgE,I,eAC1D/D,GAAI,I,sBAET,eAAgD,KAA5CD,MAAK,eAAmBgE,G,eAAUD,GAAG,I,oCAb7B,EAAAL,W,MAAa,S,MAC3B,iBAA6C,CAA7C,eAA6C,GAAxCzD,KAAK,QAAS,QAAK,+BAAE,EAAAyD,WAAU,iB,mECU3B,iBAAgB,CAC7BxB,KAAM,mBACNC,WAAY,CAAEE,aAAA,MACdjC,MAAO,CACLoC,WAAY,CAAElC,KAAMqC,OAAgCnC,aAASkC,IAE/DjC,MAAO,CAAC,qBACRC,MAP6B,SAOvBN,EAPuB,GAOR,IAANO,EAAM,EAANA,KACPgB,EAAU,eACd,gBACA,IAEI+B,EAAa,eAAS,CAC1Bd,IAAK,kBAAMxC,EAAMoC,YACjBK,IAAK,SAACsB,GAAD,OAAOxD,EAAK,oBAAqBwD,MAElCN,EAAO,eACX,IA8BF,SAASK,EAAOE,GACd,GAAKP,EAAKd,MAAV,CAD2B,MAEGc,EAAKd,MAAMqB,GAAjCH,EAFmB,EAEnBA,KAAMH,EAFa,EAEbA,OAAQC,EAFK,EAELA,SACTrB,IAATuB,GACGP,EAAWX,MAAMe,KAASJ,EAAWX,MAAMe,GAAU,IAC1DJ,EAAWX,MAAMe,GAAQC,IAAO,GACvBE,EAAMP,EAAWX,MAAMe,GAAQC,IAAO,UAExCL,EAAWX,MAAMe,GAAQC,GAC3BpB,OAAO0B,KAAKX,EAAWX,MAAMe,IAASQ,eAClCZ,EAAWX,MAAMe,KAI9B,OApCA,eACE,CAACnC,EAAS+B,IACV,YAA0B,0BAAxB/B,EAAwB,KAAf+B,EAAe,KACnB/B,GAAY+B,IACjBG,EAAKd,MAAQpB,EAAQ4C,SAAQ,WAAmB1C,GAAnB,IAAGiC,EAAH,EAAGA,OAAQD,EAAX,EAAWA,KAAX,OAC3BA,EAAKW,KAAI,SAACT,GAAO,MACTE,EAAI,UAAGP,EAAWI,UAAd,aAAG,EAAqBC,GAC5B9D,OACKyC,IAATuB,EAAqB,cAAgBA,EAAO,OAAS,OAEvD,MAAO,CACLF,MACAD,SACA7D,OACA+D,MAAOnC,EACPoC,KAAMA,YAKd,CAAEQ,WAAW,EAAMC,MAAM,IAgBpB,CAAE/C,UAAS+B,aAAYG,OAAMK,a,UCrExC,EAAOrD,OAAS,EAChB,EAAOwC,UAAY,kBAEJ,Q,wBCLJrD,MAAM,Q,SAMUA,MAAM,Y,SAGQA,MAAM,uB,sIAX7C,eAiBa,GAjBDC,KAAK,YAAYc,OAAO,c,CACvBA,OAAM,gBACf,iBAIM,CAJN,eAIM,MAJN,EAIM,CAHJ,eAA0D,GAArDd,KAAK,QAASgC,QAAW,IAAJ,EAAA0C,KAAa,QAAK,+BAAE,EAAAA,KAAI,K,kBAClD,eAAkE,GAA7D1E,KAAK,gBAAiBgC,QAAW,IAAJ,EAAA0C,KAAa,QAAK,+BAAE,EAAAA,KAAI,K,kBAC1D,eAAiE,GAA5D1E,KAAK,eAAgBgC,QAAW,IAAJ,EAAA0C,KAAa,QAAK,+BAAE,EAAAA,KAAI,K,gDAG7D,iBAQM,CARS,IAAJ,EAAAA,M,iBAAX,eAQM,MARN,EAQM,E,mBAPJ,eAMS,2BANgB,EAAAf,QAAM,SAAfJ,EAAG3B,G,wBAAnB,eAMS,UANyBC,IAAKD,EAAG7B,MAAM,MAAO,QAAK,mBAAE,EAAAkE,OAAOrC,K,CAE1D,EAAA8B,WAAWiB,SAAS/C,I,iBAA7B,eAEI,IAFJ,EAA6D,mB,sBAG7D,eAAqB,GAAZ0B,MAAOC,GAAC,mB,+FCRV,iBAAgB,CAC7BtB,KAAM,mBACNC,WAAY,CAAEE,aAAA,KAAYwC,OAAA,QAC1BzE,MAAO,CACLoC,WAAY,CACVlC,KAAM,CAACmC,MAAOlC,QACdC,aAASkC,GAEXkB,OAAQ,CAAEtD,KAAMmC,MAA4BjC,QAAS,iBAAM,MAE7DC,MAAO,CAAC,qBACRC,MAX6B,SAWvBN,EAXuB,GAWR,IAANO,EAAM,EAANA,KACPgD,EAAa,eAAS,CAC1Bf,IAAK,kBAAMxC,EAAMoC,YACjBK,IAAK,SAACiC,GAAD,OAAOnE,EAAK,oBAAqBmE,MAElCH,EAAO,eAAS,CACpB/B,IAAK,kBAAOe,EAAWZ,MAA8B,SAArBY,EAAWZ,MAAmB,EAAI,EAAK,GACvEF,IAAK,SAACkC,GAAD,OAAQpB,EAAWZ,MAAQgC,EAAW,IAANA,EAAU,OAAS,QAAMrC,KAGhE,SAASwB,EAAOc,GACd,GAAKvC,MAAMwC,QAAQtB,EAAWZ,OAA9B,CACA,IAAMqB,EAAQT,EAAWZ,MAAMmC,QAAQF,GACnCZ,EAAQ,EAAGT,EAAWZ,MAAMoC,KAAKH,GAChCrB,EAAWZ,MAAMqC,OAAOhB,EAAO,IAEtC,MAAO,CAAET,aAAYgB,OAAMT,aC/B/B,EAAOrD,OAAS,EAED,Q,GCANb,MAAM,O,4IAJb,eAoBa,GApBDC,KAAK,oBAAoBc,OAAO,S,CAC/BA,OAAM,gBACf,iBAA0C,CAA1C,eAA0C,G,WAAnB,EAAA0C,M,qDAAA,EAAAA,MAAK,IAAGtC,IAAK,I,mDAEtC,iBAeM,CAfN,eAeM,MAfN,EAeM,E,mBAdJ,eAaM,2BAbgB,EAAAsC,OAAK,SAAdqB,EAAGjD,G,wBAAhB,eAaM,OAbwBC,IAAKD,EAAG7B,MAAM,O,CAC1C,eAAyC,GAApCC,KAAK,UAAW,QAAK,mBAAE,EAAAiE,OAAOrC,K,oBACnC,eASM,OATD7B,MAAK,CAAC,MAAc,EAAAqF,OAAOxD,K,gBAC9B,eAA2D,S,yCAA3CiD,EAAEQ,MAAK,GAAEhF,KAAK,OAAOiF,YAAY,S,yCAAjCT,EAAEQ,S,eAClB,eAKE,S,yCAJSR,EAAEU,IAAG,GACdxF,MAAM,WACNM,KAAK,OACLiF,YAAY,O,yCAHHT,EAAEU,O,eAKb,eAA2D,S,yCAA3CV,EAAEW,MAAK,GAAEnF,KAAK,OAAOiF,YAAY,S,yCAAjCT,EAAEW,U,GAEpB,eAAgD,GAA3CxF,KAAK,QAAS,QAAK,mBAAE,EAAAwD,MAAM2B,OAAOvD,EAAC,K,2CCXjC,qBAAgB,CAC7BK,KAAM,cACNC,WAAY,CAAEE,aAAA,KAAYD,eAAA,MAC1BhC,MAAO,CACLoC,WAAY,CAAElC,KAAMmC,MAA2BjC,aAASkC,IAE1DjC,MAAO,CAAC,qBACRC,MAP6B,SAOvBN,EAPuB,GAOR,IAANO,EAAM,EAANA,KACPgB,EAAU,eAAO,UAAW,IAC5B+D,EAAW,gBAAS,kBAAM/C,OAAO0B,KAAK1C,EAAQoB,UAE9CU,EAAQ,eAAS,CACrBb,IAAK,kBAAMxC,EAAMoC,YACjBK,IAAK,SAACiC,GAAD,OAAOnE,EAAK,oBAAqBmE,MAElCO,EAAS,gBAAS,kCACtB5B,EAAMV,aADgB,aACtB,EACIyB,KAAI,gBAAGV,EAAH,EAAGA,OAAH,OAAgB4B,EAAS3C,MAAMmC,QAAf,OAAuBpB,QAAvB,IAAuBA,IAAU,OACtDU,KAAI,SAAC3C,GAAD,MAAO,WAAaA,QAG7B,SAASqC,EAAOrC,GAAS,MACjB3B,EAAOuD,EAAMV,MAAMlB,GACnB8D,EAAID,EAAS3C,MAAMmC,QAAf,UAAuBhF,EAAK4D,cAA5B,QAAsC,IAChD5D,EAAK4D,OAAS4B,EAAS3C,MAAM4C,EAAI,GAGnC,MAAO,CAAElC,QAAO4B,SAAQnB,aC/B5B,EAAOrD,OAAS,EAED,Q,YCOA,iBAAgB,CAC7BqB,KAAM,cACNC,WAAY,CACVC,eAAA,KACAC,aAAA,KACAuD,mBACAC,mBACAhB,OAAA,OACAiB,eAEF1F,MAAO,CACLoC,WAAY,CAAElC,KAAMmC,MAA4BjC,aAASkC,IAE3DjC,MAAO,CAAC,qBACRC,MAd6B,SAcvBN,EAduB,GAcR,IAANO,EAAM,EAANA,KACPO,EAAQ,eAAS,CACrB0B,IAAK,kBAAMxC,EAAMoC,YACjBK,IAAK,SAACjB,GAAD,OAAOjB,EAAK,oBAAqBiB,MAElC2B,EAAQ,oBAAIb,GACZY,EAAU,gBAAI,GAEpB,MAAO,CAAElC,SAAA,OAAUkC,UAASC,QAAOrC,YC/BvC,EAAOL,OAASA,EAED,U,kCCLf,wJAQakF,EAAkB,CAC7BC,YAAa,GACbC,QAAS,GACTC,SAAU,IAGCC,EAAO,iBAEd,SAAUC,IACdD,EAAKpD,MAAQsD,KAAKC,MAAMD,KAAKE,UAAUR,EAAOC,cAG1C,SAAUQ,IACdC,aAAaV,EAAOE,SAAWI,KAAKE,UAAUJ,EAAKpD,OAG/C,SAAU2D,EAAeC,GAC7BhE,OAAOiE,OAAOb,EAAQY,GACtB,IACER,EAAKpD,MAAQsD,KAAKC,MAAMG,aAAaV,EAAOE,UAC5C,SACAG,IAIF,OAFA,eAAMD,EAAMK,EAAU,CAAE9B,MAAM,IAEvByB,I,kCChCT,IAAIU,EAAI,EAAQ,QACZC,EAAkB,EAAQ,QAC1BC,EAAY,EAAQ,QACpBC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAqB,EAAQ,QAC7BC,EAAiB,EAAQ,QACzBC,EAA+B,EAAQ,QACvCC,EAA0B,EAAQ,QAElCC,EAAsBF,EAA6B,UACnDG,EAAiBF,EAAwB,SAAU,CAAEG,WAAW,EAAMC,EAAG,EAAGC,EAAG,IAE/EC,EAAM5F,KAAK4F,IACXC,EAAM7F,KAAK6F,IACXC,EAAmB,iBACnBC,EAAkC,kCAKtCjB,EAAE,CAAEkB,OAAQ,QAASC,OAAO,EAAMC,QAASX,IAAwBC,GAAkB,CACnFnC,OAAQ,SAAgB8C,EAAOC,GAC7B,IAIIC,EAAaC,EAAmBC,EAAGC,EAAGC,EAAMC,EAJ5CC,EAAIzB,EAAS0B,MACbC,EAAM5B,EAAS0B,EAAEpE,QACjBuE,EAAc/B,EAAgBoB,EAAOU,GACrCE,EAAkBC,UAAUzE,OAWhC,GATwB,IAApBwE,EACFV,EAAcC,EAAoB,EACL,IAApBS,GACTV,EAAc,EACdC,EAAoBO,EAAMC,IAE1BT,EAAcU,EAAkB,EAChCT,EAAoBT,EAAID,EAAIZ,EAAUoB,GAAc,GAAIS,EAAMC,IAE5DD,EAAMR,EAAcC,EAAoBR,EAC1C,MAAMmB,UAAUlB,GAGlB,IADAQ,EAAIpB,EAAmBwB,EAAGL,GACrBE,EAAI,EAAGA,EAAIF,EAAmBE,IACjCC,EAAOK,EAAcN,EACjBC,KAAQE,GAAGvB,EAAemB,EAAGC,EAAGG,EAAEF,IAGxC,GADAF,EAAEhE,OAAS+D,EACPD,EAAcC,EAAmB,CACnC,IAAKE,EAAIM,EAAaN,EAAIK,EAAMP,EAAmBE,IACjDC,EAAOD,EAAIF,EACXI,EAAKF,EAAIH,EACLI,KAAQE,EAAGA,EAAED,GAAMC,EAAEF,UACbE,EAAED,GAEhB,IAAKF,EAAIK,EAAKL,EAAIK,EAAMP,EAAoBD,EAAaG,WAAYG,EAAEH,EAAI,QACtE,GAAIH,EAAcC,EACvB,IAAKE,EAAIK,EAAMP,EAAmBE,EAAIM,EAAaN,IACjDC,EAAOD,EAAIF,EAAoB,EAC/BI,EAAKF,EAAIH,EAAc,EACnBI,KAAQE,EAAGA,EAAED,GAAMC,EAAEF,UACbE,EAAED,GAGlB,IAAKF,EAAI,EAAGA,EAAIH,EAAaG,IAC3BG,EAAEH,EAAIM,GAAeE,UAAUR,EAAI,GAGrC,OADAG,EAAEpE,OAASsE,EAAMP,EAAoBD,EAC9BE,M,qDClEJtI,MAAM,O,SAIWA,MAAM,S,8GAJ5B,eAUM,MAVN,EAUM,MATe0C,IAAR,EAAAvB,K,iBAAX,eAA+D,G,MAAjClB,KAAK,MAAO,QAAO,EAAAgJ,OAAO9H,K,2CACxC,EAAA+H,OAAS,EAAAjI,M,iBAAzB,eAOW,gBANE,EAAAI,M,iBAAX,eAAqD,G,MAApCpB,KAAK,QAAS,QAAO,EAAAgJ,OAAO5H,M,2CAClC,EAAAC,O,iBAAX,eAGM,MAHN,EAGM,CAFJ,eAA0D,GAArDrB,KAAK,oBAAqB,QAAK,+BAAE,EAAAgJ,OAAO3H,OAAK,OAClD,eAA2D,GAAtDrB,KAAK,sBAAuB,QAAK,+BAAE,EAAAgJ,OAAO3H,MAAK,U,sBAEjC,EAAAC,Q,iBAArB,eAAwD,G,MAA1B,UAAS,EAAA0H,OAAO1H,Q,qKCTrC,SAAS4H,EAAQC,GAa9B,OATED,EADoB,oBAAXE,QAAoD,kBAApBA,OAAOC,SACtC,SAAiBF,GACzB,cAAcA,GAGN,SAAiBA,GACzB,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAItHD,EAAQC,G,sCCTF,iBAAgB,CAC7BlH,KAAM,eACNC,WAAY,CAAEsH,gBAAA,MACdrJ,MAAO,CACLoC,WAAY,CAAElC,KAAMmC,MAAOjC,QAAS,cACpCS,KAAM,CAAEX,KAAMqC,OAAQnC,aAASkC,GAC/BvB,IAAK,CACHb,KAAM,CAACoJ,OAAQnJ,OAAQoC,OAAQgH,UAC/BnJ,aAASkC,GAEXrB,KAAMuI,QACNtI,MAAOsI,QACPrI,OAAQqI,SAEVnJ,MAAO,CAAC,oBAAqB,eAC7BC,MAf6B,SAevBN,EAfuB,GAeR,IAANO,EAAM,EAANA,KACPuI,EAAQ,eAAS,CACrBtG,IAAK,kBAAMxC,EAAMoC,YACjBK,IAAK,SAAChB,GAAD,OAAOlB,EAAK,oBAAqBkB,MAGxC,SAASgI,IACPlJ,EACE,cACAuI,EAAMnG,MAAQmG,EAAMnG,MAAMmG,EAAMnG,MAAMuB,OAAS,QAAK5B,GATrC,SAYJvB,IAZI,6FAYnB,uGACMF,EAAgBb,EAAMe,SACZuB,KAATzB,EAFP,oDAGOiI,EAAMnG,MAHb,uBAIImG,EAAMnG,MAAQ,GAJlB,SAKU,iBALV,OAOE9B,EACkB,oBAATA,EACHA,IACgB,WAAhB,EAAOA,GACPoF,KAAKC,MAAMD,KAAKE,UAAUtF,IAC1BA,EACNiI,EAAMnG,MAAMoC,KAAKlE,GACjB4I,IAdF,4CAZmB,wBA4BnB,SAASxI,IACP,IAAMA,EAAOgF,KAAKC,MAAMD,KAAKE,UAAU,eAAMnG,EAAMa,QACnDiI,EAAMnG,MAAMoC,KAAK9D,GACjBwI,IAEF,SAASvI,EAAMA,GACb,IAAMgD,EAAS4E,EAAMnG,MAAMuB,OACrBrD,EAAOb,EAAMa,KACbuH,EAAOU,EAAMnG,MAAMmC,QAAQ,eAAMjE,IACjCwH,GAAMD,EAAOlH,EAAQgD,GAAUA,EACrC4E,EAAMnG,MAAMqC,OAAOoD,EAAM,GACzBU,EAAMnG,MAAMqC,OAAOqD,EAAI,EAAGxH,GAE5B,SAASM,IACP,IAAM6C,EAAQ8E,EAAMnG,MAAMmC,QAAQ,eAAM9E,EAAMa,OAC9CiI,EAAMnG,MAAMqC,OAAOhB,EAAO,GAC1ByF,IAEF,OAzCA,eAAMX,EAAOW,EAAM,CAAEpF,WAAW,IAyCzB,CAAEyE,QAAOD,OAAQ,CAAE9H,MAAKE,OAAMC,QAAOC,cC9DhD,EAAOV,OAASA,EAED,U,kCCLf,W,kCCAA,W","file":"js/chunk-222862e4.e589c61b.js","sourcesContent":["<template>\n  <btn\n    class=\"highlight-font-alert\"\n    :icon=\"icon\"\n    :text=\"text\"\n    @click=\"confirm\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  props: {\n    message: { type: String, default: \"Delete?\" },\n    icon: { type: String, default: \"delete\" },\n    text: { type: String, default: \"\" },\n  },\n  emits: [\"confirm\"],\n  setup(props, { emit }) {\n    function confirm() {\n      if (window.confirm(props.message)) emit(\"confirm\");\n    }\n    return { confirm };\n  },\n});\n</script>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  props: {\n    message: { type: String, default: \"Delete?\" },\n    icon: { type: String, default: \"delete\" },\n    text: { type: String, default: \"\" },\n  },\n  emits: [\"confirm\"],\n  setup(props, { emit }) {\n    function confirm() {\n      if (window.confirm(props.message)) emit(\"confirm\");\n    }\n    return { confirm };\n  },\n});\n","import { render } from \"./ConfirmButton.vue?vue&type=template&id=598fbbc7\"\nimport script from \"./ConfirmButton.vue?vue&type=script&lang=ts\"\nexport * from \"./ConfirmButton.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <EditorCard v-if=\"mphrase\" icon=\"widgets\" header=\"Blocks\">\n    <template #header>\n      <ArrayControl\n        v-model=\"blocks\"\n        v-model:item=\"block\"\n        :add=\"() => [newState()]\"\n        copy\n        shift\n        remove\n      />\n    </template>\n    <Context :translation=\"phrase.id ? null : phrase.context\" />\n    <div class=\"row-1 wrap block-editor\">\n      <div v-for=\"(b, i) in blocks\" :key=\"i + '--' + Math.random()\" class=\"row\">\n        <btn icon=\"edit\" :is-on=\"block === b\" @click=\"block = b\" />\n        <Block :block=\"b\" />\n      </div>\n    </div>\n  </EditorCard>\n</template>\n\n<script lang=\"ts\">\nimport ArrayControl from \"@/components/ArrayControl.vue\";\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport Context from \"../Context/index.vue\";\nimport Block from \"./index.vue\";\n\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { Phrase, CorpusPhrase, State } from \"../types\";\nimport { newState } from \"../utils\";\n\nexport default defineComponent({\n  name: \"OrderEditor\",\n  components: { ArrayControl, EditorCard, Context, Block },\n  props: {\n    modelValue: {\n      type: Array as PropType<State[] | undefined>,\n      default: undefined,\n    },\n    phrase: {\n      type: Object as PropType<Phrase | CorpusPhrase>,\n      default: undefined,\n    },\n  },\n  emits: [\"update:modelValue\", \"update:phrase\"],\n  setup(props, { emit }) {\n    const block = computed({\n      get: () => props.modelValue,\n      set: (b) => emit(\"update:modelValue\", b),\n    });\n    const mphrase = computed({\n      get: () => props.phrase,\n      set: (p) => emit(\"update:modelValue\", p),\n    });\n    const blocks = computed({\n      get: () => mphrase.value.blocks,\n      set: (bs) => (mphrase.value.blocks = bs),\n    });\n\n    return { mphrase, blocks, block, newState };\n  },\n});\n</script>\n","\nimport ArrayControl from \"@/components/ArrayControl.vue\";\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport Context from \"../Context/index.vue\";\nimport Block from \"./index.vue\";\n\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { Phrase, CorpusPhrase, State } from \"../types\";\nimport { newState } from \"../utils\";\n\nexport default defineComponent({\n  name: \"OrderEditor\",\n  components: { ArrayControl, EditorCard, Context, Block },\n  props: {\n    modelValue: {\n      type: Array as PropType<State[] | undefined>,\n      default: undefined,\n    },\n    phrase: {\n      type: Object as PropType<Phrase | CorpusPhrase>,\n      default: undefined,\n    },\n  },\n  emits: [\"update:modelValue\", \"update:phrase\"],\n  setup(props, { emit }) {\n    const block = computed({\n      get: () => props.modelValue,\n      set: (b) => emit(\"update:modelValue\", b),\n    });\n    const mphrase = computed({\n      get: () => props.phrase,\n      set: (p) => emit(\"update:modelValue\", p),\n    });\n    const blocks = computed({\n      get: () => mphrase.value.blocks,\n      set: (bs) => (mphrase.value.blocks = bs),\n    });\n\n    return { mphrase, blocks, block, newState };\n  },\n});\n","import { render } from \"./OrderEditor.vue?vue&type=template&id=9dbb575c\"\nimport script from \"./OrderEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./OrderEditor.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"col\">\n    <div class=\"row\">\n      <p class=\"icon\">{{ icon }}</p>\n      <h2 class=\"flex\">{{ header }}</h2>\n      <slot name=\"header\" />\n    </div>\n    <hr />\n    <p v-if=\"caption\" class=\"text-caption text-faded\">\n      <slot name=\"caption\" />\n    </p>\n    <div class=\"col\">\n      <slot />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"EditorCard\",\n  props: {\n    button: { type: String, default: \"add\" },\n    icon: { type: String, default: \"\" },\n    header: { type: String, default: \"\" },\n  },\n  emits: [\"action\"],\n  setup(_, { emit, slots }) {\n    return { emit, caption: slots.caption };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.text-caption:empty {\n  display: none;\n}\n</style>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"EditorCard\",\n  props: {\n    button: { type: String, default: \"add\" },\n    icon: { type: String, default: \"\" },\n    header: { type: String, default: \"\" },\n  },\n  emits: [\"action\"],\n  setup(_, { emit, slots }) {\n    return { emit, caption: slots.caption };\n  },\n});\n","import { render } from \"./EditorCard.vue?vue&type=template&id=03976a61&scoped=true\"\nimport script from \"./EditorCard.vue?vue&type=script&lang=ts\"\nexport * from \"./EditorCard.vue?vue&type=script&lang=ts\"\n\nimport \"./EditorCard.vue?vue&type=style&index=0&id=03976a61&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-03976a61\"\n\nexport default script","<template>\n  <div v-if=\"block\" class=\"block col-2\">\n    <EditorCard icon=\"account_tree\" header=\"States\">\n      <template #header>\n        <toggle v-model=\"glossed\" icon=\"layers\" />\n        <ArrayControl\n          v-model=\"block\"\n          v-model:item=\"state\"\n          :add=\"newState\"\n          copy\n          shift\n          remove\n        />\n      </template>\n      <div class=\"row-1 wrap block-editor\">\n        <button\n          v-for=\"(s, i) in block\"\n          :key=\"i\"\n          class=\"row fit-h\"\n          @click=\"state = s\"\n        >\n          <p v-if=\"state === s\" class=\"icon highlight-font\">edit</p>\n          <VState :state=\"s\" :glossed=\"glossed\" />\n        </button>\n      </div>\n    </EditorCard>\n    <template v-if=\"state\">\n      <TextsEditor v-model=\"state.texts\" />\n      <ConditionsEditor v-model=\"state.conditions\" />\n      <TransitionEditor v-model=\"state.transition\" :states=\"block\" />\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport ArrayControl from \"@/components/ArrayControl.vue\";\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport ConditionsEditor from \"../State/ConditionsEditor.vue\";\nimport TransitionEditor from \"../State/TransitionEditor.vue\";\nimport TextsEditor from \"../State/TextsEditor.vue\";\nimport VState from \"../State/index.vue\";\n\nimport { defineComponent, PropType, computed, ref } from \"vue\";\nimport { State } from \"../types\";\nimport { newState } from \"../utils\";\n\nexport default defineComponent({\n  name: \"BlockEditor\",\n  components: {\n    ArrayControl,\n    EditorCard,\n    ConditionsEditor,\n    TransitionEditor,\n    VState,\n    TextsEditor,\n  },\n  props: {\n    modelValue: { type: Array as PropType<State[]>, default: undefined },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const block = computed({\n      get: () => props.modelValue,\n      set: (b) => emit(\"update:modelValue\", b),\n    });\n    const state = ref(undefined as undefined | State);\n    const glossed = ref(false);\n\n    return { newState, glossed, state, block };\n  },\n});\n</script>\n","<template>\n  <EditorCard icon=\"tune\" header=\"conditions\">\n    <template v-if=\"conditions\" #header>\n      <btn icon=\"clear\" @click=\"conditions = {}\" />\n    </template>\n    <template #caption>TODO brief explanation</template>\n    <div class=\"row wrap\">\n      <button\n        v-for=\"({ entity, tag, color, icon, flag }, i) in tags\"\n        :key=\"entity + '--' + tag\"\n        @click=\"toggle(i)\"\n      >\n        <p v-if=\"flag !== undefined\" class=\"icon\" :class=\"'colored-' + color\">\n          {{ icon }}\n        </p>\n        <p :class=\"'colored-dot-' + color\">{{ tag }}</p>\n      </button>\n    </div>\n  </EditorCard>\n</template>\n\n<script lang=\"ts\">\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport {\n  computed,\n  defineComponent,\n  PropType,\n  inject,\n  ComputedRef,\n  ref,\n  watch,\n} from \"vue\";\nimport { ContextSource, Conditions } from \"../types\";\n\nexport default defineComponent({\n  name: \"ConditionsEditor\",\n  components: { EditorCard },\n  props: {\n    modelValue: { type: Object as PropType<Conditions>, default: undefined },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const context = inject(\n      \"contextSource\",\n      {} as ComputedRef<undefined | ContextSource[]>\n    );\n    const conditions = computed({\n      get: () => props.modelValue,\n      set: (c) => emit(\"update:modelValue\", c),\n    });\n    const tags = ref(\n      [] as {\n        tag: string;\n        entity: string;\n        icon: string;\n        color: number;\n        flag?: boolean;\n      }[]\n    );\n    watch(\n      [context, conditions],\n      ([context, conditions]) => {\n        if (!context || !conditions) return;\n        tags.value = context.flatMap(({ entity, tags }, i) =>\n          tags.map((tag) => {\n            const flag = conditions[entity]?.[tag];\n            const icon =\n              flag === undefined ? \"arrow_right\" : flag ? \"send\" : \"lock\";\n\n            return {\n              tag,\n              entity,\n              icon,\n              color: i,\n              flag: flag,\n            };\n          })\n        );\n      },\n      { immediate: true, deep: true }\n    );\n    function toggle(index: number) {\n      if (!tags.value) return;\n      const { flag, entity, tag } = tags.value[index];\n      if (flag === undefined) {\n        if (!conditions.value[entity]) conditions.value[entity] = {};\n        conditions.value[entity][tag] = true;\n      } else if (flag) conditions.value[entity][tag] = false;\n      else {\n        delete conditions.value[entity][tag];\n        if (!Object.keys(conditions.value[entity]).length)\n          delete conditions.value[entity];\n      }\n    }\n\n    return { context, conditions, tags, toggle };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.scroll {\n  max-height: 128px;\n}\n</style>\n","\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport {\n  computed,\n  defineComponent,\n  PropType,\n  inject,\n  ComputedRef,\n  ref,\n  watch,\n} from \"vue\";\nimport { ContextSource, Conditions } from \"../types\";\n\nexport default defineComponent({\n  name: \"ConditionsEditor\",\n  components: { EditorCard },\n  props: {\n    modelValue: { type: Object as PropType<Conditions>, default: undefined },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const context = inject(\n      \"contextSource\",\n      {} as ComputedRef<undefined | ContextSource[]>\n    );\n    const conditions = computed({\n      get: () => props.modelValue,\n      set: (c) => emit(\"update:modelValue\", c),\n    });\n    const tags = ref(\n      [] as {\n        tag: string;\n        entity: string;\n        icon: string;\n        color: number;\n        flag?: boolean;\n      }[]\n    );\n    watch(\n      [context, conditions],\n      ([context, conditions]) => {\n        if (!context || !conditions) return;\n        tags.value = context.flatMap(({ entity, tags }, i) =>\n          tags.map((tag) => {\n            const flag = conditions[entity]?.[tag];\n            const icon =\n              flag === undefined ? \"arrow_right\" : flag ? \"send\" : \"lock\";\n\n            return {\n              tag,\n              entity,\n              icon,\n              color: i,\n              flag: flag,\n            };\n          })\n        );\n      },\n      { immediate: true, deep: true }\n    );\n    function toggle(index: number) {\n      if (!tags.value) return;\n      const { flag, entity, tag } = tags.value[index];\n      if (flag === undefined) {\n        if (!conditions.value[entity]) conditions.value[entity] = {};\n        conditions.value[entity][tag] = true;\n      } else if (flag) conditions.value[entity][tag] = false;\n      else {\n        delete conditions.value[entity][tag];\n        if (!Object.keys(conditions.value[entity]).length)\n          delete conditions.value[entity];\n      }\n    }\n\n    return { context, conditions, tags, toggle };\n  },\n});\n","import { render } from \"./ConditionsEditor.vue?vue&type=template&id=6cb03aac&scoped=true\"\nimport script from \"./ConditionsEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./ConditionsEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./ConditionsEditor.vue?vue&type=style&index=0&id=6cb03aac&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6cb03aac\"\n\nexport default script","<template>\n  <EditorCard icon=\"alt_route\" header=\"transition\">\n    <template #header>\n      <div class=\"row\">\n        <btn icon=\"block\" :is-on=\"mode === 0\" @click=\"mode = 0\" />\n        <btn icon=\"arrow_forward\" :is-on=\"mode === 1\" @click=\"mode = 1\" />\n        <btn icon=\"star_outline\" :is-on=\"mode === 2\" @click=\"mode = 2\" />\n      </div>\n    </template>\n    <div v-if=\"mode === 2\" class=\"row wrap\">\n      <button v-for=\"(s, i) in states\" :key=\"i\" class=\"row\" @click=\"toggle(i)\">\n        <!-- <p v-if=\"transition.includes(i)\" class=\"icon\">arrow_right</p> -->\n        <p v-if=\"transition.includes(i)\" class=\"icon highlight-font\">\n          star_outline\n        </p>\n        <VState :state=\"s\" />\n      </button>\n    </div>\n  </EditorCard>\n</template>\n\n<script lang=\"ts\">\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport VState from \"./index.vue\";\n\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { Transition, State } from \"../types\";\n\nexport default defineComponent({\n  name: \"TransitionEditor\",\n  components: { EditorCard, VState },\n  props: {\n    modelValue: {\n      type: [Array, String],\n      default: undefined,\n    },\n    states: { type: Array as PropType<State[]>, default: () => [] },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const transition = computed({\n      get: () => props.modelValue as Transition,\n      set: (t) => emit(\"update:modelValue\", t),\n    });\n    const mode = computed({\n      get: () => (transition.value ? (transition.value === \"next\" ? 1 : 2) : 0),\n      set: (m) => (transition.value = m ? (m === 1 ? \"next\" : []) : undefined),\n    });\n\n    function toggle(stateIndex: number) {\n      if (!Array.isArray(transition.value)) return;\n      const index = transition.value.indexOf(stateIndex);\n      if (index < 0) transition.value.push(stateIndex);\n      else transition.value.splice(index, 1);\n    }\n    return { transition, mode, toggle };\n  },\n});\n</script>\n","\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport VState from \"./index.vue\";\n\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { Transition, State } from \"../types\";\n\nexport default defineComponent({\n  name: \"TransitionEditor\",\n  components: { EditorCard, VState },\n  props: {\n    modelValue: {\n      type: [Array, String],\n      default: undefined,\n    },\n    states: { type: Array as PropType<State[]>, default: () => [] },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const transition = computed({\n      get: () => props.modelValue as Transition,\n      set: (t) => emit(\"update:modelValue\", t),\n    });\n    const mode = computed({\n      get: () => (transition.value ? (transition.value === \"next\" ? 1 : 2) : 0),\n      set: (m) => (transition.value = m ? (m === 1 ? \"next\" : []) : undefined),\n    });\n\n    function toggle(stateIndex: number) {\n      if (!Array.isArray(transition.value)) return;\n      const index = transition.value.indexOf(stateIndex);\n      if (index < 0) transition.value.push(stateIndex);\n      else transition.value.splice(index, 1);\n    }\n    return { transition, mode, toggle };\n  },\n});\n","import { render } from \"./TransitionEditor.vue?vue&type=template&id=79f4ba1c\"\nimport script from \"./TransitionEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./TransitionEditor.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <EditorCard icon=\"format_color_text\" header=\"texts\">\n    <template #header>\n      <ArrayControl v-model=\"texts\" :add=\"{}\" />\n    </template>\n    <div class=\"col\">\n      <div v-for=\"(t, i) in texts\" :key=\"i\" class=\"row\">\n        <btn icon=\"palette\" @click=\"toggle(i)\" />\n        <div class=\"row\" :class=\"colors[i]\">\n          <input v-model=\"t.plain\" type=\"text\" placeholder=\"plain\" />\n          <input\n            v-model=\"t.ipa\"\n            class=\"text-ipa\"\n            type=\"text\"\n            placeholder=\"ipa\"\n          />\n          <input v-model=\"t.gloss\" type=\"text\" placeholder=\"gloss\" />\n        </div>\n        <btn icon=\"clear\" @click=\"texts.splice(i, 1)\" />\n      </div>\n    </div>\n  </EditorCard>\n</template>\n\n<script lang=\"ts\">\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport ArrayControl from \"@/components/ArrayControl.vue\";\n\nimport { computed, defineComponent, PropType, inject, Ref } from \"vue\";\nimport { Text, Context } from \"../types\";\n\nexport default defineComponent({\n  name: \"TextsEditor\",\n  components: { EditorCard, ArrayControl },\n  props: {\n    modelValue: { type: Array as PropType<Text[]>, default: undefined },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const context = inject(\"context\", {} as Ref<Context>);\n    const entities = computed(() => Object.keys(context.value));\n\n    const texts = computed({\n      get: () => props.modelValue,\n      set: (t) => emit(\"update:modelValue\", t),\n    });\n    const colors = computed(() =>\n      texts.value\n        ?.map(({ entity }) => entities.value.indexOf(entity ?? \"\"))\n        .map((i) => \"colored-\" + i)\n    );\n\n    function toggle(i: number) {\n      const text = texts.value[i];\n      const e = entities.value.indexOf(text.entity ?? \"\");\n      text.entity = entities.value[e + 1];\n    }\n\n    return { texts, colors, toggle };\n  },\n});\n</script>\n","\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport ArrayControl from \"@/components/ArrayControl.vue\";\n\nimport { computed, defineComponent, PropType, inject, Ref } from \"vue\";\nimport { Text, Context } from \"../types\";\n\nexport default defineComponent({\n  name: \"TextsEditor\",\n  components: { EditorCard, ArrayControl },\n  props: {\n    modelValue: { type: Array as PropType<Text[]>, default: undefined },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const context = inject(\"context\", {} as Ref<Context>);\n    const entities = computed(() => Object.keys(context.value));\n\n    const texts = computed({\n      get: () => props.modelValue,\n      set: (t) => emit(\"update:modelValue\", t),\n    });\n    const colors = computed(() =>\n      texts.value\n        ?.map(({ entity }) => entities.value.indexOf(entity ?? \"\"))\n        .map((i) => \"colored-\" + i)\n    );\n\n    function toggle(i: number) {\n      const text = texts.value[i];\n      const e = entities.value.indexOf(text.entity ?? \"\");\n      text.entity = entities.value[e + 1];\n    }\n\n    return { texts, colors, toggle };\n  },\n});\n","import { render } from \"./TextsEditor.vue?vue&type=template&id=7d89bb4c\"\nimport script from \"./TextsEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./TextsEditor.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport ArrayControl from \"@/components/ArrayControl.vue\";\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport ConditionsEditor from \"../State/ConditionsEditor.vue\";\nimport TransitionEditor from \"../State/TransitionEditor.vue\";\nimport TextsEditor from \"../State/TextsEditor.vue\";\nimport VState from \"../State/index.vue\";\n\nimport { defineComponent, PropType, computed, ref } from \"vue\";\nimport { State } from \"../types\";\nimport { newState } from \"../utils\";\n\nexport default defineComponent({\n  name: \"BlockEditor\",\n  components: {\n    ArrayControl,\n    EditorCard,\n    ConditionsEditor,\n    TransitionEditor,\n    VState,\n    TextsEditor,\n  },\n  props: {\n    modelValue: { type: Array as PropType<State[]>, default: undefined },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const block = computed({\n      get: () => props.modelValue,\n      set: (b) => emit(\"update:modelValue\", b),\n    });\n    const state = ref(undefined as undefined | State);\n    const glossed = ref(false);\n\n    return { newState, glossed, state, block };\n  },\n});\n","import { render } from \"./Editor.vue?vue&type=template&id=3e63fdc8\"\nimport script from \"./Editor.vue?vue&type=script&lang=ts\"\nexport * from \"./Editor.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { watch, ref, Ref } from \"vue\";\n\ntype Options = {\n  defaultFile: unknown;\n  storage: string;\n  filename: string | (() => string);\n};\n\nexport const config: Options = {\n  defaultFile: {},\n  storage: \"\",\n  filename: \"\",\n};\n\nexport const file = ref();\n\nexport function resetFile() {\n  file.value = JSON.parse(JSON.stringify(config.defaultFile));\n}\n\nexport function saveFile() {\n  localStorage[config.storage] = JSON.stringify(file.value);\n}\n\nexport function setupEditor<T>(options: Partial<Options>) {\n  Object.assign(config, options);\n  try {\n    file.value = JSON.parse(localStorage[config.storage]);\n  } catch {\n    resetFile();\n  }\n  watch(file, saveFile, { deep: true });\n\n  return file as Ref<T>;\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","<template>\n  <div class=\"row\">\n    <btn v-if=\"add !== undefined\" icon=\"add\" @click=\"action.add\" />\n    <template v-if=\"array && item\">\n      <btn v-if=\"copy\" icon=\"queue\" @click=\"action.copy\" />\n      <div v-if=\"shift\" class=\"row-0\">\n        <btn icon=\"keyboard_arrow_up\" @click=\"action.shift(-1)\" />\n        <btn icon=\"keyboard_arrow_down\" @click=\"action.shift(1)\" />\n      </div>\n      <ConfirmButton v-if=\"remove\" @confirm=\"action.remove\" />\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport ConfirmButton from \"@/components/ConfirmButton.vue\";\nimport { defineComponent, toRaw, computed, watch, nextTick } from \"vue\";\n\nexport default defineComponent({\n  name: \"ArrayControl\",\n  components: { ConfirmButton },\n  props: {\n    modelValue: { type: Array, default: () => undefined },\n    item: { type: Object, default: undefined },\n    add: {\n      type: [Number, String, Object, Function],\n      default: undefined,\n    },\n    copy: Boolean,\n    shift: Boolean,\n    remove: Boolean,\n  },\n  emits: [\"update:modelValue\", \"update:item\"],\n  setup(props, { emit }) {\n    const array = computed({\n      get: () => props.modelValue,\n      set: (i) => emit(\"update:modelValue\", i),\n    });\n    watch(array, last, { immediate: true });\n    function last() {\n      emit(\n        \"update:item\",\n        array.value ? array.value[array.value.length - 1] : undefined\n      );\n    }\n    async function add() {\n      let item: unknown = props.add;\n      if (!item === undefined) return;\n      if (!array.value) {\n        array.value = [];\n        await nextTick();\n      }\n      item =\n        typeof item === \"function\"\n          ? item()\n          : typeof item === \"object\"\n          ? JSON.parse(JSON.stringify(item))\n          : item;\n      array.value.push(item);\n      last();\n    }\n    function copy() {\n      const copy = JSON.parse(JSON.stringify(toRaw(props.item)));\n      array.value.push(copy);\n      last();\n    }\n    function shift(shift: number) {\n      const length = array.value.length;\n      const item = props.item;\n      const from = array.value.indexOf(toRaw(item));\n      const to = (from + shift + length) % length;\n      array.value.splice(from, 1);\n      array.value.splice(to, 0, item);\n    }\n    function remove() {\n      const index = array.value.indexOf(toRaw(props.item));\n      array.value.splice(index, 1);\n      last();\n    }\n    return { array, action: { add, copy, shift, remove } };\n  },\n});\n</script>\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","\nimport ConfirmButton from \"@/components/ConfirmButton.vue\";\nimport { defineComponent, toRaw, computed, watch, nextTick } from \"vue\";\n\nexport default defineComponent({\n  name: \"ArrayControl\",\n  components: { ConfirmButton },\n  props: {\n    modelValue: { type: Array, default: () => undefined },\n    item: { type: Object, default: undefined },\n    add: {\n      type: [Number, String, Object, Function],\n      default: undefined,\n    },\n    copy: Boolean,\n    shift: Boolean,\n    remove: Boolean,\n  },\n  emits: [\"update:modelValue\", \"update:item\"],\n  setup(props, { emit }) {\n    const array = computed({\n      get: () => props.modelValue,\n      set: (i) => emit(\"update:modelValue\", i),\n    });\n    watch(array, last, { immediate: true });\n    function last() {\n      emit(\n        \"update:item\",\n        array.value ? array.value[array.value.length - 1] : undefined\n      );\n    }\n    async function add() {\n      let item: unknown = props.add;\n      if (!item === undefined) return;\n      if (!array.value) {\n        array.value = [];\n        await nextTick();\n      }\n      item =\n        typeof item === \"function\"\n          ? item()\n          : typeof item === \"object\"\n          ? JSON.parse(JSON.stringify(item))\n          : item;\n      array.value.push(item);\n      last();\n    }\n    function copy() {\n      const copy = JSON.parse(JSON.stringify(toRaw(props.item)));\n      array.value.push(copy);\n      last();\n    }\n    function shift(shift: number) {\n      const length = array.value.length;\n      const item = props.item;\n      const from = array.value.indexOf(toRaw(item));\n      const to = (from + shift + length) % length;\n      array.value.splice(from, 1);\n      array.value.splice(to, 0, item);\n    }\n    function remove() {\n      const index = array.value.indexOf(toRaw(props.item));\n      array.value.splice(index, 1);\n      last();\n    }\n    return { array, action: { add, copy, shift, remove } };\n  },\n});\n","import { render } from \"./ArrayControl.vue?vue&type=template&id=b0c70f92\"\nimport script from \"./ArrayControl.vue?vue&type=script&lang=ts\"\nexport * from \"./ArrayControl.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EditorCard.vue?vue&type=style&index=0&id=03976a61&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ConditionsEditor.vue?vue&type=style&index=0&id=6cb03aac&lang=scss&scoped=true\""],"sourceRoot":""}