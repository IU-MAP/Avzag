{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.flat.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/core-js/modules/es.array.unscopables.flat.js","webpack:///./node_modules/core-js/modules/es.array.some.js","webpack:///./src/Phrasebook/Context/index.vue","webpack:///./src/Phrasebook/Context/index.vue?ec8a","webpack:///./src/Phrasebook/Context/index.vue?3f4e","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/Phrasebook/Block/Display.vue?f2a0","webpack:///./src/Phrasebook/Block/index.vue","webpack:///./src/Phrasebook/Block/condition.ts","webpack:///./src/Phrasebook/Block/index.vue?471d","webpack:///./src/Phrasebook/Block/index.vue?892b","webpack:///./src/Phrasebook/utils.ts","webpack:///./src/Phrasebook/Block/index.vue?631b","webpack:///./src/Phrasebook/Block/Display.vue","webpack:///./src/Phrasebook/Block/Display.vue?c5a3","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/internals/flatten-into-array.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./src/Phrasebook/Context/index.vue?2fa7"],"names":["$","flattenIntoArray","toObject","toLength","toInteger","arraySpeciesCreate","target","proto","flat","depthArg","arguments","length","undefined","O","this","sourceLen","A","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","addToUnscopables","$some","some","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","forced","callbackfn","class","tags","ts","i","t","key","props","translation","type","default","blocks","setup","context","dictionary","entities","forEach","entity","reduce","d","explicitContext","filter","b","visible","map","requirements","conditions","all","concat","c","tag","Set","add","translate","k","entries","value","e","has","any","render","__scopeId","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","trim","state","disabled","glossed","move","ref","checkConditions","f","findBestState","indexes","states","fit","len","candidates","s","l","applyConditions","positive","passive","set","delete","components","Display","block","Boolean","emits","transition","display","switchState","nextState","indexOf","split","Number","nextVisible","immediate","deep","createContext","source","full","canGloss","implicit","types","segments","j","segmentColors","dashColors","name","inject","computed","keys","ipa","glossing","text","texts","join","fails","isObject","createProperty","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","array","SPECIES_SUPPORT","isConcatSpreadable","spreadable","FORCED","arg","E","n","IndexedObject","toIndexedObject","nativeJoin","ES3_STRINGS","separator","call","bind","original","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","DESCRIPTORS","global","isForced","redefine","classof","inheritIfRequired","toPrimitive","create","getOwnPropertyNames","getOwnPropertyDescriptor","defineProperty","NUMBER","NativeNumber","NumberPrototype","prototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","index","code","it","charCodeAt","NaN","slice","parseInt","NumberWrapper","dummy","valueOf","constructor","nativeKeys","FAILS_ON_PRIMITIVES","stat","$indexOf","nativeIndexOf","NEGATIVE_ZERO","ACCESSORS","1","searchElement","apply"],"mappings":"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","file":"js/chunk-c2be5ef4.a10e333f.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flat');\n","'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('some');\n\n// `Array.prototype.some` method\n// https://tc39.es/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\n  <div class=\"row text-caption wrap\">\n    <div class=\"icon\">info</div>\n    <template v-for=\"(ts, i) of tags\" :key=\"i\">\n      <template v-if=\"ts.length\" class=\"row-0 wrap\">\n        <p v-for=\"t in ts\" :key=\"t + '--' + i\" :class=\"'colored-dot-' + i\">\n          {{ t }}\n        </p>\n      </template>\n    </template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, Ref, PropType } from \"vue\";\nimport { Context, ContextTranslation, Condition, BlockVue } from \"../types\";\n\nexport default defineComponent({\n  props: {\n    translation: {\n      type: Object as PropType<ContextTranslation[]>,\n      default: () => [],\n    },\n    blocks: { type: Array as PropType<BlockVue[]>, default: () => [] },\n  },\n  setup(props) {\n    const context = inject(\"context\", {} as Ref<Context>);\n\n    const dictionary = computed(() => {\n      const translation = {\n        entities: {} as Record<string, string>,\n        tags: {} as Record<string, Record<string, string>>,\n      };\n      if (props.translation)\n        props.translation.forEach(({ entity, tags }) => {\n          translation.entities[entity[0]] = entity[1];\n          translation.tags[entity[0]] = (tags ?? []).reduce((d, t) => {\n            d[t[0]] = t[1];\n            return d;\n          }, {} as Record<string, string>);\n        });\n      return translation;\n    });\n\n    const explicitContext = computed(\n      () =>\n        props.blocks\n          ?.filter((b) => b?.visible)\n          .map(({ requirements, conditions }) => {\n            let all = [] as Condition[];\n            if (requirements) all = all.concat(requirements);\n            if (conditions) all = all.concat(conditions);\n            return all;\n          })\n          .flat()\n          .reduce((c, { entity, tag }) => {\n            if (!c[entity]) c[entity] = new Set();\n            if (tag) c[entity].add(tag);\n            return c;\n          }, {} as Context) ?? {}\n    );\n\n    function translate(d: undefined | Record<string, string>, k: string) {\n      if (d) {\n        const t = d[k];\n        if (t) return t;\n      }\n      return k;\n    }\n    const tags = computed(() =>\n      Object.entries(context.value).map(([e, ts]) =>\n        [...(ts ?? [])]\n          .filter((t) => !explicitContext.value[e]?.has(t))\n          .map((t) => translate(dictionary.value.tags[e], t))\n      )\n    );\n    const any = computed(() => tags.value.some((t) => t?.length));\n\n    return { tags, any, explicitContext };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.icon {\n  font-size: map-get($font-sizes, \"small\");\n}\np:not(:last-child)::after {\n  content: \",\";\n}\n</style>\n","\nimport { computed, defineComponent, inject, Ref, PropType } from \"vue\";\nimport { Context, ContextTranslation, Condition, BlockVue } from \"../types\";\n\nexport default defineComponent({\n  props: {\n    translation: {\n      type: Object as PropType<ContextTranslation[]>,\n      default: () => [],\n    },\n    blocks: { type: Array as PropType<BlockVue[]>, default: () => [] },\n  },\n  setup(props) {\n    const context = inject(\"context\", {} as Ref<Context>);\n\n    const dictionary = computed(() => {\n      const translation = {\n        entities: {} as Record<string, string>,\n        tags: {} as Record<string, Record<string, string>>,\n      };\n      if (props.translation)\n        props.translation.forEach(({ entity, tags }) => {\n          translation.entities[entity[0]] = entity[1];\n          translation.tags[entity[0]] = (tags ?? []).reduce((d, t) => {\n            d[t[0]] = t[1];\n            return d;\n          }, {} as Record<string, string>);\n        });\n      return translation;\n    });\n\n    const explicitContext = computed(\n      () =>\n        props.blocks\n          ?.filter((b) => b?.visible)\n          .map(({ requirements, conditions }) => {\n            let all = [] as Condition[];\n            if (requirements) all = all.concat(requirements);\n            if (conditions) all = all.concat(conditions);\n            return all;\n          })\n          .flat()\n          .reduce((c, { entity, tag }) => {\n            if (!c[entity]) c[entity] = new Set();\n            if (tag) c[entity].add(tag);\n            return c;\n          }, {} as Context) ?? {}\n    );\n\n    function translate(d: undefined | Record<string, string>, k: string) {\n      if (d) {\n        const t = d[k];\n        if (t) return t;\n      }\n      return k;\n    }\n    const tags = computed(() =>\n      Object.entries(context.value).map(([e, ts]) =>\n        [...(ts ?? [])]\n          .filter((t) => !explicitContext.value[e]?.has(t))\n          .map((t) => translate(dictionary.value.tags[e], t))\n      )\n    );\n    const any = computed(() => tags.value.some((t) => t?.length));\n\n    return { tags, any, explicitContext };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=8b7be0d4&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=8b7be0d4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-8b7be0d4\"\n\nexport default script","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Display.vue?vue&type=style&index=0&id=0de8fc5c&lang=scss&scoped=true\"","<template>\n  <button\n    v-show=\"visible\"\n    v-if=\"state\"\n    class=\"small\"\n    :class=\"{ disabled, glossed }\"\n    @click=\"move\"\n  >\n    <Display ref=\"display\" :glossed=\"glossed\" :state=\"state\" />\n  </button>\n</template>\n\n<script lang=\"ts\">\nimport Display from \"./Display.vue\";\nimport {\n  computed,\n  defineComponent,\n  inject,\n  PropType,\n  ref,\n  Ref,\n  toRaw,\n  watch,\n} from \"vue\";\nimport { Context, Block, State } from \"../types\";\nimport { applyConditions, findBestState, checkConditions } from \"./condition\";\n\nexport default defineComponent({\n  components: { Display },\n  props: {\n    block: { type: Object as PropType<Block>, default: () => ({}) },\n    glossed: Boolean,\n  },\n  emits: [\"update:modelValue\"],\n  setup(props) {\n    const state = ref<State>();\n    const requirements = computed(() => props.block.requirements);\n    const conditions = computed(() => state.value?.conditions);\n    const transition = computed(() => state.value?.transition);\n    const disabled = computed(() => !transition.value);\n    const visible = ref(false);\n    const display = ref();\n\n    const context = inject(\"context\", {} as Ref<Context>);\n\n    function switchState(nextState: undefined | State) {\n      applyConditions(state.value?.conditions, context, false);\n      applyConditions(nextState?.conditions, context, true);\n      state.value = nextState;\n    }\n    watch(\n      context,\n      (context) => {\n        const nextVisible =\n          context && checkConditions(requirements.value, context)[0] === 1;\n\n        if (nextVisible) {\n          const nextState = findBestState(\n            undefined,\n            props.block.states,\n            context\n          );\n          if (toRaw(nextState) !== toRaw(state.value)) switchState(nextState);\n        } else if (state.value) switchState(undefined);\n\n        visible.value = nextVisible;\n      },\n      { immediate: true, deep: true }\n    );\n\n    function move() {\n      if (disabled.value) return;\n      const states = props.block.states;\n      if (typeof transition.value === \"string\") {\n        let nextState;\n        if (transition.value === \"next\") {\n          const i = state.value ? states.indexOf(toRaw(state.value)) : -1;\n          nextState = states[(i + 1) % states.length];\n        } else if (transition.value) {\n          const i = transition.value.split(\" \").map((i) => Number(i));\n          nextState = findBestState(i, states, context.value);\n        }\n        switchState(nextState);\n      } else if (transition.value) {\n        // directly modify global environment\n      }\n    }\n\n    return {\n      move,\n      context,\n      state,\n      visible,\n      disabled,\n      display,\n      conditions,\n      requirements,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\nbutton {\n  height: fit-content;\n}\n.disabled {\n  padding: 0;\n  background-color: transparent;\n  &:hover,\n  &:active {\n    background-color: transparent;\n  }\n  cursor: default;\n}\n</style>\n","import { Ref } from \"vue\";\nimport { Condition, Context, State } from \"../types\";\n\nexport function checkConditions(\n  conditions: undefined | Condition[],\n  context: Context\n): [number, number] {\n  return conditions?.length\n    ? [\n        conditions.reduce((f, { entity, tag }) => {\n          return f + (tag ? (context[entity]?.has(tag) ? 1 : 0) : 1);\n        }, 0) / conditions.length,\n        conditions.length,\n      ]\n    : [1, 0];\n}\n\nexport function findBestState(\n  indexes: undefined | number[],\n  states: State[],\n  context: Context\n) {\n  let state = null;\n  let fit = 0;\n  let len = 0;\n\n  const candidates = indexes?.map((i) => states[i]) ?? states ?? [];\n  candidates.forEach((s) => {\n    if (!s.conditions) return;\n    const [f, l] = checkConditions(s.conditions, context);\n    if (fit === 1 ? f === 1 && l >= len : f >= fit) {\n      state = s;\n      fit = f;\n      len = l;\n    }\n  });\n\n  return state ?? candidates[0];\n}\n\nexport function applyConditions(\n  conditions: undefined | Condition[],\n  context: Ref<Context>,\n  positive: boolean\n) {\n  if (conditions)\n    conditions.forEach(({ entity, tag, passive }) => {\n      const set = context.value[entity];\n      if (passive || !tag || !set) return;\n      if (positive) set.add(tag);\n      else set.delete(tag);\n    });\n}\n","\nimport Display from \"./Display.vue\";\nimport {\n  computed,\n  defineComponent,\n  inject,\n  PropType,\n  ref,\n  Ref,\n  toRaw,\n  watch,\n} from \"vue\";\nimport { Context, Block, State } from \"../types\";\nimport { applyConditions, findBestState, checkConditions } from \"./condition\";\n\nexport default defineComponent({\n  components: { Display },\n  props: {\n    block: { type: Object as PropType<Block>, default: () => ({}) },\n    glossed: Boolean,\n  },\n  emits: [\"update:modelValue\"],\n  setup(props) {\n    const state = ref<State>();\n    const requirements = computed(() => props.block.requirements);\n    const conditions = computed(() => state.value?.conditions);\n    const transition = computed(() => state.value?.transition);\n    const disabled = computed(() => !transition.value);\n    const visible = ref(false);\n    const display = ref();\n\n    const context = inject(\"context\", {} as Ref<Context>);\n\n    function switchState(nextState: undefined | State) {\n      applyConditions(state.value?.conditions, context, false);\n      applyConditions(nextState?.conditions, context, true);\n      state.value = nextState;\n    }\n    watch(\n      context,\n      (context) => {\n        const nextVisible =\n          context && checkConditions(requirements.value, context)[0] === 1;\n\n        if (nextVisible) {\n          const nextState = findBestState(\n            undefined,\n            props.block.states,\n            context\n          );\n          if (toRaw(nextState) !== toRaw(state.value)) switchState(nextState);\n        } else if (state.value) switchState(undefined);\n\n        visible.value = nextVisible;\n      },\n      { immediate: true, deep: true }\n    );\n\n    function move() {\n      if (disabled.value) return;\n      const states = props.block.states;\n      if (typeof transition.value === \"string\") {\n        let nextState;\n        if (transition.value === \"next\") {\n          const i = state.value ? states.indexOf(toRaw(state.value)) : -1;\n          nextState = states[(i + 1) % states.length];\n        } else if (transition.value) {\n          const i = transition.value.split(\" \").map((i) => Number(i));\n          nextState = findBestState(i, states, context.value);\n        }\n        switchState(nextState);\n      } else if (transition.value) {\n        // directly modify global environment\n      }\n    }\n\n    return {\n      move,\n      context,\n      state,\n      visible,\n      disabled,\n      display,\n      conditions,\n      requirements,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=7d11a26e&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=7d11a26e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7d11a26e\"\n\nexport default script","import { Ref } from \"vue\";\nimport { Context, ContextSource } from \"./types\";\n\nexport function createContext(\n  context: Ref<Context>,\n  source: ContextSource[],\n  full = false\n) {\n  if (!source) return;\n  context.value = {};\n  source.forEach(({ entity, tags }) => {\n    context.value[entity] = new Set(full ? tags.split(\" \") : []);\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=7d11a26e&lang=scss&scoped=true\"","<template>\n  <div class=\"display row\" :class=\"{ glossed: canGloss }\">\n    <div class=\"segments\" :class=\"{ 'text-faded': state.implicit }\">\n      <p v-for=\"(t, i) in types\" :key=\"i\" :class=\"{ 'text-ipa': t === 'ipa' }\">\n        <span v-for=\"(s, j) in segments[i]\" :key=\"j\" :class=\"segmentColors[j]\">\n          {{ s }}\n        </span>\n      </p>\n    </div>\n    <div class=\"row dashes\">\n      <p v-for=\"(c, i) in dashColors\" :key=\"i\" :class=\"c\" />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"PhraseStateDisplay\",\n  inject: [\"context\"],\n  props: {\n    state: { type: Object, default: () => ({}) },\n    glossed: { type: Boolean, default: false },\n  },\n  computed: {\n    entities() {\n      return Object.keys(this.context.value);\n    },\n    canGloss() {\n      return (\n        this.glossed && this.state.display.some((s) => s.ipa || s.glossing)\n      );\n    },\n    types() {\n      return this.canGloss ? [\"ipa\", \"glossing\"] : [\"text\"];\n    },\n    segmentColors() {\n      return this.state.display.map(\n        (d) => \"colored-\" + this.entities.indexOf(d.entity)\n      );\n    },\n    dashColors() {\n      if (!this.state.transition || !this.state.conditions) return [];\n      const set = new Set(\n        this.state.conditions\n          .filter(({ passive }) => !passive)\n          .map((c) => c.entity)\n      );\n      return [...set]\n        .map((e) => this.entities.indexOf(e))\n        .map((i) => \"colored-back-\" + i);\n    },\n    segments() {\n      return this.types.map((t) => this.state.display.map((d) => d[t]));\n    },\n    text() {\n      const texts = this.segments.map((s) => s.join(\"\"));\n      return texts.length === 1 ? texts[0] : texts.join(\"\\n\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.display {\n  height: map-get($button-height, \"small\");\n  position: relative;\n  &.glossed {\n    height: map-get($button-height, \"normal\") + map-get($margins, \"normal\");\n  }\n}\n.segments {\n  display: flex;\n  flex-direction: column;\n  p {\n    display: flex;\n    place-content: center;\n  }\n}\n.dashes {\n  overflow: hidden;\n  border-radius: 0 0 $border-radius $border-radius;\n  height: $border-radius;\n  width: 100%;\n  left: 0;\n  justify-content: center;\n  position: absolute;\n  bottom: 0;\n  > * {\n    height: 100%;\n    width: 4 * $border-radius;\n  }\n}\n</style>\n","import { render } from \"./Display.vue?vue&type=template&id=0de8fc5c&scoped=true\"\nimport script from \"./Display.vue?vue&type=script&lang=js\"\nexport * from \"./Display.vue?vue&type=script&lang=js\"\n\nimport \"./Display.vue?vue&type=style&index=0&id=0de8fc5c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0de8fc5c\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=8b7be0d4&lang=scss&scoped=true\""],"sourceRoot":""}