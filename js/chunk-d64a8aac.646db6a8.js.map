{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/Phrasebook/State/index.vue?4761","webpack:///./src/Phrasebook/index.vue","webpack:///./src/Phrasebook/PhraseCard.vue","webpack:///./src/Phrasebook/PhraseCard.vue?0f23","webpack:///./src/Phrasebook/PhraseCard.vue?dc76","webpack:///./src/Phrasebook/main.ts","webpack:///./src/Phrasebook/index.vue?dcc3","webpack:///./src/Phrasebook/index.vue?b05c","webpack:///./node_modules/core-js/modules/es.array.some.js","webpack:///./src/Phrasebook/Context/index.vue?1f76","webpack:///./src/Phrasebook/Context/index.vue","webpack:///./src/Phrasebook/Context/index.vue?ec8a","webpack:///./src/Phrasebook/Context/index.vue?3f4e","webpack:///./src/Phrasebook/Block/index.vue","webpack:///./src/Phrasebook/Block/index.vue?471d","webpack:///./src/Phrasebook/Block/index.vue?892b","webpack:///./src/Phrasebook/utils.ts","webpack:///./src/Phrasebook/Block/index.vue?ba49","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/Phrasebook/index.vue?ac6f","webpack:///./src/Phrasebook/State/index.vue","webpack:///./src/Phrasebook/State/index.vue?b225","webpack:///./src/Phrasebook/State/index.vue?b39a","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./src/Phrasebook/PhraseCard.vue?f3bc"],"names":["_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","class","corpus","searching","icon","query","type","placeholder","section","style","select","s","key","id","value","name","phrases","ps","p","text","is-on","phrase","phrasebooks","n","lect","playing","copy","glossed","translation","contextTranslation","blocks","b","i","playbacks","ref","el","push","block","notes","components","Context","Block","Notes","Flag","props","String","default","undefined","setup","context","length","filter","state","map","join","navigator","clipboard","writeText","lectRoot","urls","texts","plain","get","set","playback","current","forEach","_u","render","__scopeId","initialize","PhraseCard","immediate","reduce","result","index","includes","_section","_phrase","$","$some","some","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","any","translated","tags","tag","explicit","condition","conditions","entries","entity","Set","add","translate","d","k","has","disabled","move","$event","VState","Boolean","emits","transition","switchState","nextState","states","indexOf","deep","newState","createContext","source","checkConditions","score","count","flag","findBestState","indexes","candidates","candidate","c","applyConditions","additive","delete","fails","isObject","toObject","toLength","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","FORCED","arg","len","E","A","IndexedObject","toIndexedObject","nativeJoin","ES3_STRINGS","separator","call","canGloss","types","j","textColors","dashColors","emit","entities","keys","ipa","gloss","lines","t","e","values","$indexOf","nativeIndexOf","NEGATIVE_ZERO","ACCESSORS","1","searchElement","apply"],"mappings":"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","file":"js/chunk-d64a8aac.646db6a8.js","sourcesContent":["import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=661aca89&lang=scss&scoped=true\"","<template>\n  <div v-if=\"corpus\" class=\"section col-1\">\n    <div class=\"col-1\">\n      <div class=\"row-1\">\n        <toggle v-model=\"searching\" icon=\"search\" />\n        <input\n          v-if=\"searching\"\n          v-model=\"query\"\n          class=\"flex\"\n          type=\"text\"\n          placeholder=\"Search all phrases...\"\n        />\n        <h2 v-else class=\"col-1 flex\">\n          <select\n            v-model=\"section\"\n            style=\"flex: none\"\n            @change=\"select(section)\"\n          >\n            <option v-for=\"s in corpus\" :key=\"s.id\" :value=\"s\">\n              {{ s.name }}\n            </option>\n          </select>\n        </h2>\n      </div>\n      <div class=\"scroll\">\n        <div v-if=\"searching\" class=\"col\">\n          <div v-for=\"(ps, s) of phrases\" :key=\"s\" class=\"col\">\n            <h2>{{ corpus[s].name }}</h2>\n            <div class=\"col-0\">\n              <btn\n                v-for=\"p in ps\"\n                :key=\"p\"\n                :text=\"corpus[s].phrases[p].name\"\n                :is-on=\"phrase === corpus[s].phrases[p]\"\n                @click=\"select(corpus[s], corpus[s].phrases[p])\"\n              />\n            </div>\n          </div>\n        </div>\n        <div v-else class=\"col-0\">\n          <btn\n            v-for=\"p in phrases\"\n            :key=\"p.id\"\n            :text=\"p.name\"\n            :is-on=\"phrase === p\"\n            @click=\"select(null, p)\"\n          />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"phrase\" :key=\"phrase.id\" class=\"col-1\">\n      <PhraseCard :phrase=\"phrase\" />\n      <PhraseCard\n        v-for=\"(p, n) of phrasebooks\"\n        :key=\"n\"\n        :lect=\"n\"\n        :phrase=\"p[phrase.id]\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport PhraseCard from \"./PhraseCard.vue\";\n\nimport { computed, ref, watch, defineComponent, provide } from \"vue\";\n\nimport { corpus, section, phrase, phrasebooks, initialize } from \"./main\";\nimport { Context, CorpusPhrase, CorpusSection } from \"./types\";\nimport { createContext } from \"./utils\";\n\nexport default defineComponent({\n  components: { PhraseCard },\n  setup() {\n    initialize();\n\n    const context = ref({} as Context);\n    watch(phrase, (phrase) => createContext(context, phrase?.context), {\n      immediate: true,\n    });\n\n    provide(\"context\", context);\n\n    const searching = ref(false);\n    const query = ref(\"\");\n\n    const phrases = computed(() =>\n      searching.value\n        ? corpus.value.reduce((result, section, index) => {\n            result[index] = section.phrases\n              .map((phrase, index) => [phrase, index] as [CorpusPhrase, number])\n              .filter(([phrase]) => phrase.name.includes(query.value))\n              .map(([, index]) => index);\n            if (!result[index].length) delete result[index];\n            return result;\n          }, {} as Record<number, number[]>)\n        : section.value?.phrases\n    );\n    function select(_section?: CorpusSection, _phrase?: CorpusPhrase) {\n      if (_section) section.value = _section;\n      phrase.value = _phrase ?? section.value?.phrases[0];\n    }\n\n    return {\n      searching,\n      query,\n      corpus,\n      section,\n      phrase,\n      select,\n      phrases,\n      phrasebooks,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.section {\n  display: grid;\n  grid-template-columns: 288px minmax(0, 1fr);\n  gap: map-get($margins, \"double\");\n  > :first-child {\n    max-height: 640px;\n  }\n}\n@media only screen and (max-width: $mobile-width) {\n  .section {\n    > :first-child {\n      max-height: 320px;\n    }\n    grid-template-columns: 100%;\n  }\n}\n</style>\n","<template>\n  <div v-if=\"phrase\" class=\"col card flag\">\n    <div v-if=\"lect\" class=\"row small wrap\" style=\"width: 100%\">\n      <h2 class=\"flex\">{{ lect }}</h2>\n      <div class=\"row\">\n        <toggle v-model=\"playing\" icon=\"play_arrow\" />\n        <btn icon=\"content_copy\" @click=\"copy\" />\n        <toggle v-model=\"glossed\" icon=\"layers\" />\n      </div>\n    </div>\n    <Context :translation=\"contextTranslation\" :blocks=\"blocks\" />\n    <div class=\"row wrap flex\">\n      <div v-for=\"(b, i) in phrase.blocks\" :key=\"i\" class=\"blocks row\">\n        <p class=\"playback\" :style=\"{ width: playbacks[i] + '%' }\" />\n        <Block :ref=\"(el) => blocks.push(el)\" :block=\"b\" :glossed=\"glossed\" />\n      </div>\n    </div>\n    <Notes class=\"text-caption\" :notes=\"phrase.notes\" />\n    <Flag :lect=\"lect\" class=\"blur\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Context from \"./Context/index.vue\";\nimport Block from \"./Block/index.vue\";\nimport Notes from \"@/components/Notes/index.vue\";\nimport Flag from \"@/components/Flag.vue\";\n\nimport {\n  computed,\n  defineComponent,\n  onBeforeUpdate,\n  PropType,\n  reactive,\n  ref,\n  watch,\n} from \"vue\";\n\nimport { Phrase, VBlock } from \"./types\";\nimport { root } from \"@/store\";\nimport * as player from \"@/audio-player\";\n\nexport default defineComponent({\n  components: { Context, Block, Notes, Flag },\n  props: {\n    lect: { type: String, default: \"\" },\n    phrase: { type: Object as PropType<Phrase>, default: undefined },\n  },\n  setup(props) {\n    const glossed = ref(false);\n    const contextTranslation = computed(() =>\n      props.lect ? props.phrase.context : undefined\n    );\n\n    onBeforeUpdate(() => (blocks.length = 0));\n    const blocks = reactive<VBlock[]>([]);\n    const text = computed(() =>\n      blocks\n        .filter(({ state }) => state)\n        .map(({ text }) => text)\n        .join(\" \")\n    );\n    function copy() {\n      navigator.clipboard.writeText(text.value);\n    }\n\n    const lectRoot = computed(() => root + props.lect + \"/phrasebook/\");\n    const urls = computed(() =>\n      blocks\n        .map(({ state }) => state?.texts.map(({ plain }) => plain))\n        .map((p) => lectRoot.value + p?.join(\"\") + \".mp3\")\n    );\n\n    const playing = computed({\n      get: () => player.playing.value && player.id.value === props.lect,\n      set: (p) => {\n        if (p) player.play(props.lect, ...urls.value);\n        else player.stop();\n      },\n    });\n\n    const playbacks = ref([] as number[]);\n    watch(\n      [player.playback, player.current, playing],\n      ([playback, current, playing]) => {\n        urls.value.forEach(\n          (_u, i) =>\n            (playbacks.value[i] = playing && i === current ? playback * 100 : 0)\n        );\n      }\n    );\n\n    return {\n      glossed,\n      blocks,\n      copy,\n      contextTranslation,\n      urls,\n      playing,\n      playbacks,\n      playback: player.playback,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.card {\n  align-items: flex-start;\n}\n.blocks {\n  position: relative;\n}\n.playback {\n  padding: 0;\n  background-color: var(--color-text);\n  border-radius: $border-radius $border-radius 0 0;\n  height: $border-radius;\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n</style>\n","\nimport Context from \"./Context/index.vue\";\nimport Block from \"./Block/index.vue\";\nimport Notes from \"@/components/Notes/index.vue\";\nimport Flag from \"@/components/Flag.vue\";\n\nimport {\n  computed,\n  defineComponent,\n  onBeforeUpdate,\n  PropType,\n  reactive,\n  ref,\n  watch,\n} from \"vue\";\n\nimport { Phrase, VBlock } from \"./types\";\nimport { root } from \"@/store\";\nimport * as player from \"@/audio-player\";\n\nexport default defineComponent({\n  components: { Context, Block, Notes, Flag },\n  props: {\n    lect: { type: String, default: \"\" },\n    phrase: { type: Object as PropType<Phrase>, default: undefined },\n  },\n  setup(props) {\n    const glossed = ref(false);\n    const contextTranslation = computed(() =>\n      props.lect ? props.phrase.context : undefined\n    );\n\n    onBeforeUpdate(() => (blocks.length = 0));\n    const blocks = reactive<VBlock[]>([]);\n    const text = computed(() =>\n      blocks\n        .filter(({ state }) => state)\n        .map(({ text }) => text)\n        .join(\" \")\n    );\n    function copy() {\n      navigator.clipboard.writeText(text.value);\n    }\n\n    const lectRoot = computed(() => root + props.lect + \"/phrasebook/\");\n    const urls = computed(() =>\n      blocks\n        .map(({ state }) => state?.texts.map(({ plain }) => plain))\n        .map((p) => lectRoot.value + p?.join(\"\") + \".mp3\")\n    );\n\n    const playing = computed({\n      get: () => player.playing.value && player.id.value === props.lect,\n      set: (p) => {\n        if (p) player.play(props.lect, ...urls.value);\n        else player.stop();\n      },\n    });\n\n    const playbacks = ref([] as number[]);\n    watch(\n      [player.playback, player.current, playing],\n      ([playback, current, playing]) => {\n        urls.value.forEach(\n          (_u, i) =>\n            (playbacks.value[i] = playing && i === current ? playback * 100 : 0)\n        );\n      }\n    );\n\n    return {\n      glossed,\n      blocks,\n      copy,\n      contextTranslation,\n      urls,\n      playing,\n      playbacks,\n      playback: player.playback,\n    };\n  },\n});\n","import { render } from \"./PhraseCard.vue?vue&type=template&id=5de917eb&scoped=true\"\nimport script from \"./PhraseCard.vue?vue&type=script&lang=ts\"\nexport * from \"./PhraseCard.vue?vue&type=script&lang=ts\"\n\nimport \"./PhraseCard.vue?vue&type=style&index=0&id=5de917eb&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5de917eb\"\n\nexport default script","import { getInitializer, loadJSON, loadLectsJSON } from \"@/store\";\nimport { shallowRef } from \"vue\";\nimport { CorpusPhrase, CorpusSection, Phrasebook } from \"./types\";\n\nexport const corpus = shallowRef<CorpusSection[]>([]);\nexport const phrasebooks = shallowRef<Record<string, Phrasebook>>();\nexport const section = shallowRef<CorpusSection>();\nexport const phrase = shallowRef<CorpusPhrase>();\n\nexport const initialize = getInitializer(async () => {\n  corpus.value = await loadJSON(\"phrasebook\");\n  phrasebooks.value = await loadLectsJSON<Phrasebook>(\"phrasebook\");\n\n  section.value = corpus.value[0];\n  phrase.value = section.value.phrases[0];\n});\n","\nimport PhraseCard from \"./PhraseCard.vue\";\n\nimport { computed, ref, watch, defineComponent, provide } from \"vue\";\n\nimport { corpus, section, phrase, phrasebooks, initialize } from \"./main\";\nimport { Context, CorpusPhrase, CorpusSection } from \"./types\";\nimport { createContext } from \"./utils\";\n\nexport default defineComponent({\n  components: { PhraseCard },\n  setup() {\n    initialize();\n\n    const context = ref({} as Context);\n    watch(phrase, (phrase) => createContext(context, phrase?.context), {\n      immediate: true,\n    });\n\n    provide(\"context\", context);\n\n    const searching = ref(false);\n    const query = ref(\"\");\n\n    const phrases = computed(() =>\n      searching.value\n        ? corpus.value.reduce((result, section, index) => {\n            result[index] = section.phrases\n              .map((phrase, index) => [phrase, index] as [CorpusPhrase, number])\n              .filter(([phrase]) => phrase.name.includes(query.value))\n              .map(([, index]) => index);\n            if (!result[index].length) delete result[index];\n            return result;\n          }, {} as Record<number, number[]>)\n        : section.value?.phrases\n    );\n    function select(_section?: CorpusSection, _phrase?: CorpusPhrase) {\n      if (_section) section.value = _section;\n      phrase.value = _phrase ?? section.value?.phrases[0];\n    }\n\n    return {\n      searching,\n      query,\n      corpus,\n      section,\n      phrase,\n      select,\n      phrases,\n      phrasebooks,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=262378b6&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=262378b6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-262378b6\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('some');\n\n// `Array.prototype.some` method\n// https://tc39.es/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=caacf090&lang=scss&scoped=true\"","<template>\n  <div class=\"row text-caption wrap\">\n    <div class=\"icon\">info</div>\n    <template v-if=\"any\">\n      <template v-for=\"(tags, i) of translated\" :key=\"i\">\n        <template v-if=\"tags.length\" class=\"row-0 wrap\">\n          <p\n            v-for=\"tag in tags\"\n            :key=\"tag + '--' + i\"\n            :class=\"'colored-dot-' + i\"\n          >\n            {{ tag }}\n          </p>\n        </template>\n      </template>\n    </template>\n    <template v-else>…</template>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, Ref, PropType } from \"vue\";\nimport { Context, ContextTranslation, VBlock } from \"../types\";\n\nexport default defineComponent({\n  name: \"Context\",\n  props: {\n    translation: {\n      type: Object as PropType<ContextTranslation>,\n      default: () => ({}),\n    },\n    blocks: { type: Array as PropType<VBlock[]>, default: () => [] },\n  },\n  setup(props) {\n    const context = inject(\"context\", {} as Ref<Context>);\n\n    const explicit = computed(() => {\n      const result = {} as Context;\n      for (const { state } of props.blocks) {\n        const condition = state?.conditions;\n        if (!condition) continue;\n        Object.entries(condition).forEach(([entity, tags]) =>\n          Object.entries(tags).forEach(([tag]) => {\n            if (!result[entity]) result[entity] = new Set();\n            result[entity].add(tag);\n          })\n        );\n      }\n      return result;\n    });\n\n    function translate(d: undefined | Record<string, string>, k: string) {\n      return d?.[k] || k;\n    }\n    const translated = computed(() =>\n      Object.entries(context.value).map(([entity, tags]) =>\n        [...tags]\n          .filter((tag) => !explicit.value[entity]?.has(tag))\n          .map((tag) => translate(props.translation?.[entity], tag))\n      )\n    );\n    const any = computed(() => translated.value.some((tags) => tags?.length));\n\n    return { translated, any };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\ndiv.icon {\n  font-size: map-get($font-sizes, \"small\");\n}\np:not(:last-child)::after {\n  content: \",\";\n}\n</style>\n","\nimport { computed, defineComponent, inject, Ref, PropType } from \"vue\";\nimport { Context, ContextTranslation, VBlock } from \"../types\";\n\nexport default defineComponent({\n  name: \"Context\",\n  props: {\n    translation: {\n      type: Object as PropType<ContextTranslation>,\n      default: () => ({}),\n    },\n    blocks: { type: Array as PropType<VBlock[]>, default: () => [] },\n  },\n  setup(props) {\n    const context = inject(\"context\", {} as Ref<Context>);\n\n    const explicit = computed(() => {\n      const result = {} as Context;\n      for (const { state } of props.blocks) {\n        const condition = state?.conditions;\n        if (!condition) continue;\n        Object.entries(condition).forEach(([entity, tags]) =>\n          Object.entries(tags).forEach(([tag]) => {\n            if (!result[entity]) result[entity] = new Set();\n            result[entity].add(tag);\n          })\n        );\n      }\n      return result;\n    });\n\n    function translate(d: undefined | Record<string, string>, k: string) {\n      return d?.[k] || k;\n    }\n    const translated = computed(() =>\n      Object.entries(context.value).map(([entity, tags]) =>\n        [...tags]\n          .filter((tag) => !explicit.value[entity]?.has(tag))\n          .map((tag) => translate(props.translation?.[entity], tag))\n      )\n    );\n    const any = computed(() => translated.value.some((tags) => tags?.length));\n\n    return { translated, any };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=caacf090&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=caacf090&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-caacf090\"\n\nexport default script","<template>\n  <button\n    v-show=\"text\"\n    v-if=\"state\"\n    class=\"small\"\n    :class=\"{ disabled, glossed }\"\n    @click=\"move\"\n  >\n    <VState :glossed=\"glossed\" :state=\"state\" @text=\"text = $event\" />\n  </button>\n</template>\n\n<script lang=\"ts\">\nimport VState from \"../State/index.vue\";\n\nimport {\n  computed,\n  defineComponent,\n  inject,\n  PropType,\n  ref,\n  Ref,\n  toRaw,\n  watch,\n} from \"vue\";\nimport { Context, State } from \"../types\";\nimport { applyConditions, findBestState, checkConditions } from \"../utils\";\n\nexport default defineComponent({\n  name: \"Block\",\n  components: { VState },\n  props: {\n    block: { type: Array as PropType<State[]>, default: undefined },\n    glossed: Boolean,\n  },\n  emits: [\"update:modelValue\"],\n  setup(props) {\n    const state = ref<State>();\n    const disabled = computed(() => !state.value?.transition);\n    const text = ref(\"\");\n\n    const context = inject(\"context\", {} as Ref<Context>);\n\n    function switchState(nextState: undefined | State) {\n      if (toRaw(nextState) === toRaw(state.value)) return;\n      applyConditions(context, state.value?.conditions, false);\n      applyConditions(context, nextState?.conditions, true);\n      state.value = nextState;\n    }\n    watch(\n      context,\n      (context) => {\n        const nextState = findBestState(undefined, props.block, context);\n        switchState(nextState);\n      },\n      { immediate: true, deep: true }\n    );\n\n    function move() {\n      if (disabled.value) return;\n      const transition = state.value?.transition;\n      const states = props.block;\n      let nextState;\n\n      if (transition === \"next\") {\n        const i = state.value ? states.indexOf(toRaw(state.value)) : -1;\n        nextState = states[(i + 1) % states.length];\n      } else if (transition)\n        nextState = findBestState(transition, states, context.value);\n\n      switchState(nextState);\n      if (checkConditions(nextState?.conditions, context.value)[0] < 0)\n        state.value = undefined;\n    }\n\n    return {\n      move,\n      state,\n      disabled,\n      text,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\nbutton {\n  height: fit-content;\n  padding: 0;\n  &.disabled {\n    padding: 0;\n    background-color: transparent;\n    &:hover,\n    &:active {\n      background-color: transparent;\n    }\n    cursor: default;\n  }\n  &:not(.disabled) > * {\n    padding: 0 map-get($margins, \"normal\");\n  }\n}\n</style>\n","\nimport VState from \"../State/index.vue\";\n\nimport {\n  computed,\n  defineComponent,\n  inject,\n  PropType,\n  ref,\n  Ref,\n  toRaw,\n  watch,\n} from \"vue\";\nimport { Context, State } from \"../types\";\nimport { applyConditions, findBestState, checkConditions } from \"../utils\";\n\nexport default defineComponent({\n  name: \"Block\",\n  components: { VState },\n  props: {\n    block: { type: Array as PropType<State[]>, default: undefined },\n    glossed: Boolean,\n  },\n  emits: [\"update:modelValue\"],\n  setup(props) {\n    const state = ref<State>();\n    const disabled = computed(() => !state.value?.transition);\n    const text = ref(\"\");\n\n    const context = inject(\"context\", {} as Ref<Context>);\n\n    function switchState(nextState: undefined | State) {\n      if (toRaw(nextState) === toRaw(state.value)) return;\n      applyConditions(context, state.value?.conditions, false);\n      applyConditions(context, nextState?.conditions, true);\n      state.value = nextState;\n    }\n    watch(\n      context,\n      (context) => {\n        const nextState = findBestState(undefined, props.block, context);\n        switchState(nextState);\n      },\n      { immediate: true, deep: true }\n    );\n\n    function move() {\n      if (disabled.value) return;\n      const transition = state.value?.transition;\n      const states = props.block;\n      let nextState;\n\n      if (transition === \"next\") {\n        const i = state.value ? states.indexOf(toRaw(state.value)) : -1;\n        nextState = states[(i + 1) % states.length];\n      } else if (transition)\n        nextState = findBestState(transition, states, context.value);\n\n      switchState(nextState);\n      if (checkConditions(nextState?.conditions, context.value)[0] < 0)\n        state.value = undefined;\n    }\n\n    return {\n      move,\n      state,\n      disabled,\n      text,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=354bd589&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=354bd589&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-354bd589\"\n\nexport default script","import { Ref } from \"vue\";\nimport { Context, State, Conditions, ContextSource } from \"./types\";\n\nexport function newState() {\n  return {\n    texts: [{ plain: \"new state\" }],\n    transition: \"next\",\n    conditions: {},\n  } as State;\n}\n\nexport function createContext(context: Ref<Context>, source?: ContextSource[]) {\n  if (!source) return;\n  context.value = {};\n  source.forEach(({ entity }) => (context.value[entity] = new Set()));\n}\n\nexport function checkConditions(\n  conditions: undefined | Conditions,\n  context: Context\n): [number, number] {\n  if (!conditions) return [1, 0];\n  let score = 0;\n  let count = 0;\n  for (const [entity, tags] of Object.entries(conditions))\n    for (const [tag, flag] of Object.entries(tags)) {\n      const has = context[entity]?.has(tag);\n      if (!flag && !has) return [-1, 0];\n      if (has) score += 1;\n      count += 1;\n    }\n  return [score / (count || 1), count];\n}\n\nexport function findBestState(\n  indexes: undefined | number[],\n  states: State[],\n  context: Context\n): undefined | State {\n  let state;\n  let score = -1;\n  let count = 0;\n\n  const candidates = indexes?.map((i) => states[i]) ?? states;\n  candidates.forEach((candidate) => {\n    const [s, c] = checkConditions(candidate.conditions, context);\n    if (score === 1 ? s === 1 && c > count : s > score) {\n      state = candidate;\n      score = s;\n      count = c;\n    }\n  });\n  return state;\n}\n\nexport function applyConditions(\n  context: Ref<Context>,\n  conditions: undefined | Conditions,\n  additive: boolean\n) {\n  if (!conditions || !context.value) return;\n  Object.entries(conditions).forEach(([entity, tags]) =>\n    Object.entries(tags).forEach(([tag, flag]) => {\n      const set = context.value[entity];\n      if (!flag || !set) return;\n      if (additive) set.add(tag);\n      else set.delete(tag);\n    })\n  );\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=354bd589&lang=scss&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=262378b6&lang=scss&scoped=true\"","<template>\n  <div class=\"display row\" :class=\"{ glossed: canGloss }\">\n    <div class=\"segments\">\n      <p v-for=\"(type, i) in types\" :key=\"type\" :class=\"'text-' + type\">\n        <span v-for=\"(text, j) in texts[i]\" :key=\"j\" :class=\"textColors[j]\">\n          {{ text }}\n        </span>\n      </p>\n    </div>\n    <div class=\"row dashes\">\n      <p v-for=\"(c, i) in dashColors\" :key=\"i\" :class=\"c\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, PropType, Ref, watch } from \"vue\";\nimport { Context, State } from \"../types\";\n\nexport default defineComponent({\n  name: \"State\",\n  props: {\n    state: { type: Object as PropType<State>, default: () => ({}) },\n    glossed: { type: Boolean, default: false },\n  },\n  emits: [\"text\"],\n  setup(props, { emit }) {\n    const context = inject(\"context\", {} as Ref<Context>);\n    const entities = computed(() => Object.keys(context.value));\n    const canGloss = computed(\n      () =>\n        props.glossed &&\n        props.state.texts.some(({ ipa, gloss }) => ipa || gloss)\n    );\n\n    const types = computed<(\"plain\" | \"ipa\" | \"gloss\")[]>(() =>\n      canGloss.value ? [\"ipa\", \"gloss\"] : [\"plain\"]\n    );\n    const texts = computed(() =>\n      types.value.map((type) => props.state.texts?.map((text) => text[type]))\n    );\n    watch(\n      texts,\n      (texts) => {\n        if (!texts) return;\n        const lines = texts.map((t) => t?.join(\"\"));\n        const text = lines.length === 1 ? lines[0] : lines.join(\"\\n\");\n        emit(\"text\", text);\n      },\n      { immediate: true, deep: true }\n    );\n\n    const textColors = computed(() =>\n      props.state.texts\n        .map(({ entity }) => entity ?? \"\")\n        .map((e) => entities.value.indexOf(e))\n        .map((i) => \"colored-\" + i)\n    );\n    const dashColors = computed(() =>\n      props.state.transition && props.state.conditions\n        ? Object.entries(props.state.conditions)\n            .filter(([, tags]) => Object.values(tags).some((flag) => flag))\n            .map(([entity]) => entities.value.indexOf(entity))\n            .map((i) => \"colored-back-\" + i)\n        : []\n    );\n\n    return { types, texts, canGloss, textColors, dashColors };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.display {\n  height: map-get($button-height, \"small\");\n  position: relative;\n  &.glossed {\n    height: map-get($button-height, \"normal\") + map-get($margins, \"normal\");\n  }\n}\n.segments {\n  display: flex;\n  flex-direction: column;\n  p {\n    display: flex;\n    place-content: center;\n  }\n}\n.dashes {\n  overflow: hidden;\n  border-radius: 0 0 $border-radius $border-radius;\n  height: $border-radius;\n  width: 100%;\n  left: 0;\n  justify-content: center;\n  position: absolute;\n  bottom: 0;\n  > * {\n    height: 100%;\n    width: 4 * $border-radius;\n  }\n}\n</style>\n","\nimport { computed, defineComponent, inject, PropType, Ref, watch } from \"vue\";\nimport { Context, State } from \"../types\";\n\nexport default defineComponent({\n  name: \"State\",\n  props: {\n    state: { type: Object as PropType<State>, default: () => ({}) },\n    glossed: { type: Boolean, default: false },\n  },\n  emits: [\"text\"],\n  setup(props, { emit }) {\n    const context = inject(\"context\", {} as Ref<Context>);\n    const entities = computed(() => Object.keys(context.value));\n    const canGloss = computed(\n      () =>\n        props.glossed &&\n        props.state.texts.some(({ ipa, gloss }) => ipa || gloss)\n    );\n\n    const types = computed<(\"plain\" | \"ipa\" | \"gloss\")[]>(() =>\n      canGloss.value ? [\"ipa\", \"gloss\"] : [\"plain\"]\n    );\n    const texts = computed(() =>\n      types.value.map((type) => props.state.texts?.map((text) => text[type]))\n    );\n    watch(\n      texts,\n      (texts) => {\n        if (!texts) return;\n        const lines = texts.map((t) => t?.join(\"\"));\n        const text = lines.length === 1 ? lines[0] : lines.join(\"\\n\");\n        emit(\"text\", text);\n      },\n      { immediate: true, deep: true }\n    );\n\n    const textColors = computed(() =>\n      props.state.texts\n        .map(({ entity }) => entity ?? \"\")\n        .map((e) => entities.value.indexOf(e))\n        .map((i) => \"colored-\" + i)\n    );\n    const dashColors = computed(() =>\n      props.state.transition && props.state.conditions\n        ? Object.entries(props.state.conditions)\n            .filter(([, tags]) => Object.values(tags).some((flag) => flag))\n            .map(([entity]) => entities.value.indexOf(entity))\n            .map((i) => \"colored-back-\" + i)\n        : []\n    );\n\n    return { types, texts, canGloss, textColors, dashColors };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=661aca89&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=661aca89&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-661aca89\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PhraseCard.vue?vue&type=style&index=0&id=5de917eb&lang=scss&scoped=true\""],"sourceRoot":""}