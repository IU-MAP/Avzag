{"version":3,"sources":["webpack:///./src/components/EditorCard.vue?3b9d","webpack:///./src/Phrasebook/Block/OrderEditor.vue","webpack:///./src/Phrasebook/Block/OrderEditor.vue?bf7d","webpack:///./src/Phrasebook/Block/OrderEditor.vue?81c1","webpack:///./src/components/ArrayShift.vue","webpack:///./src/components/ArrayShift.vue?a907","webpack:///./src/components/ArrayShift.vue?8746","webpack:///./src/Phrasebook/Block/ConditionsEditor.vue?eab4","webpack:///./src/components/EditorCard.vue","webpack:///./src/components/EditorCard.vue?73a3","webpack:///./src/components/EditorCard.vue?01ae","webpack:///./src/components/ButtonAlert.vue","webpack:///./src/components/ButtonAlert.vue?c316","webpack:///./src/components/ButtonAlert.vue?2335","webpack:///./src/Phrasebook/Block/Editor.vue","webpack:///./src/Phrasebook/Block/ConditionsEditor.vue","webpack:///./src/Phrasebook/Block/ConditionsEditor.vue?df6e","webpack:///./src/Phrasebook/Block/TransitionEditor.vue","webpack:///./src/Phrasebook/Block/TransitionEditor.vue?8a28","webpack:///./src/Phrasebook/Block/DisplayEditor.vue","webpack:///./src/Phrasebook/Block/DisplayEditor.vue?6337","webpack:///./src/Phrasebook/Block/Editor.vue?7956","webpack:///./src/editor.ts","webpack:///./node_modules/core-js/modules/es.array.splice.js"],"names":["class","mphrase","icon","header","add","translation","phrase","id","context","blocks","vblocks","b","i","key","Math","random","is-on","block","ref","el","push","item","remove","components","EditorCard","ArrayShift","ButtonAlert","Context","VBlock","props","modelValue","type","Object","default","undefined","corpus","Boolean","emits","setup","emit","get","set","p","value","bs","pickLast","length","states","display","text","transition","index","indexOf","splice","immediate","render","shift","Array","array","a","from","to","button","caption","name","String","_","slots","__scopeId","prompt","confirm","requirements","s","state","glossed","implicit","conditions","allow-passive","c","allowPassive","passive","entity","setEntity","entities","e","tag","tags","t","inject","computed","this","$emit","keys","contextSource","entries","reduce","methods","condition","icons","ic","mode","present","toggle","Display","data","ints","split","map","Number","filter","n","isNaN","includes","watch","handler","join","model-value","$event","d","colors","placeholder","ipa","glossing","concat","j","allowEmpty","ConditionsEditor","TransitionEditor","DisplayEditor","config","defaultFile","storage","filename","file","resetFile","JSON","parse","stringify","saveFile","localStorage","setupEditor","options","assign","deep","$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","max","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","start","deleteCount","insertCount","actualDeleteCount","A","k","O","len","actualStart","argumentsLength","arguments","TypeError"],"mappings":"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","file":"js/chunk-efef21be.f045df5b.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EditorCard.vue?vue&type=style&index=0&id=4a416a12&lang=scss&scoped=true\"","<template>\n  <EditorCard v-if=\"mphrase\" icon=\"account_tree\" header=\"Blocks\" @action=\"add\">\n    <template v-if=\"block\" #header>\n      <ArrayShift v-model=\"blocks\" :item=\"block\" />\n      <p class=\"text-dot\" />\n      <ButtonAlert @confirm=\"remove\" />\n    </template>\n    <Context\n      :translation=\"phrase.id ? null : phrase.context\"\n      :blocks=\"vblocks\"\n    />\n    <div class=\"row-1 wrap block-editor\">\n      <div v-for=\"(b, i) in blocks\" :key=\"i + '--' + Math.random()\" class=\"row\">\n        <btn icon=\"edit\" :is-on=\"block === b\" @click=\"block = b\" />\n        <VBlock :ref=\"(el) => (el ? vblocks.push(el) : null)\" :block=\"b\" />\n      </div>\n    </div>\n  </EditorCard>\n</template>\n\n<script lang=\"ts\">\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport ArrayShift from \"@/components/ArrayShift.vue\";\nimport ButtonAlert from \"@/components/ButtonAlert.vue\";\nimport Context from \"../Context/index.vue\";\nimport VBlock from \"./index.vue\";\n\nimport {\n  computed,\n  defineComponent,\n  onBeforeUpdate,\n  PropType,\n  ref,\n  toRaw,\n  watch,\n} from \"vue\";\nimport { Phrase, CorpusPhrase, Block } from \"../types\";\n\nexport default defineComponent({\n  components: { EditorCard, ArrayShift, ButtonAlert, Context, VBlock },\n  props: {\n    modelValue: {\n      type: Object as PropType<Block | undefined>,\n      default: undefined,\n    },\n    phrase: {\n      type: Object as PropType<Phrase | CorpusPhrase>,\n      default: () => ({}),\n    },\n    corpus: Boolean,\n  },\n  emits: [\"update:modelValue\", \"update:phrase\"],\n  setup(props, { emit }) {\n    const mphrase = computed({\n      get: () => props.phrase,\n      set: (p) => emit(\"update:modelValue\", p),\n    });\n    const blocks = computed({\n      get: () => mphrase.value.blocks,\n      set: (bs) => (mphrase.value.blocks = bs),\n    });\n    const block = computed({\n      get: () => props.modelValue,\n      set: (b) => emit(\"update:modelValue\", b),\n    });\n    const vblocks = ref([]);\n    onBeforeUpdate(() => (vblocks.value = []));\n\n    function pickLast() {\n      block.value = blocks.value\n        ? blocks.value[blocks.value.length - 1]\n        : undefined;\n    }\n    watch(blocks, pickLast, {\n      immediate: true,\n    });\n\n    function add() {\n      if (!blocks.value) blocks.value = [];\n      blocks.value.push({\n        states: [{ display: [{ text: \"new state\" }], transition: \"next\" }],\n      });\n      pickLast();\n    }\n    function remove() {\n      if (!block.value) return;\n      const index = toRaw(blocks.value).indexOf(toRaw(block.value));\n      blocks.value.splice(index, 1);\n      pickLast();\n    }\n\n    return { mphrase, blocks, vblocks, block, add, remove };\n  },\n});\n</script>\n","\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport ArrayShift from \"@/components/ArrayShift.vue\";\nimport ButtonAlert from \"@/components/ButtonAlert.vue\";\nimport Context from \"../Context/index.vue\";\nimport VBlock from \"./index.vue\";\n\nimport {\n  computed,\n  defineComponent,\n  onBeforeUpdate,\n  PropType,\n  ref,\n  toRaw,\n  watch,\n} from \"vue\";\nimport { Phrase, CorpusPhrase, Block } from \"../types\";\n\nexport default defineComponent({\n  components: { EditorCard, ArrayShift, ButtonAlert, Context, VBlock },\n  props: {\n    modelValue: {\n      type: Object as PropType<Block | undefined>,\n      default: undefined,\n    },\n    phrase: {\n      type: Object as PropType<Phrase | CorpusPhrase>,\n      default: () => ({}),\n    },\n    corpus: Boolean,\n  },\n  emits: [\"update:modelValue\", \"update:phrase\"],\n  setup(props, { emit }) {\n    const mphrase = computed({\n      get: () => props.phrase,\n      set: (p) => emit(\"update:modelValue\", p),\n    });\n    const blocks = computed({\n      get: () => mphrase.value.blocks,\n      set: (bs) => (mphrase.value.blocks = bs),\n    });\n    const block = computed({\n      get: () => props.modelValue,\n      set: (b) => emit(\"update:modelValue\", b),\n    });\n    const vblocks = ref([]);\n    onBeforeUpdate(() => (vblocks.value = []));\n\n    function pickLast() {\n      block.value = blocks.value\n        ? blocks.value[blocks.value.length - 1]\n        : undefined;\n    }\n    watch(blocks, pickLast, {\n      immediate: true,\n    });\n\n    function add() {\n      if (!blocks.value) blocks.value = [];\n      blocks.value.push({\n        states: [{ display: [{ text: \"new state\" }], transition: \"next\" }],\n      });\n      pickLast();\n    }\n    function remove() {\n      if (!block.value) return;\n      const index = toRaw(blocks.value).indexOf(toRaw(block.value));\n      blocks.value.splice(index, 1);\n      pickLast();\n    }\n\n    return { mphrase, blocks, vblocks, block, add, remove };\n  },\n});\n","import { render } from \"./OrderEditor.vue?vue&type=template&id=7a2d9d92\"\nimport script from \"./OrderEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./OrderEditor.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"row-0\">\n    <btn icon=\"keyboard_arrow_up\" @click=\"shift(-1)\" />\n    <btn icon=\"keyboard_arrow_down\" @click=\"shift(1)\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, toRaw } from \"vue\";\n\nexport default defineComponent({\n  props: {\n    modelValue: { type: Array, default: () => [] },\n    item: { type: Object, default: undefined },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const array = computed({\n      get: () => props.modelValue,\n      set: (a) => emit(\"update:modelValue\", a),\n    });\n    function shift(shift: number) {\n      const length = array.value.length;\n      const from = toRaw(array.value).indexOf(toRaw(props.item));\n      const to = (from + shift + length) % length;\n      array.value.splice(to, 0, array.value.splice(from, 1)[0]);\n    }\n    return { shift };\n  },\n});\n</script>\n","\nimport { computed, defineComponent, toRaw } from \"vue\";\n\nexport default defineComponent({\n  props: {\n    modelValue: { type: Array, default: () => [] },\n    item: { type: Object, default: undefined },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const array = computed({\n      get: () => props.modelValue,\n      set: (a) => emit(\"update:modelValue\", a),\n    });\n    function shift(shift: number) {\n      const length = array.value.length;\n      const from = toRaw(array.value).indexOf(toRaw(props.item));\n      const to = (from + shift + length) % length;\n      array.value.splice(to, 0, array.value.splice(from, 1)[0]);\n    }\n    return { shift };\n  },\n});\n","import { render } from \"./ArrayShift.vue?vue&type=template&id=05ea17ae\"\nimport script from \"./ArrayShift.vue?vue&type=script&lang=ts\"\nexport * from \"./ArrayShift.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ConditionsEditor.vue?vue&type=style&index=0&id=6e2fd21f&lang=scss&scoped=true\"","<template>\n  <div class=\"col\">\n    <div class=\"row\">\n      <btn v-if=\"button\" :icon=\"button\" @click=\"emit('action')\" />\n      <p class=\"icon\">{{ icon }}</p>\n      <h2 class=\"flex\">{{ header }}</h2>\n      <slot name=\"header\" />\n    </div>\n    <p v-if=\"caption\" class=\"text-caption text-faded\">\n      <slot name=\"caption\" />\n    </p>\n    <slot />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"EditorCard\",\n  props: {\n    button: { type: String, default: \"add\" },\n    icon: { type: String, default: \"\" },\n    header: { type: String, default: \"\" },\n  },\n  emits: [\"action\"],\n  setup(_, { emit, slots }) {\n    return { emit, caption: slots.caption };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.text-caption:empty {\n  display: none;\n}\n</style>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"EditorCard\",\n  props: {\n    button: { type: String, default: \"add\" },\n    icon: { type: String, default: \"\" },\n    header: { type: String, default: \"\" },\n  },\n  emits: [\"action\"],\n  setup(_, { emit, slots }) {\n    return { emit, caption: slots.caption };\n  },\n});\n","import { render } from \"./EditorCard.vue?vue&type=template&id=4a416a12&scoped=true\"\nimport script from \"./EditorCard.vue?vue&type=script&lang=ts\"\nexport * from \"./EditorCard.vue?vue&type=script&lang=ts\"\n\nimport \"./EditorCard.vue?vue&type=style&index=0&id=4a416a12&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4a416a12\"\n\nexport default script","<template>\n  <div class=\"row-0\">\n    <template v-if=\"prompt\">\n      <btn\n        class=\"highlight-font-alert\"\n        icon=\"delete_forever\"\n        @click=\"confirm\"\n      />\n      <btn icon=\"check\" @click=\"prompt = false\" />\n    </template>\n    <btn\n      v-else\n      class=\"highlight-font-alert\"\n      icon=\"delete\"\n      :text=\"text\"\n      @click=\"prompt = true\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { ref, defineComponent } from \"vue\";\n\nexport default defineComponent({\n  props: {\n    text: { type: String, default: \"\" },\n  },\n  emits: [\"confirm\"],\n  setup(props, { emit }) {\n    const prompt = ref(false);\n    function confirm() {\n      prompt.value = false;\n      emit(\"confirm\");\n    }\n    return { prompt, confirm };\n  },\n});\n</script>\n","\nimport { ref, defineComponent } from \"vue\";\n\nexport default defineComponent({\n  props: {\n    text: { type: String, default: \"\" },\n  },\n  emits: [\"confirm\"],\n  setup(props, { emit }) {\n    const prompt = ref(false);\n    function confirm() {\n      prompt.value = false;\n      emit(\"confirm\");\n    }\n    return { prompt, confirm };\n  },\n});\n","import { render } from \"./ButtonAlert.vue?vue&type=template&id=9c1bd3bc\"\nimport script from \"./ButtonAlert.vue?vue&type=script&lang=ts\"\nexport * from \"./ButtonAlert.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"block col-2\">\n    <ConditionsEditor\n      v-model=\"block.requirements\"\n      icon=\"lock\"\n      header=\"Requirements\"\n    >\n      If at least one of these conditions fails, the block will be completely\n      hidden.\n    </ConditionsEditor>\n    <EditorCard icon=\"tune\" header=\"States\" @action=\"add\">\n      <template v-if=\"state\" #header>\n        <toggle v-model=\"glossed\" icon=\"layers\" />\n        <p class=\"text-dot\" />\n        <ButtonAlert @confirm=\"remove\" />\n      </template>\n      <div class=\"row-1 wrap block-editor\">\n        <div v-for=\"(s, i) in states\" :key=\"i\" class=\"row\">\n          <btn icon=\"edit\" :is-on=\"state === s\" @click=\"state = s\" />\n          <Display :state=\"s\" :glossed=\"glossed\" />\n        </div>\n      </div>\n    </EditorCard>\n    <template v-if=\"state\">\n      <DisplayEditor\n        v-model=\"state.display\"\n        v-model:implicit=\"state.implicit\"\n      />\n      <ConditionsEditor\n        v-model=\"state.conditions\"\n        :allow-passive=\"true\"\n        icon=\"widgets\"\n        header=\"conditions\"\n      />\n      <TransitionEditor v-model=\"state.transition\" :states=\"states\" />\n    </template>\n  </div>\n</template>\n\n<script>\nimport ButtonAlert from \"@/components/ButtonAlert\";\nimport EditorCard from \"@/components/EditorCard\";\nimport ConditionsEditor from \"./ConditionsEditor\";\nimport TransitionEditor from \"./TransitionEditor\";\nimport DisplayEditor from \"./DisplayEditor\";\nimport Display from \"./Display\";\n\nexport default {\n  name: \"PhraseBlockEditor\",\n  components: {\n    ButtonAlert,\n    EditorCard,\n    ConditionsEditor,\n    TransitionEditor,\n    Display,\n    DisplayEditor,\n  },\n  props: [\"modelValue\"],\n  emits: [\"update:modelValue\"],\n  data() {\n    return {\n      state: undefined,\n      glossed: false,\n    };\n  },\n  computed: {\n    block: {\n      get() {\n        return this.modelValue;\n      },\n      set(b) {\n        this.$emit(\"update:modelValue\", b);\n      },\n    },\n    states() {\n      return this.block?.states;\n    },\n  },\n  watch: {\n    block: {\n      handler() {\n        if (!this.states?.length) {\n          this.block.states = [];\n          this.add();\n        } else this.state = this.states[this.states.length - 1];\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    add() {\n      const state = {\n        display: [{ text: \"new state\" }],\n        transition: \"next\",\n      };\n      this.states.push(state);\n      this.state = state;\n    },\n    remove() {\n      if (this.states.length > 1) {\n        this.states.splice(this.states.indexOf(this.state), 1);\n        this.state = this.states[this.states.length - 1];\n      }\n    },\n  },\n};\n</script>\n","<template>\n  <EditorCard :icon=\"icon\" :header=\"header\" @action=\"add\">\n    <template #caption><slot /></template>\n    <div class=\"scroll col\">\n      <div v-for=\"(c, i) in conditions\" :key=\"i\" class=\"row\">\n        <toggle v-if=\"allowPassive\" v-model=\"c.passive\" icon=\"call_missed\" />\n        <select v-model=\"c.entity\" @change=\"setEntity(c)\">\n          <option v-for=\"e in entities\" :key=\"e\" :value=\"e\">{{ e }}</option>\n        </select>\n        <p class=\"icon\">west</p>\n        <select v-if=\"c.entity\" v-model=\"c.tag\">\n          <option v-for=\"t in tags[c.entity]\" :key=\"t\" :value=\"t\">\n            {{ t }}\n          </option>\n        </select>\n        <btn icon=\"clear\" @click=\"remove(i)\" />\n      </div>\n    </div>\n  </EditorCard>\n</template>\n\n<script>\nimport EditorCard from \"@/components/EditorCard\";\n\nexport default {\n  name: \"PhraseConditionsEditor\",\n  components: { EditorCard },\n  inject: [\"contextSource\"],\n  props: [\"modelValue\", \"allowPassive\", \"header\", \"icon\"],\n  emits: [\"update:modelValue\"],\n  computed: {\n    conditions: {\n      get() {\n        return this.modelValue;\n      },\n      set(c) {\n        this.$emit(\"update:modelValue\", c);\n      },\n    },\n    entities() {\n      return Object.keys(this.contextSource.value);\n    },\n    tags() {\n      return Object.entries(this.contextSource.value).reduce(\n        (c, [entity, tags]) => {\n          c[entity] = [...tags];\n          return c;\n        },\n        {}\n      );\n    },\n  },\n  methods: {\n    setEntity(c) {\n      c.tag = this.tags[c.entity][0];\n    },\n    add() {\n      const condition = { entity: this.entities[0] };\n      this.setEntity(condition);\n      const conditions = this.conditions ?? [];\n      conditions.push(condition);\n      this.conditions = conditions;\n    },\n    remove(i) {\n      this.conditions.splice(i, 1);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.scroll {\n  max-height: 128px;\n}\n</style>\n","import { render } from \"./ConditionsEditor.vue?vue&type=template&id=6e2fd21f&scoped=true\"\nimport script from \"./ConditionsEditor.vue?vue&type=script&lang=js\"\nexport * from \"./ConditionsEditor.vue?vue&type=script&lang=js\"\n\nimport \"./ConditionsEditor.vue?vue&type=style&index=0&id=6e2fd21f&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6e2fd21f\"\n\nexport default script","<template>\n  <EditorCard button=\"\" icon=\"alt_route\" header=\"transition\">\n    <template #header>\n      <div class=\"row\">\n        <btn\n          v-for=\"(ic, i) in icons\"\n          :key=\"ic\"\n          :icon=\"ic\"\n          :is-on=\"mode === i\"\n          @click=\"mode = i\"\n        />\n      </div>\n    </template>\n    <div v-if=\"mode === 2\" class=\"row-1 wrap block-editor\">\n      <div v-for=\"(s, i) in states\" :key=\"i\" class=\"row\">\n        <btn icon=\"check\" :is-on=\"present[i]\" @click=\"toggle(i)\" />\n        <Display :state=\"s\" />\n      </div>\n    </div>\n  </EditorCard>\n</template>\n\n<script>\nimport EditorCard from \"@/components/EditorCard\";\nimport Display from \"./Display\";\n\nexport default {\n  name: \"PhraseStateTransitionEditor\",\n  components: {\n    EditorCard,\n    Display,\n  },\n  props: [\"modelValue\", \"states\"],\n  emits: [\"update:modelValue\"],\n  data() {\n    return {\n      mode: 0,\n      icons: [\"block\", \"arrow_forward\", \"star_outline\"],\n    };\n  },\n  computed: {\n    transition: {\n      get() {\n        return this.modelValue;\n      },\n      set(t) {\n        this.$emit(\"update:modelValue\", t);\n      },\n    },\n    ints() {\n      return (\n        this.transition\n          ?.split(\" \")\n          .map((t) => Number(t))\n          .filter((n) => !isNaN(n)) ?? []\n      );\n    },\n    present() {\n      return this.states.map((s, i) => this.ints.includes(i));\n    },\n  },\n  watch: {\n    state: {\n      handler() {\n        if (this.transition === \"next\") this.mode = 1;\n        else if (this.transition) this.mode = 2;\n        else this.mode = 0;\n      },\n      immediate: true,\n    },\n    mode() {\n      if (this.mode === 1) this.transition = \"next\";\n      else if (!this.mode) this.transition = undefined;\n    },\n  },\n  methods: {\n    toggle(i) {\n      const ints = this.ints;\n      if (ints.includes(i)) ints.splice(ints.indexOf(i), 1);\n      else ints.push(i);\n\n      if (this.mode === 2) this.transition = ints.join(\" \");\n    },\n  },\n};\n</script>\n","import { render } from \"./TransitionEditor.vue?vue&type=template&id=6a02e6ce\"\nimport script from \"./TransitionEditor.vue?vue&type=script&lang=js\"\nexport * from \"./TransitionEditor.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <EditorCard icon=\"visibility\" header=\"display\" @action=\"add\">\n    <template #header>\n      <toggle\n        icon=\"opacity\"\n        :model-value=\"implicit\"\n        @update:modelValue=\"$emit('update:implicit', $event)\"\n      />\n    </template>\n    <div v-if=\"display\" class=\"col\">\n      <div v-for=\"(d, i) in display\" :key=\"i\" class=\"row\">\n        <btn icon=\"palette\" @click=\"toggle(i)\" />\n        <input\n          v-model=\"d.text\"\n          :class=\"colors[i]\"\n          type=\"text\"\n          placeholder=\"text\"\n        />\n        <input\n          v-model=\"d.ipa\"\n          class=\"text-ipa\"\n          :class=\"colors[i]\"\n          type=\"text\"\n          placeholder=\"ipa\"\n        />\n        <input\n          v-model=\"d.glossing\"\n          class=\"glossing\"\n          :class=\"colors[i]\"\n          type=\"text\"\n          placeholder=\"glossing\"\n        />\n        <btn icon=\"clear\" @click=\"remove(i)\" />\n      </div>\n    </div>\n  </EditorCard>\n</template>\n\n<script>\nimport EditorCard from \"@/components/EditorCard\";\n\nexport default {\n  name: \"PhraseStateDisplayEditor\",\n  components: {\n    EditorCard,\n  },\n  inject: [\"contextSource\"],\n  props: [\"modelValue\", \"implicit\", \"allowEmpty\"],\n  emits: [\"update:modelValue\", \"update:implicit\"],\n  computed: {\n    display: {\n      get() {\n        return this.modelValue;\n      },\n      set(d) {\n        this.$emit(\"update:modelValue\", d);\n      },\n    },\n    entities() {\n      return [undefined].concat(Object.keys(this.contextSource.value));\n    },\n    colors() {\n      return this.display.map(\n        (d) => \"colored-\" + (this.entities.indexOf(d.entity) - 1)\n      );\n    },\n  },\n  methods: {\n    add() {\n      if (!this.display) this.display = [];\n      this.display.push({});\n    },\n    toggle(j) {\n      let i = this.entities.indexOf(this.display[j].entity);\n      i = (i + 1) % this.entities.length;\n      this.display[j].entity = this.entities[i];\n    },\n    remove(i) {\n      if (this.allowEmpty || this.display.length > 1) {\n        this.display.splice(i, 1);\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./DisplayEditor.vue?vue&type=template&id=3ca086e4\"\nimport script from \"./DisplayEditor.vue?vue&type=script&lang=js\"\nexport * from \"./DisplayEditor.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Editor.vue?vue&type=template&id=446214d4\"\nimport script from \"./Editor.vue?vue&type=script&lang=js\"\nexport * from \"./Editor.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { watch, ref, Ref } from \"vue\";\n\ntype Options = {\n  defaultFile: unknown;\n  storage: string;\n  filename: string | (() => string);\n};\n\nexport const config: Options = {\n  defaultFile: {},\n  storage: \"\",\n  filename: \"\",\n};\n\nexport const file = ref();\n\nexport function resetFile() {\n  file.value = JSON.parse(JSON.stringify(config.defaultFile));\n}\n\nexport function saveFile() {\n  localStorage[config.storage] = JSON.stringify(file.value);\n}\n\nexport function setupEditor<T>(options: Partial<Options>) {\n  Object.assign(config, options);\n  try {\n    file.value = JSON.parse(localStorage[config.storage]);\n  } catch {\n    resetFile();\n  }\n  watch(file, saveFile, { deep: true });\n\n  return file as Ref<T>;\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n"],"sourceRoot":""}