{"version":3,"sources":["webpack:///./src/Phrasebook/index.vue?44c5","webpack:///./src/Phrasebook/PhraseCard.vue?0de3","webpack:///./src/Phrasebook/index.vue","webpack:///./src/Phrasebook/PhraseCard.vue","webpack:///./src/Phrasebook/PhraseCard.vue?0f23","webpack:///./src/Phrasebook/PhraseCard.vue?dc76","webpack:///./src/Phrasebook/main.ts","webpack:///./src/Phrasebook/index.vue?dcc3","webpack:///./src/Phrasebook/index.vue?b05c"],"names":["class","corpus","searching","icon","query","type","placeholder","section","style","select","s","key","id","value","name","phrases","ps","p","text","is-on","phrase","phrasebooks","n","lect","playing","copy","glossed","translation","context","blocks","vblocks","b","i","check","player","current","seek","block","$event","notes","components","Context","Block","Notes","Flag","Seeker","props","String","default","Object","undefined","setup","filter","state","map","join","navigator","clipboard","writeText","get","set","play","texts","plain","stop","render","__scopeId","initialize","PhraseCard","immediate","reduce","result","index","includes","length","_section","_phrase"],"mappings":"kHAAA,W,oCCAA,W,wJCCqBA,MAAM,iB,GAClBA,MAAM,S,GACJA,MAAM,O,SASEA,MAAM,c,GAYdA,MAAM,U,SACaA,MAAM,O,GAGnBA,MAAM,S,SAWHA,MAAM,S,6IAtCb,EAAAC,Q,iBAAX,eA0DM,MA1DN,EA0DM,CAzDJ,eA+CM,MA/CN,EA+CM,CA9CJ,eAoBM,MApBN,EAoBM,CAnBJ,eAA4C,G,WAA3B,EAAAC,U,qDAAA,EAAAA,UAAS,IAAEC,KAAK,U,uBAEzB,EAAAD,U,iCADR,eAME,S,2DAJS,EAAAE,MAAK,IACdJ,MAAM,OACNK,KAAK,OACLC,YAAY,yB,oBAHH,EAAAF,U,iBAKX,eAUK,KAVL,EAUK,C,eATH,eAQS,U,qDAPE,EAAAG,QAAO,IAChBC,MAAA,cACC,SAAM,+BAAE,EAAAC,OAAO,EAAAF,Y,qBAEhB,eAES,2BAFW,EAAAN,QAAM,SAAXS,G,wBAAf,eAES,UAFoBC,IAAKD,EAAEE,GAAKC,MAAOH,G,eAC3CA,EAAEI,MAAI,gB,qBALF,EAAAP,gBAUf,eAwBM,MAxBN,EAwBM,CAvBO,EAAAL,W,iBAAX,eAaM,MAbN,EAaM,E,mBAZJ,eAWM,2BAXiB,EAAAa,SAAO,SAAjBC,EAAIN,G,wBAAjB,eAWM,OAX2BC,IAAKD,EAAGV,MAAM,O,CAC7C,eAA6B,yBAAtB,EAAAC,OAAOS,GAAGI,MAAI,GACrB,eAQM,MARN,EAQM,E,mBAPJ,eAME,2BALYE,GAAE,SAAPC,G,wBADT,eAME,GAJCN,IAAKM,EACLC,KAAM,EAAAjB,OAAOS,GAAGK,QAAQE,GAAGH,KAC3BK,QAAO,EAAAC,SAAW,EAAAnB,OAAOS,GAAGK,QAAQE,GACpC,QAAK,mBAAE,EAAAR,OAAO,EAAAR,OAAOS,GAAI,EAAAT,OAAOS,GAAGK,QAAQE,M,8EAKpD,eAQM,MARN,EAQM,E,mBAPJ,eAME,2BALY,EAAAF,SAAO,SAAZE,G,wBADT,eAME,GAJCN,IAAKM,EAAEL,GACPM,KAAMD,EAAEH,KACRK,QAAO,EAAAC,SAAWH,EAClB,QAAK,mBAAE,EAAAR,OAAM,KAAOQ,K,mDAKlB,EAAAG,Q,iBAAX,eAQM,OARcT,IAAK,EAAAS,OAAOR,GAAIZ,MAAM,S,CACxC,eAA+B,GAAlBoB,OAAQ,EAAAA,QAAM,oB,mBAC3B,eAKE,2BAJiB,EAAAC,aAAW,SAApBJ,EAAGK,G,wBADb,eAKE,GAHCX,IAAKW,EACLC,KAAMD,EACNF,OAAQH,EAAE,EAAAG,OAAOR,K,2OCvDLZ,MAAM,iB,SAENA,MAAM,iBAAiBQ,MAAA,gB,GAClCR,MAAM,Q,GACLA,MAAM,O,GAORA,MAAM,iB,kPAXF,EAAAoB,Q,iBAAX,eAqBM,MArBN,EAqBM,CApBJ,eAAkC,GAA3BG,KAAM,EAAAA,KAAMvB,MAAM,Q,iBACd,EAAAuB,M,iBAAX,eAOM,MAPN,EAOM,CANJ,eAAgC,KAAhC,EAAgC,eAAZ,EAAAA,MAAI,GACxB,eAIM,MAJN,EAIM,CAHJ,eAA8C,G,WAA7B,EAAAC,Q,qDAAA,EAAAA,QAAO,IAAErB,KAAK,c,uBAC/B,eAAyC,GAApCA,KAAK,eAAgB,QAAO,EAAAsB,M,oBACjC,eAA0C,G,WAAzB,EAAAC,Q,qDAAA,EAAAA,QAAO,IAAEvB,KAAK,U,kDAGnC,eAAyE,GAA/DwB,YAAa,EAAAJ,KAAO,EAAAH,OAAOQ,QAAO,KAAUC,OAAQ,EAAAC,S,iCAC9D,eAQM,MARN,EAQM,E,mBAPJ,eAMM,2BANgB,EAAAV,OAAOS,QAAM,SAAtBE,EAAGC,GAAC,M,wBAAjB,eAMM,OANgCrB,IAAKqB,EAAGhC,MAAM,qB,CAClD,eAGE,GAFCiC,MAAO,EAAAT,UAAW,YAAAU,OAAOC,eAAP,eAAgBH,KAAMA,EACxCI,KAAM,EAAAF,OAAOE,M,yBAEhB,eAAqE,GAA7DC,MAAON,EAAIL,QAAS,EAAAA,QAAU,SAAM,mBAAE,EAAAI,QAAQE,GAAKM,I,oDAG/D,eAAoD,GAA7CtC,MAAM,eAAgBuC,MAAO,EAAAnB,OAAOmB,O,kICThC,iBAAgB,CAC7BC,WAAY,CAAEC,UAAA,KAASC,QAAA,KAAOC,QAAA,KAAOC,OAAA,KAAMC,SAAA,MAC3CC,MAAO,CACLvB,KAAM,CAAElB,KAAM0C,OAAQC,QAAS,IAC/B5B,OAAQ,CAAEf,KAAM4C,OAA4BD,aAASE,IAEvDC,MAN6B,SAMvBL,GACJ,IAAMpB,EAAU,gBAAI,GACdI,EAAU,eAAS,IAEnBZ,EAAO,gBAAS,kBACpBY,EACGsB,QAAO,gBAAGC,EAAH,EAAGA,MAAH,OAAeA,KACtBC,KAAI,gBAAGpC,EAAH,EAAGA,KAAH,OAAcA,KAClBqC,KAAK,QAEV,SAAS9B,IACP+B,UAAUC,UAAUC,UAAUxC,EAAKL,OAGrC,IAAMW,EAAU,eAAS,CACvBmC,IAAK,kBAAM,OAAOhD,MAAQmC,EAAMvB,MAChCqC,IAAK,SAAC3C,GACAA,EACF,OAAO4C,KACLf,EAAMvB,KACNO,EACGwB,KAAI,gBAAGD,EAAH,EAAGA,MAAH,cAAeA,QAAf,IAAeA,OAAf,EAAeA,EAAOS,MAAMR,KAAI,gBAAGS,EAAH,EAAGA,MAAH,OAAeA,QACnDT,KAAI,SAACrC,GAAD,YAAO,gCAAiBA,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAGsC,KAAK,WAAzB,QAAgC,QAE7C,OAAOS,UAIhB,MAAO,CAAEtC,UAASI,UAASL,OAAMS,OAAA,OAAQV,c,UCzC7C,EAAOyC,OAAS,EAChB,EAAOC,UAAY,kBAEJ,Q,oCCJFjE,EAAS,eAA4B,IACrCoB,EAAc,iBACd,EAAU,iBACV,EAAS,iBAET8C,EAAa,eAAc,wCAAC,8GAClB,eAAS,cADS,cACvClE,EAAOY,MADgC,gBAEb,eAA0B,cAFb,OAEvCQ,EAAYR,MAF2B,OAIvC,EAAQA,MAAQZ,EAAOY,MAAM,GAC7B,EAAOA,MAAQ,EAAQA,MAAME,QAAQ,GALE,4C,YCA1B,iBAAgB,CAC7ByB,WAAY,CAAE4B,cACdjB,MAF6B,WAG3BgB,IAEA,IAAMvC,EAAU,eAAI,IACpB,eAAM,GAAQ,SAACR,GAAD,OAAY,eAAcQ,EAAD,OAAUR,QAAV,IAAUA,OAAV,EAAUA,EAAQQ,WAAU,CACjEyC,WAAW,IAGb,eAAQ,UAAWzC,GAEnB,IAAM1B,EAAY,gBAAI,GAChBE,EAAQ,eAAI,IAEZW,EAAU,gBAAS,wBACvBb,EAAUW,MACNZ,EAAOY,MAAMyD,QAAO,SAACC,EAAQhE,EAASiE,GAMpC,OALAD,EAAOC,GAASjE,EAAQQ,QACrBuC,KAAI,SAAClC,EAAQoD,GAAT,MAAmB,CAACpD,EAAQoD,MAChCpB,QAAO,sCAAEhC,EAAF,YAAcA,EAAON,KAAK2D,SAASrE,EAAMS,UAChDyC,KAAI,sCAAIkB,EAAJ,YAAeA,KACjBD,EAAOC,GAAOE,eAAeH,EAAOC,GAClCD,IACN,IARP,UASI,EAAQ1D,aATZ,aASI,EAAeE,WAErB,SAASN,EAAOkE,EAA0BC,GAAsB,MAC1DD,IAAU,EAAQ9D,MAAQ8D,GAC9B,EAAO9D,MAAP,OAAe+D,QAAf,IAAeA,IAAf,UAA0B,EAAQ/D,aAAlC,aAA0B,EAAeE,QAAQ,GAGnD,MAAO,CACLb,YACAE,QACAH,SACAM,QAAA,EACAa,OAAA,EACAX,SACAM,UACAM,kB,UC5CN,EAAO4C,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB","file":"js/chunk-38102514.4a9cee56.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=71753b3c&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PhraseCard.vue?vue&type=style&index=0&id=46b1e0ba&lang=scss&scoped=true\"","<template>\n  <div v-if=\"corpus\" class=\"section col-1\">\n    <div class=\"col-1\">\n      <div class=\"row\">\n        <toggle v-model=\"searching\" icon=\"search\" />\n        <input\n          v-if=\"searching\"\n          v-model=\"query\"\n          class=\"flex\"\n          type=\"text\"\n          placeholder=\"Search all phrases...\"\n        />\n        <h2 v-else class=\"col-1 flex\">\n          <select\n            v-model=\"section\"\n            style=\"flex: none\"\n            @change=\"select(section)\"\n          >\n            <option v-for=\"s in corpus\" :key=\"s.id\" :value=\"s\">\n              {{ s.name }}\n            </option>\n          </select>\n        </h2>\n      </div>\n      <div class=\"scroll\">\n        <div v-if=\"searching\" class=\"col\">\n          <div v-for=\"(ps, s) of phrases\" :key=\"s\" class=\"col\">\n            <h2>{{ corpus[s].name }}</h2>\n            <div class=\"col-0\">\n              <btn\n                v-for=\"p in ps\"\n                :key=\"p\"\n                :text=\"corpus[s].phrases[p].name\"\n                :is-on=\"phrase === corpus[s].phrases[p]\"\n                @click=\"select(corpus[s], corpus[s].phrases[p])\"\n              />\n            </div>\n          </div>\n        </div>\n        <div v-else class=\"col-0\">\n          <btn\n            v-for=\"p in phrases\"\n            :key=\"p.id\"\n            :text=\"p.name\"\n            :is-on=\"phrase === p\"\n            @click=\"select(null, p)\"\n          />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"phrase\" :key=\"phrase.id\" class=\"col-1\">\n      <PhraseCard :phrase=\"phrase\" />\n      <PhraseCard\n        v-for=\"(p, n) of phrasebooks\"\n        :key=\"n\"\n        :lect=\"n\"\n        :phrase=\"p[phrase.id]\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport PhraseCard from \"./PhraseCard.vue\";\n\nimport { computed, ref, watch, defineComponent, provide } from \"vue\";\n\nimport { corpus, section, phrase, phrasebooks, initialize } from \"./main\";\nimport { Context, CorpusPhrase, CorpusSection } from \"./types\";\nimport { createContext } from \"./utils\";\n\nexport default defineComponent({\n  components: { PhraseCard },\n  setup() {\n    initialize();\n\n    const context = ref({} as Context);\n    watch(phrase, (phrase) => createContext(context, phrase?.context), {\n      immediate: true,\n    });\n\n    provide(\"context\", context);\n\n    const searching = ref(false);\n    const query = ref(\"\");\n\n    const phrases = computed(() =>\n      searching.value\n        ? corpus.value.reduce((result, section, index) => {\n            result[index] = section.phrases\n              .map((phrase, index) => [phrase, index] as [CorpusPhrase, number])\n              .filter(([phrase]) => phrase.name.includes(query.value))\n              .map(([, index]) => index);\n            if (!result[index].length) delete result[index];\n            return result;\n          }, {} as Record<number, number[]>)\n        : section.value?.phrases\n    );\n    function select(_section?: CorpusSection, _phrase?: CorpusPhrase) {\n      if (_section) section.value = _section;\n      phrase.value = _phrase ?? section.value?.phrases[0];\n    }\n\n    return {\n      searching,\n      query,\n      corpus,\n      section,\n      phrase,\n      select,\n      phrases,\n      phrasebooks,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.section {\n  display: grid;\n  grid-template-columns: 288px minmax(0, 1fr);\n  gap: map-get($margins, \"normal\");\n  > :first-child {\n    max-height: 640px;\n  }\n}\n@media only screen and (max-width: $mobile-width) {\n  .section {\n    > :first-child {\n      max-height: 320px;\n    }\n    grid-template-columns: 100%;\n  }\n}\n</style>\n","<template>\n  <div v-if=\"phrase\" class=\"col card flag\">\n    <Flag :lect=\"lect\" class=\"blur\" />\n    <div v-if=\"lect\" class=\"row small wrap\" style=\"width: 100%\">\n      <h2 class=\"flex\">{{ lect }}</h2>\n      <div class=\"row\">\n        <toggle v-model=\"playing\" icon=\"play_arrow\" />\n        <btn icon=\"content_copy\" @click=\"copy\" />\n        <toggle v-model=\"glossed\" icon=\"layers\" />\n      </div>\n    </div>\n    <Context :translation=\"lect ? phrase.context : null\" :blocks=\"vblocks\" />\n    <div class=\"row wrap flex\">\n      <div v-for=\"(b, i) in phrase.blocks\" :key=\"i\" class=\"blocks row seeker\">\n        <Seeker\n          :check=\"playing && player.current?.i === i\"\n          :seek=\"player.seek\"\n        />\n        <Block :block=\"b\" :glossed=\"glossed\" @update=\"vblocks[i] = $event\" />\n      </div>\n    </div>\n    <Notes class=\"text-caption\" :notes=\"phrase.notes\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Context from \"./Context/index.vue\";\nimport Block from \"./Block/index.vue\";\nimport Notes from \"@/components/Notes/index.vue\";\nimport Flag from \"@/components/Flag.vue\";\nimport Seeker from \"@/components/Seeker.vue\";\n\nimport { computed, defineComponent, PropType, reactive, ref, watch } from \"vue\";\n\nimport { Phrase, BlockSnapshot } from \"./types\";\nimport player from \"@/audio-player\";\n\nexport default defineComponent({\n  components: { Context, Block, Notes, Flag, Seeker },\n  props: {\n    lect: { type: String, default: \"\" },\n    phrase: { type: Object as PropType<Phrase>, default: undefined },\n  },\n  setup(props) {\n    const glossed = ref(false);\n    const vblocks = reactive([] as BlockSnapshot[]);\n\n    const text = computed(() =>\n      vblocks\n        .filter(({ state }) => state)\n        .map(({ text }) => text)\n        .join(\" \")\n    );\n    function copy() {\n      navigator.clipboard.writeText(text.value);\n    }\n\n    const playing = computed({\n      get: () => player.key === props.lect,\n      set: (p) => {\n        if (p)\n          player.play(\n            props.lect,\n            vblocks\n              .map(({ state }) => state?.texts.map(({ plain }) => plain))\n              .map((p) => \"phrasebook/\" + (p?.join(\"\") ?? \"\"))\n          );\n        else player.stop();\n      },\n    });\n\n    return { glossed, vblocks, copy, player, playing };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.card {\n  align-items: flex-start;\n}\n</style>\n","\nimport Context from \"./Context/index.vue\";\nimport Block from \"./Block/index.vue\";\nimport Notes from \"@/components/Notes/index.vue\";\nimport Flag from \"@/components/Flag.vue\";\nimport Seeker from \"@/components/Seeker.vue\";\n\nimport { computed, defineComponent, PropType, reactive, ref, watch } from \"vue\";\n\nimport { Phrase, BlockSnapshot } from \"./types\";\nimport player from \"@/audio-player\";\n\nexport default defineComponent({\n  components: { Context, Block, Notes, Flag, Seeker },\n  props: {\n    lect: { type: String, default: \"\" },\n    phrase: { type: Object as PropType<Phrase>, default: undefined },\n  },\n  setup(props) {\n    const glossed = ref(false);\n    const vblocks = reactive([] as BlockSnapshot[]);\n\n    const text = computed(() =>\n      vblocks\n        .filter(({ state }) => state)\n        .map(({ text }) => text)\n        .join(\" \")\n    );\n    function copy() {\n      navigator.clipboard.writeText(text.value);\n    }\n\n    const playing = computed({\n      get: () => player.key === props.lect,\n      set: (p) => {\n        if (p)\n          player.play(\n            props.lect,\n            vblocks\n              .map(({ state }) => state?.texts.map(({ plain }) => plain))\n              .map((p) => \"phrasebook/\" + (p?.join(\"\") ?? \"\"))\n          );\n        else player.stop();\n      },\n    });\n\n    return { glossed, vblocks, copy, player, playing };\n  },\n});\n","import { render } from \"./PhraseCard.vue?vue&type=template&id=46b1e0ba&scoped=true\"\nimport script from \"./PhraseCard.vue?vue&type=script&lang=ts\"\nexport * from \"./PhraseCard.vue?vue&type=script&lang=ts\"\n\nimport \"./PhraseCard.vue?vue&type=style&index=0&id=46b1e0ba&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-46b1e0ba\"\n\nexport default script","import { getInitializer, loadJSON, loadLectsJSON } from \"@/store\";\nimport { shallowRef } from \"vue\";\nimport { CorpusPhrase, CorpusSection, Phrasebook } from \"./types\";\n\nexport const corpus = shallowRef<CorpusSection[]>([]);\nexport const phrasebooks = shallowRef<Record<string, Phrasebook>>();\nexport const section = shallowRef<CorpusSection>();\nexport const phrase = shallowRef<CorpusPhrase>();\n\nexport const initialize = getInitializer(async () => {\n  corpus.value = await loadJSON(\"phrasebook\");\n  phrasebooks.value = await loadLectsJSON<Phrasebook>(\"phrasebook\");\n\n  section.value = corpus.value[0];\n  phrase.value = section.value.phrases[0];\n});\n","\nimport PhraseCard from \"./PhraseCard.vue\";\n\nimport { computed, ref, watch, defineComponent, provide } from \"vue\";\n\nimport { corpus, section, phrase, phrasebooks, initialize } from \"./main\";\nimport { Context, CorpusPhrase, CorpusSection } from \"./types\";\nimport { createContext } from \"./utils\";\n\nexport default defineComponent({\n  components: { PhraseCard },\n  setup() {\n    initialize();\n\n    const context = ref({} as Context);\n    watch(phrase, (phrase) => createContext(context, phrase?.context), {\n      immediate: true,\n    });\n\n    provide(\"context\", context);\n\n    const searching = ref(false);\n    const query = ref(\"\");\n\n    const phrases = computed(() =>\n      searching.value\n        ? corpus.value.reduce((result, section, index) => {\n            result[index] = section.phrases\n              .map((phrase, index) => [phrase, index] as [CorpusPhrase, number])\n              .filter(([phrase]) => phrase.name.includes(query.value))\n              .map(([, index]) => index);\n            if (!result[index].length) delete result[index];\n            return result;\n          }, {} as Record<number, number[]>)\n        : section.value?.phrases\n    );\n    function select(_section?: CorpusSection, _phrase?: CorpusPhrase) {\n      if (_section) section.value = _section;\n      phrase.value = _phrase ?? section.value?.phrases[0];\n    }\n\n    return {\n      searching,\n      query,\n      corpus,\n      section,\n      phrase,\n      select,\n      phrases,\n      phrasebooks,\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=71753b3c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=71753b3c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-71753b3c\"\n\nexport default script"],"sourceRoot":""}