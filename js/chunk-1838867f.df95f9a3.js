(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1838867f"],{"04d4":function(e,t,n){"use strict";var o=n("7a23");function c(e,t,n,c,r,a){var i=Object(o["B"])("btn");return Object(o["s"])(),Object(o["d"])(i,{class:"highlight-font-alert",icon:e.icon,text:e.text,onClick:e.confirm},null,8,["icon","text","onClick"])}var r=Object(o["i"])({props:{message:{type:String,default:"Delete?"},icon:{type:String,default:"delete"},text:{type:String,default:""}},emits:["confirm"],setup:function(e,t){var n=t.emit;function o(){window.confirm(e.message)&&n("confirm")}return{confirm:o}}});r.render=c;t["a"]=r},"1e73":function(e,t,n){},"428a":function(e,t,n){"use strict";var o=n("7a23"),c={class:"row-1 wrap block-editor"};function r(e,t,n,r,a,i){var l=Object(o["B"])("ArrayControl"),u=Object(o["B"])("Context"),d=Object(o["B"])("btn"),s=Object(o["B"])("Block"),b=Object(o["B"])("EditorCard");return e.mphrase?(Object(o["s"])(),Object(o["d"])(b,{key:0,icon:"widgets",header:"Blocks"},{header:Object(o["M"])((function(){return[Object(o["h"])(l,{modelValue:e.blocks,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.blocks=t}),item:e.block,"onUpdate:item":t[2]||(t[2]=function(t){return e.block=t}),add:function(){return[e.newState()]},copy:"",shift:"",remove:""},null,8,["modelValue","item","add"])]})),default:Object(o["M"])((function(){return[Object(o["h"])(u,{translation:e.phrase.id?null:e.phrase.context},null,8,["translation"]),Object(o["h"])("div",c,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(e.blocks,(function(t,n){return Object(o["s"])(),Object(o["d"])("div",{key:n+"--"+Math.random(),class:"row"},[Object(o["h"])(d,{icon:"edit","is-on":e.block===t,onClick:function(n){return e.block=t}},null,8,["is-on","onClick"]),Object(o["h"])(s,{block:t},null,8,["block"])])})),128))])]})),_:1})):Object(o["e"])("",!0)}var a=n("b5cc"),i=n("7694"),l=n("5794"),u=n("72e9"),d=n("7ec3"),s=Object(o["i"])({name:"OrderEditor",components:{ArrayControl:a["a"],EditorCard:i["a"],Context:l["a"],Block:u["a"]},props:{modelValue:{type:Array,default:void 0},phrase:{type:Object,default:void 0}},emits:["update:modelValue","update:phrase"],setup:function(e,t){var n=t.emit,c=Object(o["b"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),r=Object(o["b"])({get:function(){return e.phrase},set:function(e){return n("update:modelValue",e)}}),a=Object(o["b"])({get:function(){return r.value.blocks},set:function(e){return r.value.blocks=e}});return{mphrase:r,blocks:a,block:c,newState:d["e"]}}});s.render=r;t["a"]=s},"5db7":function(e,t,n){"use strict";var o=n("23e7"),c=n("a2bf"),r=n("7b0b"),a=n("50c4"),i=n("1c0b"),l=n("65f0");o({target:"Array",proto:!0},{flatMap:function(e){var t,n=r(this),o=a(n.length);return i(e),t=l(n,0),t.length=c(t,n,n,o,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},"73d9":function(e,t,n){var o=n("44d2");o("flatMap")},7694:function(e,t,n){"use strict";var o=n("7a23"),c=Object(o["P"])("data-v-03976a61");Object(o["v"])("data-v-03976a61");var r={class:"col"},a={class:"row"},i={class:"icon"},l={class:"flex"},u=Object(o["h"])("hr",null,null,-1),d={key:0,class:"text-caption text-faded"},s={class:"col"};Object(o["t"])();var b=c((function(e,t,n,c,b,f){return Object(o["s"])(),Object(o["d"])("div",r,[Object(o["h"])("div",a,[Object(o["h"])("p",i,Object(o["D"])(e.icon),1),Object(o["h"])("h2",l,Object(o["D"])(e.header),1),Object(o["A"])(e.$slots,"header")]),u,e.caption?(Object(o["s"])(),Object(o["d"])("p",d,[Object(o["A"])(e.$slots,"caption")])):Object(o["e"])("",!0),Object(o["h"])("div",s,[Object(o["A"])(e.$slots,"default")])])})),f=Object(o["i"])({name:"EditorCard",props:{button:{type:String,default:"add"},icon:{type:String,default:""},header:{type:String,default:""}},emits:["action"],setup:function(e,t){var n=t.emit,o=t.slots;return{emit:n,caption:o.caption}}});n("c714");f.render=b,f.__scopeId="data-v-03976a61";t["a"]=f},9362:function(e,t,n){"use strict";var o=n("7a23"),c={key:0,class:"block col-2"},r={class:"row-1 wrap block-editor"},a={key:0,class:"icon highlight-font"};function i(e,t,n,i,l,u){var d=Object(o["B"])("toggle"),s=Object(o["B"])("ArrayControl"),b=Object(o["B"])("VState"),f=Object(o["B"])("EditorCard"),O=Object(o["B"])("TextsEditor"),j=Object(o["B"])("ConditionsEditor"),p=Object(o["B"])("TransitionEditor");return e.block?(Object(o["s"])(),Object(o["d"])("div",c,[Object(o["h"])(f,{icon:"account_tree",header:"States"},{header:Object(o["M"])((function(){return[Object(o["h"])(d,{modelValue:e.glossed,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.glossed=t}),icon:"layers"},null,8,["modelValue"]),Object(o["h"])(s,{modelValue:e.block,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.block=t}),item:e.state,"onUpdate:item":t[3]||(t[3]=function(t){return e.state=t}),add:e.newState,copy:"",shift:"",remove:""},null,8,["modelValue","item","add"])]})),default:Object(o["M"])((function(){return[Object(o["h"])("div",r,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(e.block,(function(t,n){return Object(o["s"])(),Object(o["d"])("button",{key:n,class:"row fit-h",onClick:function(n){return e.state=t}},[e.state===t?(Object(o["s"])(),Object(o["d"])("p",a,"edit")):Object(o["e"])("",!0),Object(o["h"])(b,{state:t,glossed:e.glossed},null,8,["state","glossed"])],8,["onClick"])})),128))])]})),_:1}),e.state?(Object(o["s"])(),Object(o["d"])(o["a"],{key:0},[Object(o["h"])(O,{modelValue:e.state.texts,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.state.texts=t})},null,8,["modelValue"]),Object(o["h"])(j,{modelValue:e.state.conditions,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.state.conditions=t})},null,8,["modelValue"]),Object(o["h"])(p,{modelValue:e.state.transition,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.state.transition=t}),states:e.block},null,8,["modelValue","states"])],64)):Object(o["e"])("",!0)])):Object(o["e"])("",!0)}var l=n("b5cc"),u=n("7694"),d=Object(o["P"])("data-v-6cb03aac");Object(o["v"])("data-v-6cb03aac");var s=Object(o["g"])("TODO brief explanation"),b={class:"row wrap"};Object(o["t"])();var f=d((function(e,t,n,c,r,a){var i=Object(o["B"])("btn"),l=Object(o["B"])("EditorCard");return Object(o["s"])(),Object(o["d"])(l,{icon:"tune",header:"conditions"},Object(o["f"])({caption:d((function(){return[s]})),default:d((function(){return[Object(o["h"])("div",b,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(e.tags,(function(t,n){var c=t.entity,r=t.tag,a=t.color,i=t.icon,l=t.flag;return Object(o["s"])(),Object(o["d"])("button",{key:c+"--"+r,onClick:function(t){return e.toggle(n)}},[void 0!==l?(Object(o["s"])(),Object(o["d"])("p",{key:0,class:["icon","colored-"+a]},Object(o["D"])(i),3)):Object(o["e"])("",!0),Object(o["h"])("p",{class:"colored-dot-"+a},Object(o["D"])(r),3)],8,["onClick"])})),128))])]})),_:2},[e.conditions?{name:"header",fn:d((function(){return[Object(o["h"])(i,{icon:"clear",onClick:t[1]||(t[1]=function(t){return e.conditions={}})})]}))}:void 0]),1024)})),O=(n("5db7"),n("d81d"),n("73d9"),n("b64b"),n("3835")),j=Object(o["i"])({name:"ConditionsEditor",components:{EditorCard:u["a"]},props:{modelValue:{type:Object,default:void 0}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,c=Object(o["l"])("contextSource",{}),r=Object(o["b"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),a=Object(o["y"])([]);function i(e){if(a.value){var t=a.value[e],n=t.flag,o=t.entity,c=t.tag;void 0===n?(r.value[o]||(r.value[o]={}),r.value[o][c]=!0):n?r.value[o][c]=!1:(delete r.value[o][c],Object.keys(r.value[o]).length||delete r.value[o])}}return Object(o["K"])([c,r],(function(e){var t=Object(O["a"])(e,2),n=t[0],o=t[1];n&&o&&(a.value=n.flatMap((function(e,t){var n=e.entity,c=e.tags;return c.map((function(e){var c,r=null===(c=o[n])||void 0===c?void 0:c[e],a=void 0===r?"arrow_right":r?"send":"lock";return{tag:e,entity:n,icon:a,color:t,flag:r}}))})))}),{immediate:!0,deep:!0}),{context:c,conditions:r,tags:a,toggle:i}}});n("ed81");j.render=f,j.__scopeId="data-v-6cb03aac";var p=j,v=(n("caad"),n("2532"),{class:"row"}),m={key:0,class:"row wrap"},h={key:0,class:"icon highlight-font"};function y(e,t,n,c,r,a){var i=Object(o["B"])("btn"),l=Object(o["B"])("VState"),u=Object(o["B"])("EditorCard");return Object(o["s"])(),Object(o["d"])(u,{icon:"alt_route",header:"transition"},{header:Object(o["M"])((function(){return[Object(o["h"])("div",v,[Object(o["h"])(i,{icon:"block","is-on":0===e.mode,onClick:t[1]||(t[1]=function(t){return e.mode=0})},null,8,["is-on"]),Object(o["h"])(i,{icon:"arrow_forward","is-on":1===e.mode,onClick:t[2]||(t[2]=function(t){return e.mode=1})},null,8,["is-on"]),Object(o["h"])(i,{icon:"star_outline","is-on":2===e.mode,onClick:t[3]||(t[3]=function(t){return e.mode=2})},null,8,["is-on"])])]})),default:Object(o["M"])((function(){return[2===e.mode?(Object(o["s"])(),Object(o["d"])("div",m,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(e.states,(function(t,n){return Object(o["s"])(),Object(o["d"])("button",{key:n,class:"row",onClick:function(t){return e.toggle(n)}},[e.transition.includes(n)?(Object(o["s"])(),Object(o["d"])("p",h," star_outline ")):Object(o["e"])("",!0),Object(o["h"])(l,{state:t},null,8,["state"])],8,["onClick"])})),128))])):Object(o["e"])("",!0)]})),_:1})}n("c975"),n("a434");var g=n("af66"),k=Object(o["i"])({name:"TransitionEditor",components:{EditorCard:u["a"],VState:g["a"]},props:{modelValue:{type:[Array,String],default:void 0},states:{type:Array,default:function(){return[]}}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,c=Object(o["b"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),r=Object(o["b"])({get:function(){return c.value?"next"===c.value?1:2:0},set:function(e){return c.value=e?1===e?"next":[]:void 0}});function a(e){if(Array.isArray(c.value)){var t=c.value.indexOf(e);t<0?c.value.push(e):c.value.splice(t,1)}}return{transition:c,mode:r,toggle:a}}});k.render=y;var V=k,C={class:"col"};function x(e,t,n,c,r,a){var i=Object(o["B"])("ArrayControl"),l=Object(o["B"])("btn"),u=Object(o["B"])("EditorCard");return Object(o["s"])(),Object(o["d"])(u,{icon:"format_color_text",header:"texts"},{header:Object(o["M"])((function(){return[Object(o["h"])(i,{modelValue:e.texts,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.texts=t}),add:{}},null,8,["modelValue"])]})),default:Object(o["M"])((function(){return[Object(o["h"])("div",C,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["z"])(e.texts,(function(t,n){return Object(o["s"])(),Object(o["d"])("div",{key:n,class:"row"},[Object(o["h"])(l,{icon:"palette",onClick:function(t){return e.toggle(n)}},null,8,["onClick"]),Object(o["h"])("div",{class:["row",e.colors[n]]},[Object(o["N"])(Object(o["h"])("input",{"onUpdate:modelValue":function(e){return t.plain=e},type:"text",placeholder:"plain"},null,8,["onUpdate:modelValue"]),[[o["I"],t.plain]]),Object(o["N"])(Object(o["h"])("input",{"onUpdate:modelValue":function(e){return t.ipa=e},class:"text-ipa",type:"text",placeholder:"ipa"},null,8,["onUpdate:modelValue"]),[[o["I"],t.ipa]]),Object(o["N"])(Object(o["h"])("input",{"onUpdate:modelValue":function(e){return t.gloss=e},type:"text",placeholder:"gloss"},null,8,["onUpdate:modelValue"]),[[o["I"],t.gloss]])],2),Object(o["h"])(l,{icon:"clear",onClick:function(t){return e.texts.splice(n,1)}},null,8,["onClick"])])})),128))])]})),_:1})}var w=Object(o["i"])({name:"TextsEditor",components:{EditorCard:u["a"],ArrayControl:l["a"]},props:{modelValue:{type:Array,default:void 0}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,c=Object(o["l"])("context",{}),r=Object(o["b"])((function(){return Object.keys(c.value)})),a=Object(o["b"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),i=Object(o["b"])((function(){var e;return null===(e=a.value)||void 0===e?void 0:e.map((function(e){var t=e.entity;return r.value.indexOf(null!==t&&void 0!==t?t:"")})).map((function(e){return"colored-"+e}))}));function l(e){var t,n=a.value[e],o=r.value.indexOf(null!==(t=n.entity)&&void 0!==t?t:"");n.entity=r.value[o+1]}return{texts:a,colors:i,toggle:l}}});w.render=x;var S=w,B=n("7ec3"),E=Object(o["i"])({name:"BlockEditor",components:{ArrayControl:l["a"],EditorCard:u["a"],ConditionsEditor:p,TransitionEditor:V,VState:g["a"],TextsEditor:S},props:{modelValue:{type:Array,default:void 0}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,c=Object(o["b"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),r=Object(o["y"])(void 0),a=Object(o["y"])(!1);return{newState:B["e"],glossed:a,state:r,block:c}}});E.render=i;t["a"]=E},9392:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return l}));var o=n("7a23"),c={defaultFile:{},storage:"",filename:""},r=Object(o["y"])();function a(){r.value=JSON.parse(JSON.stringify(c.defaultFile))}function i(){localStorage[c.storage]=JSON.stringify(r.value)}function l(e){Object.assign(c,e);try{r.value=JSON.parse(localStorage[c.storage])}catch(t){a()}return Object(o["K"])(r,i,{deep:!0}),r}},a2bf:function(e,t,n){"use strict";var o=n("e8b5"),c=n("50c4"),r=n("0366"),a=function(e,t,n,i,l,u,d,s){var b,f=l,O=0,j=!!d&&r(d,s,3);while(O<i){if(O in n){if(b=j?j(n[O],O,t):n[O],u>0&&o(b))f=a(e,t,b,c(b.length),f,u-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=b}f++}O++}return f};e.exports=a},a434:function(e,t,n){"use strict";var o=n("23e7"),c=n("23cb"),r=n("a691"),a=n("50c4"),i=n("7b0b"),l=n("65f0"),u=n("8418"),d=n("1dde"),s=n("ae40"),b=d("splice"),f=s("splice",{ACCESSORS:!0,0:0,1:2}),O=Math.max,j=Math.min,p=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!b||!f},{splice:function(e,t){var n,o,d,s,b,f,m=i(this),h=a(m.length),y=c(e,h),g=arguments.length;if(0===g?n=o=0:1===g?(n=0,o=h-y):(n=g-2,o=j(O(r(t),0),h-y)),h+n-o>p)throw TypeError(v);for(d=l(m,o),s=0;s<o;s++)b=y+s,b in m&&u(d,s,m[b]);if(d.length=o,n<o){for(s=y;s<h-o;s++)b=s+o,f=s+n,b in m?m[f]=m[b]:delete m[f];for(s=h;s>h-o+n;s--)delete m[s-1]}else if(n>o)for(s=h-o;s>y;s--)b=s+o-1,f=s+n-1,b in m?m[f]=m[b]:delete m[f];for(s=0;s<n;s++)m[s+y]=arguments[s+2];return m.length=h-o+n,d}})},b5cc:function(e,t,n){"use strict";var o=n("7a23"),c={class:"row"},r={key:1,class:"row-0"};function a(e,t,n,a,i,l){var u=Object(o["B"])("btn"),d=Object(o["B"])("ConfirmButton");return Object(o["s"])(),Object(o["d"])("div",c,[void 0!==e.add?(Object(o["s"])(),Object(o["d"])(u,{key:0,icon:"add",onClick:e.action.add},null,8,["onClick"])):Object(o["e"])("",!0),e.array&&e.item?(Object(o["s"])(),Object(o["d"])(o["a"],{key:1},[e.copy?(Object(o["s"])(),Object(o["d"])(u,{key:0,icon:"queue",onClick:e.action.copy},null,8,["onClick"])):Object(o["e"])("",!0),e.shift?(Object(o["s"])(),Object(o["d"])("div",r,[Object(o["h"])(u,{icon:"keyboard_arrow_up",onClick:t[1]||(t[1]=function(t){return e.action.shift(-1)})}),Object(o["h"])(u,{icon:"keyboard_arrow_down",onClick:t[2]||(t[2]=function(t){return e.action.shift(1)})})])):Object(o["e"])("",!0),e.remove?(Object(o["s"])(),Object(o["d"])(d,{key:2,onConfirm:e.action.remove},null,8,["onConfirm"])):Object(o["e"])("",!0)],64)):Object(o["e"])("",!0)])}n("c975"),n("a434"),n("a9e3"),n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n("96cf");var l=n("1da1"),u=n("04d4"),d=Object(o["i"])({name:"ArrayControl",components:{ConfirmButton:u["a"]},props:{modelValue:{type:Array,default:function(){}},item:{type:Object,default:void 0},add:{type:[Number,String,Object,Function],default:void 0},copy:Boolean,shift:Boolean,remove:Boolean},emits:["update:modelValue","update:item"],setup:function(e,t){var n=t.emit,c=Object(o["b"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}});function r(){n("update:item",c.value?c.value[c.value.length-1]:void 0)}function a(){return u.apply(this,arguments)}function u(){return u=Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.add,void 0!==!n){t.next=3;break}return t.abrupt("return");case 3:if(c.value){t.next=7;break}return c.value=[],t.next=7,Object(o["n"])();case 7:n="function"===typeof n?n():"object"===i(n)?JSON.parse(JSON.stringify(n)):n,c.value.push(n),r();case 10:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function d(){var t=JSON.parse(JSON.stringify(Object(o["E"])(e.item)));c.value.push(t),r()}function s(t){var n=c.value.length,r=e.item,a=c.value.indexOf(Object(o["E"])(r)),i=(a+t+n)%n;c.value.splice(a,1),c.value.splice(i,0,r)}function b(){var t=c.value.indexOf(Object(o["E"])(e.item));c.value.splice(t,1),r()}return Object(o["K"])(c,r,{immediate:!0}),{array:c,action:{add:a,copy:d,shift:s,remove:b}}}});d.render=a;t["a"]=d},c714:function(e,t,n){"use strict";n("1e73")},ed81:function(e,t,n){"use strict";n("f882")},f882:function(e,t,n){}}]);
//# sourceMappingURL=chunk-1838867f.df95f9a3.js.map