{"version":3,"sources":["webpack:///./src/Phrasebook/CorpusEditor.vue?deb3","webpack:///./src/Phrasebook/CorpusEditor.vue?887f","webpack:///./src/Phrasebook/Context/Editor.vue?b6c8","webpack:///./src/Phrasebook/CorpusEditor.vue?deec","webpack:///./src/Phrasebook/CorpusEditor.vue","webpack:///./src/Phrasebook/Context/Editor.vue","webpack:///./src/Phrasebook/Context/Editor.vue?c492","webpack:///./src/Phrasebook/Context/Editor.vue?bfca","webpack:///./node_modules/uuid/dist/esm-browser/rng.js","webpack:///./node_modules/uuid/dist/esm-browser/regex.js","webpack:///./node_modules/uuid/dist/esm-browser/validate.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js","webpack:///./src/Phrasebook/CorpusEditor.vue?5859","webpack:///./src/Phrasebook/CorpusEditor.vue?95e4"],"names":["class","file","icon","header","s","i","key","id","is-on","section","name","type","placeholder","item","add","uuidv4","shift","remove","phrases","p","phrase","block","context","c","entity","tags","update","splice","components","EditorCard","ArrayControl","props","modelValue","Array","default","undefined","emits","setup","emit","get","set","value","split","filter","t","map","join","immediate","deep","render","__scopeId","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","validate","uuid","test","byteToHex","push","toString","substr","stringify","arr","offset","arguments","length","toLowerCase","TypeError","v4","options","buf","rnds","random","BlocksOrderEditor","ContextEditor","BlockEditor","defaultFile","filename","window","confirm","storage","contextSource","blocks"],"mappings":"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","file":"js/chunk-0a647a0d.1e78d277.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CorpusEditor.vue?vue&type=style&index=1&id=42151eb2&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CorpusEditor.vue?vue&type=style&index=2&id=42151eb2&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Editor.vue?vue&type=style&index=0&id=0c9a5b4a&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CorpusEditor.vue?vue&type=style&index=0&id=42151eb2&lang=scss&scoped=true\"","<template>\n  <div v-if=\"file\" class=\"section col-2 small grid\">\n    <div class=\"col-2\">\n      <EditorCard icon=\"topic\" header=\"sections\">\n        <template v-if=\"section\" #header>\n          <ArrayControl\n            v-model=\"file\"\n            v-model:item=\"section\"\n            :add=\"() => ({ id: uuidv4() })\"\n            shift\n            remove\n          />\n        </template>\n        <div class=\"col scroll\">\n          <div v-for=\"(s, i) in file\" :key=\"s.id\" class=\"row\">\n            <btn icon=\"edit\" :is-on=\"section === s\" @click=\"section = s\" />\n            <input\n              v-model=\"s.name\"\n              class=\"flex\"\n              type=\"text\"\n              :placeholder=\"'section #' + i\"\n            />\n          </div>\n        </div>\n      </EditorCard>\n      <EditorCard v-if=\"section\" icon=\"short_text\" header=\"phrases\">\n        <template v-if=\"phrase\" #header>\n          <ArrayControl\n            v-model=\"section.phrases\"\n            v-model:item=\"phrase\"\n            :add=\"() => ({ id: uuidv4() })\"\n            shift\n            remove\n          />\n        </template>\n        <div class=\"col scroll\">\n          <div v-for=\"(p, i) in section.phrases\" :key=\"p.id\" class=\"row\">\n            <btn icon=\"edit\" :is-on=\"phrase === p\" @click=\"phrase = p\" />\n            <input\n              v-model=\"p.name\"\n              class=\"flex\"\n              type=\"text\"\n              :placeholder=\"'phrase #' + i\"\n            />\n          </div>\n        </div>\n      </EditorCard>\n      <template v-if=\"phrase\">\n        <BlocksOrderEditor\n          :key=\"phrase.id\"\n          v-model=\"block\"\n          v-model:phrase=\"phrase\"\n        />\n        <ContextEditor v-if=\"phrase\" v-model=\"phrase.context\" />\n      </template>\n    </div>\n    <BlockEditor v-if=\"block\" v-model=\"block\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport ArrayControl from \"@/components/ArrayControl.vue\";\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport BlocksOrderEditor from \"./Block/OrderEditor.vue\";\nimport ContextEditor from \"./Context/Editor.vue\";\nimport BlockEditor from \"./Block/Editor.vue\";\n\nimport { defineComponent, ref, provide, watch, computed } from \"vue\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { setupEditor } from \"@/editor\";\nimport { State, Context, CorpusPhrase, CorpusSection } from \"./types\";\nimport { createContext } from \"./utils\";\n\nexport default defineComponent({\n  components: {\n    ArrayControl,\n    EditorCard,\n    BlocksOrderEditor,\n    ContextEditor,\n    BlockEditor,\n  },\n  setup() {\n    const file = setupEditor<CorpusSection[]>({\n      defaultFile: [],\n      filename: () =>\n        window.confirm(\"You're resetting phrasebook corpus.\")\n          ? \"phrasebook\"\n          : \"\",\n      storage: \"editor.phrasebookCorpus\",\n    });\n    const section = ref(undefined as undefined | CorpusSection);\n    const phrase = ref(undefined as undefined | CorpusPhrase);\n    const block = ref(undefined as undefined | State[]);\n\n    const contextSource = computed(() => phrase.value?.context);\n    const context = ref({} as Context);\n    provide(\"contextSource\", contextSource);\n    provide(\"context\", context);\n    watch(\n      contextSource,\n      (contextSource) => createContext(context, contextSource),\n      { immediate: true, deep: true }\n    );\n\n    watch(file, (file) => (section.value = file[file.length - 1]), {\n      immediate: true,\n    });\n    watch(\n      section,\n      (section) =>\n        (phrase.value = section?.phrases?.[section.phrases.length - 1]),\n      { immediate: true }\n    );\n    watch(\n      phrase,\n      (phrase) => (block.value = phrase?.blocks?.[phrase.blocks.length - 1]),\n      { immediate: true }\n    );\n\n    return { file, section, phrase, block, uuidv4 };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n#header {\n  margin-top: -1 * map-get($margins, \"double\");\n  padding-top: 2 * map-get($margins, \"normal\");\n}\n.grid {\n  display: grid;\n  grid-template-columns: minmax(0, 1fr) minmax(0, 1.5fr);\n  gap: map-get($margins, \"double\");\n}\n@media only screen and (max-width: $mobile-width) {\n  .grid {\n    grid-template-columns: 100%;\n  }\n}\n</style>\n\n<style lang=\"scss\">\n.block-editor {\n  gap: 4px 8px;\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.scroll {\n  max-height: 128px;\n}\n</style>\n","<template>\n  <EditorCard icon=\"list_alt\" header=\"context\">\n    <template #header>\n      <ArrayControl v-model=\"context\" :add=\"{ entity: 'entity', tags: [] }\" />\n    </template>\n    <div class=\"col scroll\">\n      <div v-for=\"(c, i) in context\" :key=\"i\" class=\"row\">\n        <input\n          v-model=\"c.entity\"\n          class=\"entity\"\n          :class=\"'colored-' + i\"\n          type=\"text\"\n          :placeholder=\"'entity #' + i\"\n        />\n        <input\n          v-model=\"tags[i]\"\n          class=\"flex\"\n          type=\"text\"\n          placeholder=\"tags\"\n          @change=\"update(i)\"\n        />\n        <btn icon=\"clear\" @click=\"context.splice(i, 1)\" />\n      </div>\n    </div>\n  </EditorCard>\n</template>\n\n<script lang=\"ts\">\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport ArrayControl from \"@/components/ArrayControl.vue\";\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\nimport { ContextSource } from \"../types\";\n\nexport default defineComponent({\n  name: \"ContextEditor\",\n  components: { EditorCard, ArrayControl },\n  props: {\n    modelValue: {\n      type: Array as PropType<ContextSource[]>,\n      default: undefined,\n    },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const context = computed({\n      get: () => props.modelValue,\n      set: (c) => emit(\"update:modelValue\", c),\n    });\n    const tags = ref<string[]>([]);\n    watch(\n      context,\n      (context) =>\n        (tags.value = context?.map(({ tags }) => tags?.join(\" \") ?? \"\") ?? []),\n      { immediate: true, deep: true }\n    );\n\n    function update(i: number) {\n      context.value[i].tags = tags.value[i]?.split(\" \").filter((t) => t) ?? [];\n    }\n\n    return { context, tags, update };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.entity {\n  width: 96px;\n}\n.scroll {\n  max-height: 128px;\n}\n</style>\n","\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport ArrayControl from \"@/components/ArrayControl.vue\";\nimport { computed, defineComponent, PropType, ref, watch } from \"vue\";\nimport { ContextSource } from \"../types\";\n\nexport default defineComponent({\n  name: \"ContextEditor\",\n  components: { EditorCard, ArrayControl },\n  props: {\n    modelValue: {\n      type: Array as PropType<ContextSource[]>,\n      default: undefined,\n    },\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const context = computed({\n      get: () => props.modelValue,\n      set: (c) => emit(\"update:modelValue\", c),\n    });\n    const tags = ref<string[]>([]);\n    watch(\n      context,\n      (context) =>\n        (tags.value = context?.map(({ tags }) => tags?.join(\" \") ?? \"\") ?? []),\n      { immediate: true, deep: true }\n    );\n\n    function update(i: number) {\n      context.value[i].tags = tags.value[i]?.split(\" \").filter((t) => t) ?? [];\n    }\n\n    return { context, tags, update };\n  },\n});\n","import { render } from \"./Editor.vue?vue&type=template&id=0c9a5b4a&scoped=true\"\nimport script from \"./Editor.vue?vue&type=script&lang=ts\"\nexport * from \"./Editor.vue?vue&type=script&lang=ts\"\n\nimport \"./Editor.vue?vue&type=style&index=0&id=0c9a5b4a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0c9a5b4a\"\n\nexport default script","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","\nimport ArrayControl from \"@/components/ArrayControl.vue\";\nimport EditorCard from \"@/components/EditorCard.vue\";\nimport BlocksOrderEditor from \"./Block/OrderEditor.vue\";\nimport ContextEditor from \"./Context/Editor.vue\";\nimport BlockEditor from \"./Block/Editor.vue\";\n\nimport { defineComponent, ref, provide, watch, computed } from \"vue\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { setupEditor } from \"@/editor\";\nimport { State, Context, CorpusPhrase, CorpusSection } from \"./types\";\nimport { createContext } from \"./utils\";\n\nexport default defineComponent({\n  components: {\n    ArrayControl,\n    EditorCard,\n    BlocksOrderEditor,\n    ContextEditor,\n    BlockEditor,\n  },\n  setup() {\n    const file = setupEditor<CorpusSection[]>({\n      defaultFile: [],\n      filename: () =>\n        window.confirm(\"You're resetting phrasebook corpus.\")\n          ? \"phrasebook\"\n          : \"\",\n      storage: \"editor.phrasebookCorpus\",\n    });\n    const section = ref(undefined as undefined | CorpusSection);\n    const phrase = ref(undefined as undefined | CorpusPhrase);\n    const block = ref(undefined as undefined | State[]);\n\n    const contextSource = computed(() => phrase.value?.context);\n    const context = ref({} as Context);\n    provide(\"contextSource\", contextSource);\n    provide(\"context\", context);\n    watch(\n      contextSource,\n      (contextSource) => createContext(context, contextSource),\n      { immediate: true, deep: true }\n    );\n\n    watch(file, (file) => (section.value = file[file.length - 1]), {\n      immediate: true,\n    });\n    watch(\n      section,\n      (section) =>\n        (phrase.value = section?.phrases?.[section.phrases.length - 1]),\n      { immediate: true }\n    );\n    watch(\n      phrase,\n      (phrase) => (block.value = phrase?.blocks?.[phrase.blocks.length - 1]),\n      { immediate: true }\n    );\n\n    return { file, section, phrase, block, uuidv4 };\n  },\n});\n","import { render } from \"./CorpusEditor.vue?vue&type=template&id=42151eb2&scoped=true\"\nimport script from \"./CorpusEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./CorpusEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./CorpusEditor.vue?vue&type=style&index=0&id=42151eb2&lang=scss&scoped=true\"\nimport \"./CorpusEditor.vue?vue&type=style&index=1&id=42151eb2&lang=scss\"\nimport \"./CorpusEditor.vue?vue&type=style&index=2&id=42151eb2&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-42151eb2\"\n\nexport default script"],"sourceRoot":""}